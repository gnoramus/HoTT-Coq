<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>HoTT.Basics.Overture</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library HoTT.Basics.Overture</h1>

<div class="code">

<br/>
</div>

<div class="doc">
<a id="lab19"></a><h1 class="section">Basic definitions of homotopy type theory, particularly the groupoid structure of identity types.</h1>
 Import the file of reserved notations so we maintain consistent level notations throughout the library 
</div>
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="HoTT.Basics.Notations.html#"><span class="id" title="library">Basics.Notations</span></a>.<br/>

<br/>
</div>

<div class="doc">
Currently, Coq 8.12 complains when we use the numeral notations from the Decimal module. Since we only use a copy of the real standard library we will supress this warning. In the future, our copy of the standard library will be completely removed together with this warning. 
</div>
<div class="code">
<span class="id" title="keyword">Global</span> <span class="id" title="keyword">Set</span> <span class="id" title="var">Warnings</span> "-decimal-numeral-notation".<br/>

<br/>
</div>

<div class="doc">
<a id="lab20"></a><h2 class="section">Type classes</h2>

<div class="paragraph"> </div>

 This command prevents Coq from trying to guess the values of existential variables while doing typeclass resolution.  If you don't know what that means, ignore it. 
</div>
<div class="code">
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Set</span> <span class="id" title="keyword">Typeclasses</span> <span class="id" title="keyword">Strict</span> <span class="id" title="var">Resolution</span>.<br/>

<br/>
</div>

<div class="doc">
This command prevents Coq from automatically defining the eliminator functions for inductive types.  We will define them ourselves to match the naming scheme of the HoTT Book.  In principle we ought to make this <span class="inlinecode"><span class="id" title="keyword">Global</span></span>, but unfortunately the tactics <span class="inlinecode"><span class="id" title="tactic">induction</span></span> and <span class="inlinecode"><span class="id" title="tactic">elim</span></span> assume that the eliminators are named in Coq's way, e.g. <span class="inlinecode"><span class="id" title="var">thing_rect</span></span>, so making it global could cause unpleasant surprises for people defining new inductive types.  However, when you do define your own inductive types you are encouraged to also do <span class="inlinecode"><span class="id" title="keyword">Local</span></span> <span class="inlinecode"><span class="id" title="keyword">Unset</span></span> <span class="inlinecode"><span class="id" title="var">Elimination</span></span> <span class="inlinecode"><span class="id" title="var">Schemes</span></span> and then use <span class="inlinecode"><span class="id" title="keyword">Scheme</span></span> to define <span class="inlinecode"><span class="id" title="var">thing_ind</span></span>, <span class="inlinecode"><span class="id" title="var">thing_rec</span></span>, and (for compatibility with <span class="inlinecode"><span class="id" title="tactic">induction</span></span> and <span class="inlinecode"><span class="id" title="tactic">elim</span></span>) <span class="inlinecode"><span class="id" title="var">thing_rect</span></span>, as we have done below for <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#paths"><span class="id" title="inductive">paths</span></a></span>, <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#Empty"><span class="id" title="inductive">Empty</span></a></span>, <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#Unit"><span class="id" title="inductive">Unit</span></a></span>, etc.  We are hoping that this will be fixed eventually; see https://coq.inria.fr/bugs/show_bug.cgi?id=3745.  
</div>
<div class="code">
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Unset</span> <span class="id" title="var">Elimination</span> <span class="id" title="var">Schemes</span>.<br/>

<br/>
</div>

<div class="doc">
This command changes Coq's subterm selection to always use full conversion after finding a subterm whose head/key matches the key of the term we're looking for.  This applies to <span class="inlinecode"><span class="id" title="tactic">rewrite</span></span> and higher-order unification in <span class="inlinecode"><span class="id" title="tactic">apply</span></span>/<span class="inlinecode"><span class="id" title="tactic">elim</span></span>/<span class="inlinecode"><span class="id" title="tactic">destruct</span></span>.  Again, if you don't know what that means, ignore it. 
</div>
<div class="code">
<span class="id" title="keyword">Global</span> <span class="id" title="keyword">Set</span> <span class="id" title="var">Keyed</span> <span class="id" title="var">Unification</span>.<br/>

<br/>
</div>

<div class="doc">
This command makes it so that you don't have to declare universes explicitly when mentioning them in the type.  (Without this command, if you want to say <span class="inlinecode"><span class="id" title="keyword">Definition</span></span> <span class="inlinecode"><a class="idref" href="HoTT.Tests.html#Issue_1358.foo"><span class="id" title="axiom">foo</span></a></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">Type@</span>{<a class="idref" href="HoTT.Classes.theory.ua_second_isomorphism.html#i"><span class="id" title="abbreviation">i</span></a>}.</span>, you must instead say <span class="inlinecode"><span class="id" title="keyword">Definition</span></span> <span class="inlinecode"><span class="id" title="var">foo@</span>{<a class="idref" href="HoTT.Classes.theory.ua_second_isomorphism.html#i"><span class="id" title="abbreviation">i</span></a>}</span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">Type@</span>{<a class="idref" href="HoTT.Classes.theory.ua_second_isomorphism.html#i"><span class="id" title="abbreviation">i</span></a>}.</span>. 
</div>
<div class="code">
<span class="id" title="keyword">Global</span> <span class="id" title="keyword">Unset</span> <span class="id" title="keyword">Strict</span> <span class="id" title="var">Universe</span> <span class="id" title="var">Declaration</span>.<br/>

<br/>
</div>

<div class="doc">
This command makes it so that when we say something like <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#IsHSet"><span class="id" title="abbreviation">IsHSet</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Tests.html#Issue754_1.nat"><span class="id" title="inductive">nat</span></a></span> we get <span class="inlinecode"><span class="id" title="var">IsHSet@</span>{<a class="idref" href="HoTT.Classes.theory.ua_second_isomorphism.html#i"><span class="id" title="abbreviation">i</span></a>}</span> <span class="inlinecode"><a class="idref" href="HoTT.Tests.html#Issue754_1.nat"><span class="id" title="inductive">nat</span></a></span> instead of <span class="inlinecode"><span class="id" title="var">IsHSet@</span>{<span class="id" title="keyword">Set</span>}</span> <span class="inlinecode"><a class="idref" href="HoTT.Tests.html#Issue754_1.nat"><span class="id" title="inductive">nat</span></a></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Global</span> <span class="id" title="keyword">Unset</span> <span class="id" title="var">Universe</span> <span class="id" title="var">Minimization</span> <span class="id" title="var">ToSet</span>.<br/>

<br/>
</div>

<div class="doc">
Force to use bullets in proofs. 
</div>
<div class="code">
<span class="id" title="keyword">Global</span> <span class="id" title="keyword">Set</span> <span class="id" title="var">Default</span> <span class="id" title="keyword">Goal</span> <span class="id" title="var">Selector</span> "!".<br/>

<br/>
</div>

<div class="doc">
Currently Coq doesn't print equivalences correctly (8.6). This fixes that. See https://github.com/HoTT/HoTT/issues/1000 
</div>
<div class="code">
<span class="id" title="keyword">Global</span> <span class="id" title="keyword">Set</span> <span class="id" title="keyword">Printing</span> <span class="id" title="var">Primitive</span> <span class="id" title="var">Projection</span> <span class="id" title="keyword">Parameters</span>.<br/>

<br/>
</div>

<div class="doc">
This tells Coq that when we <span class="inlinecode"><span class="id" title="keyword">Require</span></span> a module without <span class="inlinecode"><span class="id" title="keyword">Import</span></span>ing it, typeclass instances defined in that module should also not be imported.  In other words, the only effect of <span class="inlinecode"><span class="id" title="keyword">Require</span></span> without <span class="inlinecode"><span class="id" title="keyword">Import</span></span> is to make qualified names available. 
</div>
<div class="code">
<span class="id" title="keyword">Global</span> <span class="id" title="keyword">Set</span> <span class="id" title="var">Loose</span> <span class="id" title="keyword">Hint</span> <span class="id" title="var">Behavior</span> "Strict".<br/>

<br/>
</div>

<div class="doc">
Apply using the same opacity information as typeclass proof search. 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">class_apply</span> <span class="id" title="var">c</span> := <span class="id" title="var">autoapply</span> <span class="id" title="var">c</span> <span class="id" title="keyword">with</span> <span class="id" title="var">typeclass_instances</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="Relation" class="idref" href="#Relation"><span class="id" title="definition">Relation</span></a> (<a id="A:1" class="idref" href="#A:1"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>) := <a class="idref" href="HoTT.Basics.Overture.html#A:1"><span class="id" title="variable">A</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="HoTT.Basics.Overture.html#A:1"><span class="id" title="variable">A</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <a id="Reflexive" class="idref" href="#Reflexive"><span class="id" title="record">Reflexive</span></a> {<a id="A:2" class="idref" href="#A:2"><span class="id" title="binder">A</span></a>} (<a id="R:3" class="idref" href="#R:3"><span class="id" title="binder">R</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#Relation"><span class="id" title="definition">Relation</span></a> <a class="idref" href="HoTT.Basics.Overture.html#A:2"><span class="id" title="variable">A</span></a>) :=<br/>
&nbsp;&nbsp;<a id="reflexivity" class="idref" href="#reflexivity"><span class="id" title="projection">reflexivity</span></a> : <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a id="x:5" class="idref" href="#x:5"><span class="id" title="binder">x</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:2"><span class="id" title="variable">A</span></a><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">,</span></a> <a class="idref" href="HoTT.Basics.Overture.html#R:3"><span class="id" title="variable">R</span></a> <a class="idref" href="HoTT.Basics.Overture.html#x:5"><span class="id" title="variable">x</span></a> <a class="idref" href="HoTT.Basics.Overture.html#x:5"><span class="id" title="variable">x</span></a>.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#reflexivity"><span class="id" title="definition">reflexivity</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">R</span>} <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <a id="Symmetric" class="idref" href="#Symmetric"><span class="id" title="record">Symmetric</span></a> {<a id="A:7" class="idref" href="#A:7"><span class="id" title="binder">A</span></a>} (<a id="R:8" class="idref" href="#R:8"><span class="id" title="binder">R</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#Relation"><span class="id" title="definition">Relation</span></a> <a class="idref" href="HoTT.Basics.Overture.html#A:7"><span class="id" title="variable">A</span></a>) :=<br/>
&nbsp;&nbsp;<a id="symmetry" class="idref" href="#symmetry"><span class="id" title="projection">symmetry</span></a> : <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a id="x:10" class="idref" href="#x:10"><span class="id" title="binder">x</span></a> <a id="y:11" class="idref" href="#y:11"><span class="id" title="binder">y</span></a><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">,</span></a> <a class="idref" href="HoTT.Basics.Overture.html#R:8"><span class="id" title="variable">R</span></a> <a class="idref" href="HoTT.Basics.Overture.html#x:10"><span class="id" title="variable">x</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:11"><span class="id" title="variable">y</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="HoTT.Basics.Overture.html#R:8"><span class="id" title="variable">R</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:11"><span class="id" title="variable">y</span></a> <a class="idref" href="HoTT.Basics.Overture.html#x:10"><span class="id" title="variable">x</span></a>.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#symmetry"><span class="id" title="definition">symmetry</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">R</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>}.<br/>

<br/>
<span class="id" title="keyword">Class</span> <a id="Transitive" class="idref" href="#Transitive"><span class="id" title="record">Transitive</span></a> {<a id="A:13" class="idref" href="#A:13"><span class="id" title="binder">A</span></a>} (<a id="R:14" class="idref" href="#R:14"><span class="id" title="binder">R</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#Relation"><span class="id" title="definition">Relation</span></a> <a class="idref" href="HoTT.Basics.Overture.html#A:13"><span class="id" title="variable">A</span></a>) :=<br/>
&nbsp;&nbsp;<a id="transitivity" class="idref" href="#transitivity"><span class="id" title="projection">transitivity</span></a> : <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a id="x:16" class="idref" href="#x:16"><span class="id" title="binder">x</span></a> <a id="y:17" class="idref" href="#y:17"><span class="id" title="binder">y</span></a> <a id="z:18" class="idref" href="#z:18"><span class="id" title="binder">z</span></a><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">,</span></a> <a class="idref" href="HoTT.Basics.Overture.html#R:14"><span class="id" title="variable">R</span></a> <a class="idref" href="HoTT.Basics.Overture.html#x:16"><span class="id" title="variable">x</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:17"><span class="id" title="variable">y</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="HoTT.Basics.Overture.html#R:14"><span class="id" title="variable">R</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:17"><span class="id" title="variable">y</span></a> <a class="idref" href="HoTT.Basics.Overture.html#z:18"><span class="id" title="variable">z</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="HoTT.Basics.Overture.html#R:14"><span class="id" title="variable">R</span></a> <a class="idref" href="HoTT.Basics.Overture.html#x:16"><span class="id" title="variable">x</span></a> <a class="idref" href="HoTT.Basics.Overture.html#z:18"><span class="id" title="variable">z</span></a>.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#transitivity"><span class="id" title="definition">transitivity</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">R</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>}.<br/>

<br/>
</div>

<div class="doc">
A <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#PreOrder"><span class="id" title="record">PreOrder</span></a></span> is both Reflexive and Transitive. 
</div>
<div class="code">
<span class="id" title="keyword">Class</span> <a id="PreOrder" class="idref" href="#PreOrder"><span class="id" title="record">PreOrder</span></a> {<a id="A:20" class="idref" href="#A:20"><span class="id" title="binder">A</span></a>} (<a id="R:21" class="idref" href="#R:21"><span class="id" title="binder">R</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#Relation"><span class="id" title="definition">Relation</span></a> <a class="idref" href="HoTT.Basics.Overture.html#A:20"><span class="id" title="variable">A</span></a>) :=<br/>
&nbsp;&nbsp;{ <a id="PreOrder_Reflexive" class="idref" href="#PreOrder_Reflexive"><span class="id" title="projection">PreOrder_Reflexive</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#Reflexive"><span class="id" title="class">Reflexive</span></a> <a class="idref" href="HoTT.Basics.Overture.html#R:21"><span class="id" title="variable">R</span></a> | 2 ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="PreOrder_Transitive" class="idref" href="#PreOrder_Transitive"><span class="id" title="projection">PreOrder_Transitive</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#Transitive"><span class="id" title="class">Transitive</span></a> <a class="idref" href="HoTT.Basics.Overture.html#R:21"><span class="id" title="variable">R</span></a> | 2 }.<br/>

<br/>
<span class="id" title="keyword">Global</span> <span class="id" title="var">Existing</span> <span class="id" title="keyword">Instance</span> <span class="id" title="var">PreOrder_Reflexive</span>.<br/>
<span class="id" title="keyword">Global</span> <span class="id" title="var">Existing</span> <span class="id" title="keyword">Instance</span> <span class="id" title="var">PreOrder_Transitive</span>.<br/>

<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#reflexivity"><span class="id" title="definition">reflexivity</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">R</span> <span class="id" title="var">_</span>} / <span class="id" title="var">_</span>.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#symmetry"><span class="id" title="definition">symmetry</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">R</span> <span class="id" title="var">_</span>} / <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#transitivity"><span class="id" title="definition">transitivity</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">R</span> <span class="id" title="var">_</span>} / {<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>} <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>

<br/>
</div>

<div class="doc">
Above, we have made <span class="inlinecode"><span class="id" title="tactic">reflexivity</span></span>, <span class="inlinecode"><span class="id" title="tactic">symmetry</span></span>, and <span class="inlinecode"><span class="id" title="tactic">transitivity</span></span> reduce under <span class="inlinecode"><span class="id" title="var">cbn</span></span>/<span class="inlinecode"><span class="id" title="tactic">simpl</span></span> to their underlying instances.  This allows the tactics to build proof terms referencing, e.g., <span class="inlinecode"><a class="idref" href="HoTT.Tactics.RewriteModuloAssociativity.html#examples.concat"><span class="id" title="section">concat</span></a></span>.  We use <span class="inlinecode"><span class="id" title="tactic">change</span></span> after the fact to make sure that we didn't <span class="inlinecode"><span class="id" title="var">cbn</span></span> away the original form of the relation.

<div class="paragraph"> </div>

    If we want to remove the use of <span class="inlinecode"><span class="id" title="var">cbn</span></span>, we can play tricks with <span class="inlinecode"><span class="id" title="keyword">Module</span></span> <span class="inlinecode"><span class="id" title="keyword">Type</span></span>s and <span class="inlinecode"><span class="id" title="keyword">Module</span></span>s to declare <span class="inlinecode"><a class="idref" href="HoTT.Categories.ProductLaws.html#Law1.inverse"><span class="id" title="definition">inverse</span></a></span> directly as an instance of <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#Symmetric"><span class="id" title="record">Symmetric</span></a></span> without changing its type.  Then we can simply <span class="inlinecode"><span class="id" title="tactic">unfold</span></span> <span class="inlinecode"><span class="id" title="tactic">symmetry</span></span>.  See the comments around the definition of <span class="inlinecode"><a class="idref" href="HoTT.Categories.ProductLaws.html#Law1.inverse"><span class="id" title="definition">inverse</span></a></span>. 
<div class="paragraph"> </div>

 Overwrite <span class="inlinecode"><span class="id" title="tactic">reflexivity</span></span> so that we use our version of <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#Reflexive"><span class="id" title="record">Reflexive</span></a></span> rather than having the tactic look for it in the standard library.  We make use of the built-in reflexivity to handle, e.g., single-constructor inductives. 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="tactic">reflexivity</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">Coq.Init.Notations.reflexivity</span><br/>
&nbsp;&nbsp;|| (<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">R</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> |- ?<span class="id" title="var">R</span> ?<span class="id" title="var">x</span> ?<span class="id" title="var">y</span> ⇒ <span class="id" title="keyword">constr</span>:(<span class="id" title="var">R</span>) <span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">pre_proof_term_head</span> := <span class="id" title="keyword">constr</span>:(@<a class="idref" href="HoTT.Basics.Overture.html#reflexivity"><span class="id" title="definition">reflexivity</span></a> <span class="id" title="var">_</span> <span class="id" title="var">R</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">proof_term_head</span> := (<span class="id" title="tactic">eval</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">pre_proof_term_head</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">proof_term_head</span> : <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a id="x:25" class="idref" href="#x:25"><span class="id" title="binder">x</span></a><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">,</span></a> <span class="id" title="var">R</span> <a class="idref" href="HoTT.Basics.Overture.html#x:25"><span class="id" title="variable">x</span></a> <a class="idref" href="HoTT.Basics.Overture.html#x:25"><span class="id" title="variable">x</span></a>)).<br/>

<br/>
</div>

<div class="doc">
Even if we weren't using <span class="inlinecode"><span class="id" title="var">cbn</span></span>, we would have to redefine symmetry, since the built-in Coq version is sometimes too smart for its own good, and will occasionally fail when it should not. 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="tactic">symmetry</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">R</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> |- ?<span class="id" title="var">R</span> ?<span class="id" title="var">x</span> ?<span class="id" title="var">y</span> ⇒ <span class="id" title="keyword">constr</span>:(<span class="id" title="var">R</span>) <span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">x</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> |- ?<span class="id" title="var">R</span> ?<span class="id" title="var">x</span> ?<span class="id" title="var">y</span> ⇒ <span class="id" title="keyword">constr</span>:(<span class="id" title="var">x</span>) <span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">y</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> |- ?<span class="id" title="var">R</span> ?<span class="id" title="var">x</span> ?<span class="id" title="var">y</span> ⇒ <span class="id" title="keyword">constr</span>:(<span class="id" title="var">y</span>) <span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">pre_proof_term_head</span> := <span class="id" title="keyword">constr</span>:(@<a class="idref" href="HoTT.Basics.Overture.html#symmetry"><span class="id" title="definition">symmetry</span></a> <span class="id" title="var">_</span> <span class="id" title="var">R</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">proof_term_head</span> := (<span class="id" title="tactic">eval</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">pre_proof_term_head</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">proof_term_head</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span> <span class="id" title="var">_</span>); <span class="id" title="tactic">change</span> (<span class="id" title="var">R</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span>).<br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "etransitivity" <span class="id" title="var">open_constr</span>(<span class="id" title="var">y</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">R</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> |- ?<span class="id" title="var">R</span> ?<span class="id" title="var">x</span> ?<span class="id" title="var">z</span> ⇒ <span class="id" title="keyword">constr</span>:(<span class="id" title="var">R</span>) <span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">x</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> |- ?<span class="id" title="var">R</span> ?<span class="id" title="var">x</span> ?<span class="id" title="var">z</span> ⇒ <span class="id" title="keyword">constr</span>:(<span class="id" title="var">x</span>) <span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">z</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> |- ?<span class="id" title="var">R</span> ?<span class="id" title="var">x</span> ?<span class="id" title="var">z</span> ⇒ <span class="id" title="keyword">constr</span>:(<span class="id" title="var">z</span>) <span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">pre_proof_term_head</span> := <span class="id" title="keyword">constr</span>:(@<a class="idref" href="HoTT.Basics.Overture.html#transitivity"><span class="id" title="definition">transitivity</span></a> <span class="id" title="var">_</span> <span class="id" title="var">R</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">proof_term_head</span> := (<span class="id" title="tactic">eval</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">pre_proof_term_head</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">proof_term_head</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>); [ <span class="id" title="tactic">change</span> (<span class="id" title="var">R</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) | <span class="id" title="tactic">change</span> (<span class="id" title="var">R</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>) ].<br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "etransitivity" := <span class="id" title="var">etransitivity</span> <span class="id" title="var">_</span>.<br/>

<br/>
</div>

<div class="doc">
We redefine <span class="inlinecode"><span class="id" title="tactic">transitivity</span></span> to work without needing to include <span class="inlinecode"><span class="id" title="var">Setoid</span></span> or be using Leibniz equality, and to give proofs that unfold to <span class="inlinecode"><a class="idref" href="HoTT.Tactics.RewriteModuloAssociativity.html#examples.concat"><span class="id" title="section">concat</span></a></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="tactic">transitivity</span> <span class="id" title="var">x</span> := <span class="id" title="var">etransitivity</span> <span class="id" title="var">x</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab21"></a><h2 class="section">Basic definitions</h2>

<div class="paragraph"> </div>

 Define an alias for <span class="inlinecode"><span class="id" title="keyword">Set</span></span>, which is really <span class="inlinecode"><a class="idref" href="HoTT.Utf8.html#c9783e3466e3b54f3b2fcff61ab25c0d"><span class="id" title="abbreviation">Type₀</span></a></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Notation</span> <a id="Type0" class="idref" href="#Type0"><span class="id" title="abbreviation">Type0</span></a> := <span class="id" title="keyword">Set</span>.<br/>

<br/>
</div>

<div class="doc">
Define <span class="inlinecode"><span class="id" title="var">Type₁</span></span> (really, <span class="inlinecode"><span class="id" title="var">Type_i</span></span> for any <span class="inlinecode"><a class="idref" href="HoTT.Classes.theory.ua_second_isomorphism.html#i"><span class="id" title="abbreviation">i</span></a></span> <span class="inlinecode">&gt;</span> <span class="inlinecode">0</span>) so that we can enforce having universes that are not <span class="inlinecode"><span class="id" title="keyword">Set</span></span>.  In trunk, universes will not be unified with <span class="inlinecode"><span class="id" title="keyword">Set</span></span> in most places, so we want to never use <span class="inlinecode"><span class="id" title="keyword">Set</span></span> at all. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="Type1" class="idref" href="#Type1"><span class="id" title="definition">Type1@</span></a>{<span class="id" title="var">i</span>} := <span class="id" title="keyword">Eval</span> <span class="id" title="tactic">hnf</span> <span class="id" title="tactic">in</span> <span class="id" title="keyword">let</span> <a id="gt:26" class="idref" href="#gt:26"><span class="id" title="binder">gt</span></a> := (<span class="id" title="keyword">Set</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}) <span class="id" title="tactic">in</span> <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#Type1"><span class="id" title="definition">Type1</span></a> / .<br/>
<span class="id" title="keyword">Identity</span> <span class="id" title="keyword">Coercion</span> <span class="id" title="var">unfold_Type1</span> : <span class="id" title="var">Type1</span> &gt;-&gt; <span class="id" title="var">Sortclass</span>.<br/>

<br/>
</div>

<div class="doc">
We also define "the next couple of universes", which are actually an arbitrary universe with another one or two strictly below it.  Note when giving universe annotations to these that their universe parameters appear in order of *decreasing* size. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="Type2" class="idref" href="#Type2"><span class="id" title="definition">Type2@</span></a>{<span class="id" title="var">i</span> <span class="id" title="var">j</span>} := <span class="id" title="keyword">Eval</span> <span class="id" title="tactic">hnf</span> <span class="id" title="tactic">in</span> <span class="id" title="keyword">let</span> <a id="gt:27" class="idref" href="#gt:27"><span class="id" title="binder">gt</span></a> := (<a class="idref" href="HoTT.Basics.Overture.html#Type1"><span class="id" title="definition">Type1@</span></a>{<span class="id" title="var">j</span>} : <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}) <span class="id" title="tactic">in</span> <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#Type2"><span class="id" title="definition">Type2</span></a> / .<br/>
<span class="id" title="keyword">Identity</span> <span class="id" title="keyword">Coercion</span> <span class="id" title="var">unfold_Type2</span> : <span class="id" title="var">Type2</span> &gt;-&gt; <span class="id" title="var">Sortclass</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="Type3" class="idref" href="#Type3"><span class="id" title="definition">Type3@</span></a>{<span class="id" title="var">i</span> <span class="id" title="var">j</span> <span class="id" title="var">k</span>} := <span class="id" title="keyword">Eval</span> <span class="id" title="tactic">hnf</span> <span class="id" title="tactic">in</span> <span class="id" title="keyword">let</span> <a id="gt:28" class="idref" href="#gt:28"><span class="id" title="binder">gt</span></a> := (<a class="idref" href="HoTT.Basics.Overture.html#Type2"><span class="id" title="definition">Type2@</span></a>{<span class="id" title="var">j</span> <span class="id" title="var">k</span>} : <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}) <span class="id" title="tactic">in</span> <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#Type3"><span class="id" title="definition">Type3</span></a> / .<br/>
<span class="id" title="keyword">Identity</span> <span class="id" title="keyword">Coercion</span> <span class="id" title="var">unfold_Type3</span> : <span class="id" title="var">Type3</span> &gt;-&gt; <span class="id" title="var">Sortclass</span>.<br/>

<br/>
</div>

<div class="doc">
Along the same lines, here is a universe with an extra universe parameter that's less than or equal to it in size.  The <span class="inlinecode"><a class="idref" href="Coq.Init.Peano.html#gt"><span class="id" title="definition">gt</span></a></span> isn't necessary to force the larger universe to be bigger than <span class="inlinecode"><span class="id" title="keyword">Set</span></span> (since we refer to the smaller universe by <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#Type1"><span class="id" title="definition">Type1</span></a></span> which is already bigger than <span class="inlinecode"><span class="id" title="keyword">Set</span></span>), but we include it anyway to make the universe parameters occur again in (now non-strictly) decreasing order. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="Type2le" class="idref" href="#Type2le"><span class="id" title="definition">Type2le@</span></a>{<span class="id" title="var">i</span> <span class="id" title="var">j</span>} := <span class="id" title="keyword">Eval</span> <span class="id" title="tactic">hnf</span> <span class="id" title="tactic">in</span> <span class="id" title="keyword">let</span> <a id="gt:29" class="idref" href="#gt:29"><span class="id" title="binder">gt</span></a> := (<span class="id" title="keyword">Set</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="ge:31" class="idref" href="#ge:31"><span class="id" title="binder">ge</span></a> := ((<span class="id" title="keyword">fun</span> <a id="x:30" class="idref" href="#x:30"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="HoTT.Basics.Overture.html#x:30"><span class="id" title="variable">x</span></a>) : <a class="idref" href="HoTT.Basics.Overture.html#Type1"><span class="id" title="definition">Type1@</span></a>{<span class="id" title="var">j</span>} <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}) <span class="id" title="tactic">in</span> <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#Type2le"><span class="id" title="definition">Type2le</span></a> / .<br/>
<span class="id" title="keyword">Identity</span> <span class="id" title="keyword">Coercion</span> <span class="id" title="var">unfold_Type2le</span> : <span class="id" title="var">Type2le</span> &gt;-&gt; <span class="id" title="var">Sortclass</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="Type3le" class="idref" href="#Type3le"><span class="id" title="definition">Type3le@</span></a>{<span class="id" title="var">i</span> <span class="id" title="var">j</span> <span class="id" title="var">k</span>} := <span class="id" title="keyword">Eval</span> <span class="id" title="tactic">hnf</span> <span class="id" title="tactic">in</span> <span class="id" title="keyword">let</span> <a id="gt:32" class="idref" href="#gt:32"><span class="id" title="binder">gt</span></a> := (<span class="id" title="keyword">Set</span> : <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="ge:34" class="idref" href="#ge:34"><span class="id" title="binder">ge</span></a> := ((<span class="id" title="keyword">fun</span> <a id="x:33" class="idref" href="#x:33"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="HoTT.Basics.Overture.html#x:33"><span class="id" title="variable">x</span></a>) : <a class="idref" href="HoTT.Basics.Overture.html#Type2le"><span class="id" title="definition">Type2le@</span></a>{<span class="id" title="var">j</span> <span class="id" title="var">k</span>} <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}) <span class="id" title="tactic">in</span> <span class="id" title="var">Type@</span>{<span class="id" title="var">i</span>}.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#Type3le"><span class="id" title="definition">Type3le</span></a> / .<br/>
<span class="id" title="keyword">Identity</span> <span class="id" title="keyword">Coercion</span> <span class="id" title="var">unfold_Type3le</span> : <span class="id" title="var">Type3le</span> &gt;-&gt; <span class="id" title="var">Sortclass</span>.<br/>

<br/>
</div>

<div class="doc">
We make the identity map a notation so we do not have to unfold it,
    or complicate matters with its type. 
</div>
<div class="code">
<span class="id" title="keyword">Notation</span> <a id="idmap" class="idref" href="#idmap"><span class="id" title="abbreviation">idmap</span></a> := (<span class="id" title="keyword">fun</span> <a id="x:35" class="idref" href="#x:35"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="HoTT.Basics.Overture.html#x:35"><span class="id" title="variable">x</span></a>).<br/>

<br/>
</div>

<div class="doc">
We define various scopes and open them in the order we expect to use them. 
</div>
<div class="code">
<span class="id" title="var">Declare</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">equiv_scope</span>.<br/>
<span class="id" title="var">Declare</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">function_scope</span>.<br/>
<span class="id" title="var">Declare</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">path_scope</span>.<br/>
<span class="id" title="var">Declare</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">fibration_scope</span>.<br/>
<span class="id" title="var">Declare</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">trunc_scope</span>.<br/>
<span class="id" title="var">Declare</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">long_path_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Delimit</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">equiv_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="var">equiv</span>.<br/>
<span class="id" title="keyword">Delimit</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">function_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="var">function</span>.<br/>
<span class="id" title="keyword">Delimit</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">path_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="var">path</span>.<br/>
<span class="id" title="keyword">Delimit</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">fibration_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="var">fibration</span>.<br/>
<span class="id" title="keyword">Delimit</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">trunc_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="var">trunc</span>.<br/>

<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">trunc_scope</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">equiv_scope</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">path_scope</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">fibration_scope</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">nat_scope</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">function_scope</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">type_scope</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">core_scope</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab22"></a><h3 class="section">Constant functions</h3>

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="const" class="idref" href="#const"><span class="id" title="definition">const</span></a> {<a id="A:36" class="idref" href="#A:36"><span class="id" title="binder">A</span></a> <a id="B:37" class="idref" href="#B:37"><span class="id" title="binder">B</span></a>} (<a id="b:38" class="idref" href="#b:38"><span class="id" title="binder">b</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#B:37"><span class="id" title="variable">B</span></a>) := <span class="id" title="keyword">fun</span> <a id="x:39" class="idref" href="#x:39"><span class="id" title="binder">x</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:36"><span class="id" title="variable">A</span></a> ⇒ <a class="idref" href="HoTT.Basics.Overture.html#b:38"><span class="id" title="variable">b</span></a>.<br/>

<br/>
</div>

<div class="doc">
We define notation for dependent pairs because it is too annoying to write and see <span class="inlinecode"><a class="idref" href="Coq.Init.Specif.html#existT"><span class="id" title="abbreviation">existT</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.DependentProduct.html#dependent_product.P"><span class="id" title="variable">P</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Functor.Attributes.html#fully_faithful_helpers.y"><span class="id" title="variable">y</span></a></span> all the time.  However, we put it in its own scope, because sometimes it is necessary to give the particular dependent type, so we'd like to be able to turn off this notation selectively. 
</div>
<div class="code">
<span class="id" title="keyword">Notation</span> <a id="9302c87983df9fcf813fed38017558ae" class="idref" href="#9302c87983df9fcf813fed38017558ae"><span class="id" title="notation">&quot;</span></a>( x ; y )" := (<a class="idref" href="Coq.Init.Specif.html#existT"><span class="id" title="abbreviation">existT</span></a> <span class="id" title="var">_</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) : <span class="id" title="var">fibration_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="4887cec9c4a6ccb88dc6b18963c35c8f" class="idref" href="#4887cec9c4a6ccb88dc6b18963c35c8f"><span class="id" title="notation">&quot;</span></a>( x ; .. ; y ; z )" := (<a class="idref" href="Coq.Init.Specif.html#existT"><span class="id" title="abbreviation">existT</span></a> <span class="id" title="var">_</span> <span class="id" title="var">x</span> .. (<a class="idref" href="Coq.Init.Specif.html#existT"><span class="id" title="abbreviation">existT</span></a> <span class="id" title="var">_</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>) ..) : <span class="id" title="var">fibration_scope</span>.<br/>
</div>

<div class="doc">
We bind <span class="inlinecode"><span class="id" title="var">fibration_scope</span></span> with <span class="inlinecode"><a class="idref" href="HoTT.Categories.Category.Sigma.Core.html#sigT"><span class="id" title="definition">sigT</span></a></span> so that we are automatically in <span class="inlinecode"><span class="id" title="var">fibration_scope</span></span> when we are passing an argument of type <span class="inlinecode"><a class="idref" href="HoTT.Categories.Category.Sigma.Core.html#sigT"><span class="id" title="definition">sigT</span></a></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Bind</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">fibration_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="var">sigT</span>.<br/>

<br/>
</div>

<div class="doc">
We have unified <span class="inlinecode"><a class="idref" href="HoTT.Categories.Category.Sigma.Core.html#sig"><span class="id" title="definition">sig</span></a></span> and <span class="inlinecode"><a class="idref" href="HoTT.Categories.Category.Sigma.Core.html#sigT"><span class="id" title="definition">sigT</span></a></span> of the standard Coq, and so we introduce a new notation to not annoy newcomers with the <span class="inlinecode"><a class="idref" href="HoTT.Categories.LaxComma.CoreLaws.html#LaxCommaCategory.lax_comma_category_parts.T"><span class="id" title="variable">T</span></a></span> in <span class="inlinecode"><a class="idref" href="Coq.Init.Specif.html#projT1"><span class="id" title="abbreviation">projT1</span></a></span> and <span class="inlinecode"><a class="idref" href="Coq.Init.Specif.html#projT2"><span class="id" title="abbreviation">projT2</span></a></span> nor the <span class="inlinecode"><span class="id" title="var">_sig</span></span> in <span class="inlinecode"><a class="idref" href="HoTT.Categories.Category.Sigma.Core.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a></span> and <span class="inlinecode"><a class="idref" href="Coq.Init.Specif.html#proj2_sig"><span class="id" title="projection">proj2_sig</span></a></span>, and to not confuse Coq veterans by stealing <span class="inlinecode"><span class="id" title="var">proj1</span></span> and <span class="inlinecode"><span class="id" title="var">proj2</span></span>, which Coq uses for <span class="inlinecode"><a class="idref" href="Coq.Init.Datatypes.html#and"><span class="id" title="abbreviation">and</span></a></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Notation</span> <a id="pr1" class="idref" href="#pr1"><span class="id" title="abbreviation">pr1</span></a> := <a class="idref" href="Coq.Init.Specif.html#projT1"><span class="id" title="abbreviation">projT1</span></a>.<br/>
<span class="id" title="keyword">Notation</span> <a id="pr2" class="idref" href="#pr2"><span class="id" title="abbreviation">pr2</span></a> := <a class="idref" href="Coq.Init.Specif.html#projT2"><span class="id" title="abbreviation">projT2</span></a>.<br/>

<br/>
</div>

<div class="doc">
The following notation is very convenient, although it unfortunately clashes with Proof General's "electric period".  We have added <span class="inlinecode"><span class="id" title="var">format</span></span> specifiers in Notations.v so that it will display without an extra space, as <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a>.1</span> rather than as <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> <span class="inlinecode">.1</span>. 
</div>
<div class="code">
<span class="id" title="keyword">Notation</span> <a id="::fibration_scope:x_'.1'" class="idref" href="#::fibration_scope:x_'.1'"><span class="id" title="notation">&quot;</span></a>x .1" := (<a class="idref" href="HoTT.Basics.Overture.html#pr1"><span class="id" title="abbreviation">pr1</span></a> <span class="id" title="var">x</span>) : <span class="id" title="var">fibration_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="::fibration_scope:x_'.2'" class="idref" href="#::fibration_scope:x_'.2'"><span class="id" title="notation">&quot;</span></a>x .2" := (<a class="idref" href="HoTT.Basics.Overture.html#pr2"><span class="id" title="abbreviation">pr2</span></a> <span class="id" title="var">x</span>) : <span class="id" title="var">fibration_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="uncurry" class="idref" href="#uncurry"><span class="id" title="definition">uncurry</span></a> {<a id="A:40" class="idref" href="#A:40"><span class="id" title="binder">A</span></a> <a id="B:41" class="idref" href="#B:41"><span class="id" title="binder">B</span></a> <a id="C:42" class="idref" href="#C:42"><span class="id" title="binder">C</span></a>} (<a id="f:43" class="idref" href="#f:43"><span class="id" title="binder">f</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:40"><span class="id" title="variable">A</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="HoTT.Basics.Overture.html#B:41"><span class="id" title="variable">B</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="HoTT.Basics.Overture.html#C:42"><span class="id" title="variable">C</span></a>) (<a id="p:44" class="idref" href="#p:44"><span class="id" title="binder">p</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:40"><span class="id" title="variable">A</span></a> <a class="idref" href="Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="HoTT.Basics.Overture.html#B:41"><span class="id" title="variable">B</span></a>) : <a class="idref" href="HoTT.Basics.Overture.html#C:42"><span class="id" title="variable">C</span></a> := <a class="idref" href="HoTT.Basics.Overture.html#f:43"><span class="id" title="variable">f</span></a> (<a class="idref" href="Coq.Init.Datatypes.html#fst"><span class="id" title="projection">fst</span></a> <a class="idref" href="HoTT.Basics.Overture.html#p:44"><span class="id" title="variable">p</span></a>) (<a class="idref" href="Coq.Init.Datatypes.html#snd"><span class="id" title="projection">snd</span></a> <a class="idref" href="HoTT.Basics.Overture.html#p:44"><span class="id" title="variable">p</span></a>).<br/>

<br/>
</div>

<div class="doc">
Composition of functions. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Notation</span> <a id="compose" class="idref" href="#compose"><span class="id" title="abbreviation">compose</span></a> := (<span class="id" title="keyword">fun</span> <a id="g:45" class="idref" href="#g:45"><span class="id" title="binder">g</span></a> <a id="f:46" class="idref" href="#f:46"><span class="id" title="binder">f</span></a> <a id="x:47" class="idref" href="#x:47"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="HoTT.Basics.Overture.html#g:45"><span class="id" title="variable">g</span></a> (<a class="idref" href="HoTT.Basics.Overture.html#f:46"><span class="id" title="variable">f</span></a> <a class="idref" href="HoTT.Basics.Overture.html#x:47"><span class="id" title="variable">x</span></a>)).<br/>

<br/>
</div>

<div class="doc">
We put the following notation in a scope because leaving it unscoped causes it to override identical notations in other scopes.  It's convenient to use the same notation for, e.g., function composition, morphism composition in a category, and functor composition, and let Coq automatically infer which one we mean by scopes.  We can't do this if this notation isn't scoped.  Unfortunately, Coq doesn't have a built-in <span class="inlinecode"><span class="id" title="var">function_scope</span></span> like <span class="inlinecode"><span class="id" title="var">type_scope</span></span>; <span class="inlinecode"><span class="id" title="var">type_scope</span></span> is automatically opened wherever Coq is expecting a <span class="inlinecode"><span class="id" title="keyword">Sort</span></span>, and it would be nice if <span class="inlinecode"><span class="id" title="var">function_scope</span></span> were automatically opened whenever Coq expects a thing of type <span class="inlinecode"><span class="id" title="keyword">∀</span></span> <span class="inlinecode"><span class="id" title="var">_</span>,</span> <span class="inlinecode"><span class="id" title="var">_</span></span> or <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">_</span></span>.  To work around this, we open <span class="inlinecode"><span class="id" title="var">function_scope</span></span> globally. 
<div class="paragraph"> </div>

 We allow writing <span class="inlinecode">(<a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode"><span class="id" title="var">o</span></span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.g"><span class="id" title="variable">g</span></a>)%<a class="idref" href="HoTT.HIT.V.html#function"><span class="id" title="lemma">function</span></a></span> to force <span class="inlinecode"><span class="id" title="var">function_scope</span></span> over, e.g., <span class="inlinecode"><span class="id" title="var">morphism_scope</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Notation</span> <a id="::function_scope:x_'o'_x" class="idref" href="#::function_scope:x_'o'_x"><span class="id" title="notation">&quot;</span></a>g 'o' f" := (<a class="idref" href="HoTT.Basics.Overture.html#compose"><span class="id" title="abbreviation">compose</span></a> <span class="id" title="var">g</span>%<span class="id" title="var">function</span> <span class="id" title="var">f</span>%<span class="id" title="var">function</span>) : <span class="id" title="var">function_scope</span>.<br/>

<br/>
</div>

<div class="doc">
This definition helps guide typeclass inference. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="Compose" class="idref" href="#Compose"><span class="id" title="definition">Compose</span></a> {<a id="A:48" class="idref" href="#A:48"><span class="id" title="binder">A</span></a> <a id="B:49" class="idref" href="#B:49"><span class="id" title="binder">B</span></a> <a id="C:50" class="idref" href="#C:50"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>} (<a id="g:51" class="idref" href="#g:51"><span class="id" title="binder">g</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#B:49"><span class="id" title="variable">B</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="HoTT.Basics.Overture.html#C:50"><span class="id" title="variable">C</span></a>) (<a id="f:52" class="idref" href="#f:52"><span class="id" title="binder">f</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:48"><span class="id" title="variable">A</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="HoTT.Basics.Overture.html#B:49"><span class="id" title="variable">B</span></a>) : <a class="idref" href="HoTT.Basics.Overture.html#A:48"><span class="id" title="variable">A</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="HoTT.Basics.Overture.html#C:50"><span class="id" title="variable">C</span></a> := <a class="idref" href="HoTT.Basics.Overture.html#compose"><span class="id" title="abbreviation">compose</span></a> <a class="idref" href="HoTT.Basics.Overture.html#g:51"><span class="id" title="variable">g</span></a> <a class="idref" href="HoTT.Basics.Overture.html#f:52"><span class="id" title="variable">f</span></a>.<br/>

<br/>
</div>

<div class="doc">
Composition of logical equivalences 
</div>
<div class="code">
<span class="id" title="keyword">Instance</span> <a id="iff_compose" class="idref" href="#iff_compose"><span class="id" title="instance">iff_compose</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#Transitive"><span class="id" title="class">Transitive</span></a> <a class="idref" href="Coq.Init.Datatypes.html#iff"><span class="id" title="definition">iff</span></a> | 1<br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">fun</span> <a id="A:53" class="idref" href="#A:53"><span class="id" title="binder">A</span></a> <a id="B:54" class="idref" href="#B:54"><span class="id" title="binder">B</span></a> <a id="C:55" class="idref" href="#C:55"><span class="id" title="binder">C</span></a> <a id="f:56" class="idref" href="#f:56"><span class="id" title="binder">f</span></a> <a id="g:57" class="idref" href="#g:57"><span class="id" title="binder">g</span></a> ⇒ <a class="idref" href="Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Coq.Init.Datatypes.html#fst"><span class="id" title="projection">fst</span></a> <a class="idref" href="HoTT.Basics.Overture.html#g:57"><span class="id" title="variable">g</span></a> <a class="idref" href="HoTT.Basics.Overture.html#::function_scope:x_'o'_x"><span class="id" title="notation">o</span></a> <a class="idref" href="Coq.Init.Datatypes.html#fst"><span class="id" title="projection">fst</span></a> <a class="idref" href="HoTT.Basics.Overture.html#f:56"><span class="id" title="variable">f</span></a> <a class="idref" href="Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Coq.Init.Datatypes.html#snd"><span class="id" title="projection">snd</span></a> <a class="idref" href="HoTT.Basics.Overture.html#f:56"><span class="id" title="variable">f</span></a> <a class="idref" href="HoTT.Basics.Overture.html#::function_scope:x_'o'_x"><span class="id" title="notation">o</span></a> <a class="idref" href="Coq.Init.Datatypes.html#snd"><span class="id" title="projection">snd</span></a> <a class="idref" href="HoTT.Basics.Overture.html#g:57"><span class="id" title="variable">g</span></a><a class="idref" href="Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#iff_compose"><span class="id" title="instance">iff_compose</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>} <span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="tactic">rename</span>.<br/>

<br/>
</div>

<div class="doc">
While we're at it, inverses of logical equivalences 
</div>
<div class="code">
<span class="id" title="keyword">Instance</span> <a id="iff_inverse" class="idref" href="#iff_inverse"><span class="id" title="instance">iff_inverse</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#Symmetric"><span class="id" title="class">Symmetric</span></a> <a class="idref" href="Coq.Init.Datatypes.html#iff"><span class="id" title="definition">iff</span></a> | 1<br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">fun</span> <a id="A:58" class="idref" href="#A:58"><span class="id" title="binder">A</span></a> <a id="B:59" class="idref" href="#B:59"><span class="id" title="binder">B</span></a> <a id="f:60" class="idref" href="#f:60"><span class="id" title="binder">f</span></a> ⇒ <a class="idref" href="Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Coq.Init.Datatypes.html#snd"><span class="id" title="projection">snd</span></a> <a class="idref" href="HoTT.Basics.Overture.html#f:60"><span class="id" title="variable">f</span></a> <a class="idref" href="Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Coq.Init.Datatypes.html#fst"><span class="id" title="projection">fst</span></a> <a class="idref" href="HoTT.Basics.Overture.html#f:60"><span class="id" title="variable">f</span></a><a class="idref" href="Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#iff_inverse"><span class="id" title="instance">iff_inverse</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} <span class="id" title="var">f</span> : <span class="id" title="tactic">rename</span>.<br/>

<br/>
</div>

<div class="doc">
And reflexivity of them 
</div>
<div class="code">
<span class="id" title="keyword">Instance</span> <a id="iff_reflexive" class="idref" href="#iff_reflexive"><span class="id" title="instance">iff_reflexive</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#Reflexive"><span class="id" title="class">Reflexive</span></a> <a class="idref" href="Coq.Init.Datatypes.html#iff"><span class="id" title="definition">iff</span></a> | 1<br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">fun</span> <a id="A:61" class="idref" href="#A:61"><span class="id" title="binder">A</span></a> ⇒ <a class="idref" href="Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="HoTT.Basics.Overture.html#idmap"><span class="id" title="abbreviation">idmap</span></a> <a class="idref" href="Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="HoTT.Basics.Overture.html#idmap"><span class="id" title="abbreviation">idmap</span></a><a class="idref" href="Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
</div>

<div class="doc">
Dependent composition of functions. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="composeD" class="idref" href="#composeD"><span class="id" title="definition">composeD</span></a> {<a id="A:62" class="idref" href="#A:62"><span class="id" title="binder">A</span></a> <a id="B:63" class="idref" href="#B:63"><span class="id" title="binder">B</span></a> <a id="C:64" class="idref" href="#C:64"><span class="id" title="binder">C</span></a>} (<a id="g:66" class="idref" href="#g:66"><span class="id" title="binder">g</span></a> : <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a id="b:65" class="idref" href="#b:65"><span class="id" title="binder">b</span></a><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">,</span></a> <a class="idref" href="HoTT.Basics.Overture.html#C:64"><span class="id" title="variable">C</span></a> <a class="idref" href="HoTT.Basics.Overture.html#b:65"><span class="id" title="variable">b</span></a>) (<a id="f:67" class="idref" href="#f:67"><span class="id" title="binder">f</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:62"><span class="id" title="variable">A</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="HoTT.Basics.Overture.html#B:63"><span class="id" title="variable">B</span></a>) := <span class="id" title="keyword">fun</span> <a id="x:68" class="idref" href="#x:68"><span class="id" title="binder">x</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:62"><span class="id" title="variable">A</span></a> ⇒ <a class="idref" href="HoTT.Basics.Overture.html#g:66"><span class="id" title="variable">g</span></a> (<a class="idref" href="HoTT.Basics.Overture.html#f:67"><span class="id" title="variable">f</span></a> <a class="idref" href="HoTT.Basics.Overture.html#x:68"><span class="id" title="variable">x</span></a>).<br/>

<br/>
<span class="id" title="keyword">Global</span> <span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#composeD"><span class="id" title="definition">composeD</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>}%<span class="id" title="var">type_scope</span> (<span class="id" title="var">g</span> <span class="id" title="var">f</span>)%<span class="id" title="var">function_scope</span> <span class="id" title="var">x</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>]<br/>
<span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Unfold</span> <a class="idref" href="HoTT.Basics.Overture.html#composeD"><span class="id" title="definition">composeD</span></a> : <span class="id" title="var">core</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="::function_scope:x_'oD'_x" class="idref" href="#::function_scope:x_'oD'_x"><span class="id" title="notation">&quot;</span></a>g 'oD' f" := (<a class="idref" href="HoTT.Basics.Overture.html#composeD"><span class="id" title="definition">composeD</span></a> <span class="id" title="var">g</span> <span class="id" title="var">f</span>) : <span class="id" title="var">function_scope</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab23"></a><h2 class="section">The groupoid structure of identity types.</h2>

<div class="paragraph"> </div>

 The results in this file are used everywhere else, so we need to be extra careful about how we define and prove things.  We prefer hand-written terms, or at least tactics that allow us to retain clear control over the proof-term produced. 
<div class="paragraph"> </div>

 We define our own identity type, rather than using the one in the Coq standard library, so as to have more control over transitivity, symmetry and inverse.  It seems impossible to change these for the standard eq/identity type (or its Type-valued version) because it breaks various other standard things.  Merely changing notations also doesn't seem to quite work. 
</div>
<div class="code">
<span class="id" title="var">Cumulative</span> <span class="id" title="keyword">Inductive</span> <a id="paths" class="idref" href="#paths"><span class="id" title="inductive">paths</span></a> {<a id="A:69" class="idref" href="#A:69"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} (<a id="a:70" class="idref" href="#a:70"><span class="id" title="binder">a</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:69"><span class="id" title="variable">A</span></a>) : <span class="id" title="var">A</span> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;<a id="idpath" class="idref" href="#idpath"><span class="id" title="constructor">idpath</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#paths:71"><span class="id" title="inductive">paths</span></a> <a class="idref" href="HoTT.Basics.Overture.html#a:70"><span class="id" title="variable">a</span></a> <a class="idref" href="HoTT.Basics.Overture.html#a:70"><span class="id" title="variable">a</span></a>.<br/>

<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#idpath"><span class="id" title="constructor">idpath</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">a</span>} , [<span class="id" title="var">A</span>] <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Scheme</span> <a id="paths_ind" class="idref" href="#paths_ind"><span class="id" title="definition">paths_ind</span></a> := <span class="id" title="keyword">Induction</span> <span class="id" title="keyword">for</span> <a class="idref" href="HoTT.Basics.Overture.html#paths"><span class="id" title="inductive">paths</span></a> <span class="id" title="keyword">Sort</span> <span class="id" title="keyword">Type</span>.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#paths_ind"><span class="id" title="definition">paths_ind</span></a> [<span class="id" title="var">A</span>] <span class="id" title="var">a</span> <span class="id" title="var">P</span> <span class="id" title="var">f</span> <span class="id" title="var">y</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Scheme</span> <a id="paths_rec" class="idref" href="#paths_rec"><span class="id" title="definition">paths_rec</span></a> := <span class="id" title="var">Minimality</span> <span class="id" title="keyword">for</span> <a class="idref" href="HoTT.Basics.Overture.html#paths"><span class="id" title="inductive">paths</span></a> <span class="id" title="keyword">Sort</span> <span class="id" title="keyword">Type</span>.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#paths_rec"><span class="id" title="definition">paths_rec</span></a> [<span class="id" title="var">A</span>] <span class="id" title="var">a</span> <span class="id" title="var">P</span> <span class="id" title="var">f</span> <span class="id" title="var">y</span> <span class="id" title="var">p</span>.<br/>

<br/>
<span class="id" title="var">Register</span> <span class="id" title="var">idpath</span> <span class="id" title="keyword">as</span> <span class="id" title="var">core.identity.refl</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="paths_rect" class="idref" href="#paths_rect"><span class="id" title="definition">paths_rect</span></a> := <a class="idref" href="HoTT.Basics.Overture.html#paths_ind"><span class="id" title="definition">paths_ind</span></a>.<br/>

<br/>
<span class="id" title="var">Register</span> <span class="id" title="var">paths_rect</span> <span class="id" title="keyword">as</span> <span class="id" title="var">core.identity.ind</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="b8b2ebc8e1a8b9aa935c0702efb5dccf" class="idref" href="#b8b2ebc8e1a8b9aa935c0702efb5dccf"><span class="id" title="notation">&quot;</span></a>x = y :&gt; A" := (@<a class="idref" href="HoTT.Basics.Overture.html#paths"><span class="id" title="inductive">paths</span></a> <span class="id" title="var">A</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) : <span class="id" title="var">type_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="6cd0f7b28b6092304087c7049437bb1a" class="idref" href="#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">&quot;</span></a>x = y" := (<span class="id" title="var">x</span> <a class="idref" href="HoTT.Basics.Overture.html#b8b2ebc8e1a8b9aa935c0702efb5dccf"><span class="id" title="notation">=</span></a> <span class="id" title="var">y</span> <a class="idref" href="HoTT.Basics.Overture.html#b8b2ebc8e1a8b9aa935c0702efb5dccf"><span class="id" title="notation">:&gt;</span></a><span class="id" title="var">_</span>) : <span class="id" title="var">type_scope</span>.<br/>

<br/>
</div>

<div class="doc">
Ensure <span class="inlinecode"><span class="id" title="var">internal_paths_rew</span></span> and <span class="inlinecode"><span class="id" title="var">internal_paths_rew_r</span></span> are defined outside sections, so they are not unnecessarily polymorphic. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="paths_rew" class="idref" href="#paths_rew"><span class="id" title="lemma">paths_rew</span></a> <a id="A:73" class="idref" href="#A:73"><span class="id" title="binder">A</span></a> <a id="a:74" class="idref" href="#a:74"><span class="id" title="binder">a</span></a> <a id="y:75" class="idref" href="#y:75"><span class="id" title="binder">y</span></a> <a id="P:76" class="idref" href="#P:76"><span class="id" title="binder">P</span></a> (<a id="X:77" class="idref" href="#X:77"><span class="id" title="binder">X</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#P:76"><span class="id" title="variable">P</span></a> <a class="idref" href="HoTT.Basics.Overture.html#a:74"><span class="id" title="variable">a</span></a>) (<a id="H:78" class="idref" href="#H:78"><span class="id" title="binder">H</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#a:74"><span class="id" title="variable">a</span></a> <a class="idref" href="HoTT.Basics.Overture.html#b8b2ebc8e1a8b9aa935c0702efb5dccf"><span class="id" title="notation">=</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:75"><span class="id" title="variable">y</span></a> <a class="idref" href="HoTT.Basics.Overture.html#b8b2ebc8e1a8b9aa935c0702efb5dccf"><span class="id" title="notation">:&gt;</span></a> <a class="idref" href="HoTT.Basics.Overture.html#A:73"><span class="id" title="variable">A</span></a>) : <a class="idref" href="HoTT.Basics.Overture.html#P:76"><span class="id" title="variable">P</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:75"><span class="id" title="variable">y</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">X</span>. <span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="paths_rew_r" class="idref" href="#paths_rew_r"><span class="id" title="lemma">paths_rew_r</span></a> <a id="A:79" class="idref" href="#A:79"><span class="id" title="binder">A</span></a> <a id="a:80" class="idref" href="#a:80"><span class="id" title="binder">a</span></a> <a id="y:81" class="idref" href="#y:81"><span class="id" title="binder">y</span></a> <a id="P:82" class="idref" href="#P:82"><span class="id" title="binder">P</span></a> (<a id="X:83" class="idref" href="#X:83"><span class="id" title="binder">X</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#P:82"><span class="id" title="variable">P</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:81"><span class="id" title="variable">y</span></a>) (<a id="H:84" class="idref" href="#H:84"><span class="id" title="binder">H</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#a:80"><span class="id" title="variable">a</span></a> <a class="idref" href="HoTT.Basics.Overture.html#b8b2ebc8e1a8b9aa935c0702efb5dccf"><span class="id" title="notation">=</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:81"><span class="id" title="variable">y</span></a> <a class="idref" href="HoTT.Basics.Overture.html#b8b2ebc8e1a8b9aa935c0702efb5dccf"><span class="id" title="notation">:&gt;</span></a> <a class="idref" href="HoTT.Basics.Overture.html#A:79"><span class="id" title="variable">A</span></a>) : <a class="idref" href="HoTT.Basics.Overture.html#P:82"><span class="id" title="variable">P</span></a> <a class="idref" href="HoTT.Basics.Overture.html#a:80"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> → <span class="id" title="var">H</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">X</span>. <span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="var">Register</span> <span class="id" title="var">paths</span> <span class="id" title="keyword">as</span> <span class="id" title="var">core.identity.type</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="reflexive_paths" class="idref" href="#reflexive_paths"><span class="id" title="instance">reflexive_paths</span></a> {<a id="A:85" class="idref" href="#A:85"><span class="id" title="binder">A</span></a>} : <a class="idref" href="HoTT.Basics.Overture.html#Reflexive"><span class="id" title="class">Reflexive</span></a> (@<a class="idref" href="HoTT.Basics.Overture.html#paths"><span class="id" title="inductive">paths</span></a> <a class="idref" href="HoTT.Basics.Overture.html#A:85"><span class="id" title="variable">A</span></a>) | 0 := @<a class="idref" href="HoTT.Basics.Overture.html#idpath"><span class="id" title="constructor">idpath</span></a> <span class="id" title="var">A</span>.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#reflexive_paths"><span class="id" title="instance">reflexive_paths</span></a> / .<br/>

<br/>
</div>

<div class="doc">
Our identity type is the Paulin-Mohring style.  We derive the Martin-Lof eliminator. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="paths_ind'" class="idref" href="#paths_ind'"><span class="id" title="definition">paths_ind'</span></a> {<a id="A:86" class="idref" href="#A:86"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} (<a id="P:89" class="idref" href="#P:89"><span class="id" title="binder">P</span></a> : <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">(</span></a><a id="a:87" class="idref" href="#a:87"><span class="id" title="binder">a</span></a> <a id="b:88" class="idref" href="#b:88"><span class="id" title="binder">b</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:86"><span class="id" title="variable">A</span></a><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">),</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="HoTT.Basics.Overture.html#a:87"><span class="id" title="variable">a</span></a> <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="HoTT.Basics.Overture.html#b:88"><span class="id" title="variable">b</span></a><a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">(</span></a><a id="a:90" class="idref" href="#a:90"><span class="id" title="binder">a</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:86"><span class="id" title="variable">A</span></a><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">),</span></a> <a class="idref" href="HoTT.Basics.Overture.html#P:89"><span class="id" title="variable">P</span></a> <a class="idref" href="HoTT.Basics.Overture.html#a:90"><span class="id" title="variable">a</span></a> <a class="idref" href="HoTT.Basics.Overture.html#a:90"><span class="id" title="variable">a</span></a> <a class="idref" href="HoTT.Basics.Overture.html#idpath"><span class="id" title="constructor">idpath</span></a><a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">(</span></a><a id="a:91" class="idref" href="#a:91"><span class="id" title="binder">a</span></a> <a id="b:92" class="idref" href="#b:92"><span class="id" title="binder">b</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:86"><span class="id" title="variable">A</span></a>) (<a id="p:93" class="idref" href="#p:93"><span class="id" title="binder">p</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#a:91"><span class="id" title="variable">a</span></a> <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="HoTT.Basics.Overture.html#b:92"><span class="id" title="variable">b</span></a><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">),</span></a> <a class="idref" href="HoTT.Basics.Overture.html#P:89"><span class="id" title="variable">P</span></a> <a class="idref" href="HoTT.Basics.Overture.html#a:91"><span class="id" title="variable">a</span></a> <a class="idref" href="HoTT.Basics.Overture.html#b:92"><span class="id" title="variable">b</span></a> <a class="idref" href="HoTT.Basics.Overture.html#p:93"><span class="id" title="variable">p</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span> ? ? [].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
And here's the "right-sided" Paulin-Mohring eliminator. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="paths_ind_r" class="idref" href="#paths_ind_r"><span class="id" title="definition">paths_ind_r</span></a> {<a id="A:94" class="idref" href="#A:94"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} (<a id="a:95" class="idref" href="#a:95"><span class="id" title="binder">a</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:94"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="P:97" class="idref" href="#P:97"><span class="id" title="binder">P</span></a> : <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a id="b:96" class="idref" href="#b:96"><span class="id" title="binder">b</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:94"><span class="id" title="variable">A</span></a><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">,</span></a> <a class="idref" href="HoTT.Basics.Overture.html#b:96"><span class="id" title="variable">b</span></a> <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="HoTT.Basics.Overture.html#a:95"><span class="id" title="variable">a</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="u:98" class="idref" href="#u:98"><span class="id" title="binder">u</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#P:97"><span class="id" title="variable">P</span></a> <a class="idref" href="HoTT.Basics.Overture.html#a:95"><span class="id" title="variable">a</span></a> <a class="idref" href="HoTT.Basics.Overture.html#idpath"><span class="id" title="constructor">idpath</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">(</span></a><a id="y:99" class="idref" href="#y:99"><span class="id" title="binder">y</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:94"><span class="id" title="variable">A</span></a>) (<a id="p:100" class="idref" href="#p:100"><span class="id" title="binder">p</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#y:99"><span class="id" title="variable">y</span></a> <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="HoTT.Basics.Overture.html#a:95"><span class="id" title="variable">a</span></a><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">),</span></a> <a class="idref" href="HoTT.Basics.Overture.html#P:97"><span class="id" title="variable">P</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:99"><span class="id" title="variable">y</span></a> <a class="idref" href="HoTT.Basics.Overture.html#p:100"><span class="id" title="variable">p</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">y</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">u</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
We declare a scope in which we shall place path notations. This way they can be turned on and off by the user. 
<div class="paragraph"> </div>

 We bind <span class="inlinecode"><span class="id" title="var">path_scope</span></span> to <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#paths"><span class="id" title="inductive">paths</span></a></span> so that when we are constructing arguments to things like <span class="inlinecode"><a class="idref" href="HoTT.Tactics.RewriteModuloAssociativity.html#examples.concat"><span class="id" title="section">concat</span></a></span>, we automatically are in <span class="inlinecode"><span class="id" title="var">path_scope</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Bind</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">path_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="var">paths</span>.<br/>

<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">path_scope</span>.<br/>

<br/>
</div>

<div class="doc">
The inverse of a path. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="inverse" class="idref" href="#inverse"><span class="id" title="definition">inverse</span></a> {<a id="A:101" class="idref" href="#A:101"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} {<a id="x:102" class="idref" href="#x:102"><span class="id" title="binder">x</span></a> <a id="y:103" class="idref" href="#y:103"><span class="id" title="binder">y</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:101"><span class="id" title="variable">A</span></a>} (<a id="p:104" class="idref" href="#p:104"><span class="id" title="binder">p</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#x:102"><span class="id" title="variable">x</span></a> <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:103"><span class="id" title="variable">y</span></a>) : <a class="idref" href="HoTT.Basics.Overture.html#y:103"><span class="id" title="variable">y</span></a> <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="HoTT.Basics.Overture.html#x:102"><span class="id" title="variable">x</span></a><br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">match</span> <a class="idref" href="HoTT.Basics.Overture.html#p:104"><span class="id" title="variable">p</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="HoTT.Basics.Overture.html#idpath"><span class="id" title="constructor">idpath</span></a> ⇒ <a class="idref" href="HoTT.Basics.Overture.html#idpath"><span class="id" title="constructor">idpath</span></a> <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="var">Register</span> <span class="id" title="var">inverse</span> <span class="id" title="keyword">as</span> <span class="id" title="var">core.identity.sym</span>.<br/>

<br/>
</div>

<div class="doc">
Declaring this as <span class="inlinecode"><span class="id" title="tactic">simpl</span></span> <span class="inlinecode"><span class="id" title="var">nomatch</span></span> prevents the tactic <span class="inlinecode"><span class="id" title="tactic">simpl</span></span> from expanding it out into <span class="inlinecode"><span class="id" title="keyword">match</span></span> statements.  We only want <span class="inlinecode"><a class="idref" href="HoTT.Categories.ProductLaws.html#Law1.inverse"><span class="id" title="definition">inverse</span></a></span> to simplify when applied to an identity path. 
</div>
<div class="code">
<span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#inverse"><span class="id" title="definition">inverse</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>} <span class="id" title="var">p</span> : <span class="id" title="tactic">simpl</span> <span class="id" title="var">nomatch</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="symmetric_paths" class="idref" href="#symmetric_paths"><span class="id" title="instance">symmetric_paths</span></a> {<a id="A:106" class="idref" href="#A:106"><span class="id" title="binder">A</span></a>} : <a class="idref" href="HoTT.Basics.Overture.html#Symmetric"><span class="id" title="class">Symmetric</span></a> (@<a class="idref" href="HoTT.Basics.Overture.html#paths"><span class="id" title="inductive">paths</span></a> <a class="idref" href="HoTT.Basics.Overture.html#A:106"><span class="id" title="variable">A</span></a>) | 0 := @<a class="idref" href="HoTT.Basics.Overture.html#inverse"><span class="id" title="definition">inverse</span></a> <span class="id" title="var">A</span>.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#symmetric_paths"><span class="id" title="instance">symmetric_paths</span></a> / .<br/>

<br/>
</div>

<div class="doc">
This allows <span class="inlinecode"><span class="id" title="tactic">rewrite</span></span> to both in left-to-right and right-to left directions. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="paths_rect_r" class="idref" href="#paths_rect_r"><span class="id" title="definition">paths_rect_r</span></a> (<a id="A:107" class="idref" href="#A:107"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>) (<a id="x:108" class="idref" href="#x:108"><span class="id" title="binder">x</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:107"><span class="id" title="variable">A</span></a>) (<a id="P:109" class="idref" href="#P:109"><span class="id" title="binder">P</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:107"><span class="id" title="variable">A</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="p:110" class="idref" href="#p:110"><span class="id" title="binder">p</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#P:109"><span class="id" title="variable">P</span></a> <a class="idref" href="HoTT.Basics.Overture.html#x:108"><span class="id" title="variable">x</span></a>) (<a id="y:111" class="idref" href="#y:111"><span class="id" title="binder">y</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:107"><span class="id" title="variable">A</span></a>) (<a id="e:112" class="idref" href="#e:112"><span class="id" title="binder">e</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#paths"><span class="id" title="inductive">paths</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:111"><span class="id" title="variable">y</span></a> <a class="idref" href="HoTT.Basics.Overture.html#x:108"><span class="id" title="variable">x</span></a>) : <a class="idref" href="HoTT.Basics.Overture.html#P:109"><span class="id" title="variable">P</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:111"><span class="id" title="variable">y</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="HoTT.Basics.Overture.html#paths_rect"><span class="id" title="definition">paths_rect</span></a> <a class="idref" href="HoTT.Basics.Overture.html#A:107"><span class="id" title="variable">A</span></a> <a class="idref" href="HoTT.Basics.Overture.html#x:108"><span class="id" title="variable">x</span></a> (<span class="id" title="keyword">fun</span> <a id="y:113" class="idref" href="#y:113"><span class="id" title="binder">y</span></a> <a id="e:114" class="idref" href="#e:114"><span class="id" title="binder">e</span></a> ⇒ <a class="idref" href="HoTT.Basics.Overture.html#P:109"><span class="id" title="variable">P</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:113"><span class="id" title="variable">y</span></a>) <a class="idref" href="HoTT.Basics.Overture.html#p:110"><span class="id" title="variable">p</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:111"><span class="id" title="variable">y</span></a> (<a class="idref" href="HoTT.Basics.Overture.html#inverse"><span class="id" title="definition">inverse</span></a> <a class="idref" href="HoTT.Basics.Overture.html#e:112"><span class="id" title="variable">e</span></a>).<br/>

<br/>
</div>

<div class="doc">
If we wanted to not have the constant <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#symmetric_paths"><span class="id" title="instance">symmetric_paths</span></a></span> floating around, and wanted to resolve <span class="inlinecode"><a class="idref" href="HoTT.Categories.ProductLaws.html#Law1.inverse"><span class="id" title="definition">inverse</span></a></span> directly, instead, we could play this trick, discovered by Georges Gonthier to fool Coq's restriction on <span class="inlinecode"><span class="id" title="library">Identity</span></span> <span class="inlinecode"><span class="id" title="keyword">Coercion</span></span>s:

<div class="paragraph"> </div>

<pre>
Module Export inverse.
  Definition inverse {A : Type} {x y : A} (p : x = y) : y = x
    := match p with idpath =&gt; idpath end.
End inverse.

Module Type inverseT.
  Parameter inverse : forall {A}, Symmetric (@paths A).
End inverseT.

Module inverseSymmetric (inverse : inverseT).
  Global Existing Instance inverse.inverse.
End inverseSymmetric.

Module Export symmetric_paths := inverseSymmetric inverse.
</pre>
 
<div class="paragraph"> </div>

 We define equality concatenation by destructing on both its arguments, so that it only computes when both arguments are <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#idpath"><span class="id" title="constructor">idpath</span></a></span>.  This makes proofs more robust and symmetrical.  Compare with the definition of <span class="inlinecode"><a class="idref" href="Coq.Init.Logic_Type.html#identity_trans"><span class="id" title="lemma">identity_trans</span></a></span>.  
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="concat" class="idref" href="#concat"><span class="id" title="definition">concat</span></a> {<a id="A:115" class="idref" href="#A:115"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} {<a id="x:116" class="idref" href="#x:116"><span class="id" title="binder">x</span></a> <a id="y:117" class="idref" href="#y:117"><span class="id" title="binder">y</span></a> <a id="z:118" class="idref" href="#z:118"><span class="id" title="binder">z</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:115"><span class="id" title="variable">A</span></a>} (<a id="p:119" class="idref" href="#p:119"><span class="id" title="binder">p</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#x:116"><span class="id" title="variable">x</span></a> <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:117"><span class="id" title="variable">y</span></a>) (<a id="q:120" class="idref" href="#q:120"><span class="id" title="binder">q</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#y:117"><span class="id" title="variable">y</span></a> <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="HoTT.Basics.Overture.html#z:118"><span class="id" title="variable">z</span></a>) : <a class="idref" href="HoTT.Basics.Overture.html#x:116"><span class="id" title="variable">x</span></a> <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="HoTT.Basics.Overture.html#z:118"><span class="id" title="variable">z</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="HoTT.Basics.Overture.html#p:119"><span class="id" title="variable">p</span></a>, <a class="idref" href="HoTT.Basics.Overture.html#q:120"><span class="id" title="variable">q</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="HoTT.Basics.Overture.html#idpath"><span class="id" title="constructor">idpath</span></a>, <a class="idref" href="HoTT.Basics.Overture.html#idpath"><span class="id" title="constructor">idpath</span></a> ⇒ <a class="idref" href="HoTT.Basics.Overture.html#idpath"><span class="id" title="constructor">idpath</span></a> <span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
See above for the meaning of <span class="inlinecode"><span class="id" title="tactic">simpl</span></span> <span class="inlinecode"><span class="id" title="var">nomatch</span></span>. 
</div>
<div class="code">
<span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#concat"><span class="id" title="definition">concat</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>} <span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="tactic">simpl</span> <span class="id" title="var">nomatch</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="transitive_paths" class="idref" href="#transitive_paths"><span class="id" title="instance">transitive_paths</span></a> {<a id="A:123" class="idref" href="#A:123"><span class="id" title="binder">A</span></a>} : <a class="idref" href="HoTT.Basics.Overture.html#Transitive"><span class="id" title="class">Transitive</span></a> (@<a class="idref" href="HoTT.Basics.Overture.html#paths"><span class="id" title="inductive">paths</span></a> <a class="idref" href="HoTT.Basics.Overture.html#A:123"><span class="id" title="variable">A</span></a>) | 0 := @<a class="idref" href="HoTT.Basics.Overture.html#concat"><span class="id" title="definition">concat</span></a> <span class="id" title="var">A</span>.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#transitive_paths"><span class="id" title="instance">transitive_paths</span></a> / .<br/>

<br/>
<span class="id" title="var">Register</span> <span class="id" title="var">concat</span> <span class="id" title="keyword">as</span> <span class="id" title="var">core.identity.trans</span>.<br/>

<br/>
</div>

<div class="doc">
Note that you can use the Coq tactics <span class="inlinecode"><span class="id" title="tactic">reflexivity</span></span>, <span class="inlinecode"><span class="id" title="tactic">transitivity</span></span>, <span class="inlinecode"><span class="id" title="var">etransitivity</span></span>, and <span class="inlinecode"><span class="id" title="tactic">symmetry</span></span> when working with paths; we've redefined them above to use typeclasses and to unfold the instances so you get proof terms with <span class="inlinecode"><a class="idref" href="HoTT.Tactics.RewriteModuloAssociativity.html#examples.concat"><span class="id" title="section">concat</span></a></span> and <span class="inlinecode"><a class="idref" href="HoTT.Categories.ProductLaws.html#Law1.inverse"><span class="id" title="definition">inverse</span></a></span>. 
<div class="paragraph"> </div>

 The identity path. 
</div>
<div class="code">
<span class="id" title="keyword">Notation</span> <a id="::path_scope:'1'" class="idref" href="#::path_scope:'1'"><span class="id" title="notation">&quot;</span></a>1" := <a class="idref" href="HoTT.Basics.Overture.html#idpath"><span class="id" title="constructor">idpath</span></a> : <span class="id" title="var">path_scope</span>.<br/>

<br/>
</div>

<div class="doc">
The composition of two paths.  We put <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_2_1_Proofs_Are_Equal.p"><span class="id" title="variable">p</span></a></span> and <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_2_1_Proofs_Are_Equal.q"><span class="id" title="variable">q</span></a></span> in <span class="inlinecode"><span class="id" title="var">path_scope</span></span> explcitly.  This is a partial work-around for https://coq.inria.fr/bugs/show_bug.cgi?id=3990, which is that implicitly bound scopes don't nest well. 
</div>
<div class="code">
<span class="id" title="keyword">Notation</span> <a id="da4283005a63bc086811fc2e64b35356" class="idref" href="#da4283005a63bc086811fc2e64b35356"><span class="id" title="notation">&quot;</span></a>p @ q" := (<a class="idref" href="HoTT.Basics.Overture.html#concat"><span class="id" title="definition">concat</span></a> <span class="id" title="var">p</span>%<span class="id" title="var">path</span> <span class="id" title="var">q</span>%<span class="id" title="var">path</span>) : <span class="id" title="var">path_scope</span>.<br/>

<br/>
</div>

<div class="doc">
The inverse of a path.  See above about explicitly placing <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_2_1_Proofs_Are_Equal.p"><span class="id" title="variable">p</span></a></span> in <span class="inlinecode"><span class="id" title="var">path_scope</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Notation</span> <a id="6bc2e8b4a6e295632a90f5f35132db8d" class="idref" href="#6bc2e8b4a6e295632a90f5f35132db8d"><span class="id" title="notation">&quot;</span></a>p ^" := (<a class="idref" href="HoTT.Basics.Overture.html#inverse"><span class="id" title="definition">inverse</span></a> <span class="id" title="var">p</span>%<span class="id" title="var">path</span>) : <span class="id" title="var">path_scope</span>.<br/>

<br/>
</div>

<div class="doc">
An alternative notation which puts each path on its own line, via the <span class="inlinecode"><span class="id" title="var">format</span></span> specification in Notations.v.  Useful as a temporary device during proofs of equalities between very long composites; to turn it on inside a section, say <span class="inlinecode"><span class="id" title="keyword">Open</span></span> <span class="inlinecode"><span class="id" title="keyword">Scope</span></span> <span class="inlinecode"><span class="id" title="var">long_path_scope</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Notation</span> <a id="29a0aaffae4351b224984da49c99456a" class="idref" href="#29a0aaffae4351b224984da49c99456a"><span class="id" title="notation">&quot;</span></a>p @' q" := (<a class="idref" href="HoTT.Basics.Overture.html#concat"><span class="id" title="definition">concat</span></a> <span class="id" title="var">p</span> <span class="id" title="var">q</span>) : <span class="id" title="var">long_path_scope</span>.<br/>

<br/>
</div>

<div class="doc">
An important instance of <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#paths_ind"><span class="id" title="definition">paths_ind</span></a></span> is that given any dependent type, one can <i>transport</i> elements of instances of the type along equalities in the base.

<div class="paragraph"> </div>

   <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#transport"><span class="id" title="definition">transport</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.DependentProduct.html#dependent_product.P"><span class="id" title="variable">P</span></a></span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_2_1_Proofs_Are_Equal.p"><span class="id" title="variable">p</span></a></span> <span class="inlinecode"><span class="id" title="var">u</span></span> transports <span class="inlinecode"><span class="id" title="var">u</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.DependentProduct.html#dependent_product.P"><span class="id" title="variable">P</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> to <span class="inlinecode"><a class="idref" href="HoTT.Categories.DependentProduct.html#dependent_product.P"><span class="id" title="variable">P</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Functor.Attributes.html#fully_faithful_helpers.y"><span class="id" title="variable">y</span></a></span> along <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_2_1_Proofs_Are_Equal.p"><span class="id" title="variable">p</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Functor.Attributes.html#fully_faithful_helpers.y"><span class="id" title="variable">y</span></a></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="transport" class="idref" href="#transport"><span class="id" title="definition">transport</span></a> {<a id="A:124" class="idref" href="#A:124"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} (<a id="P:125" class="idref" href="#P:125"><span class="id" title="binder">P</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:124"><span class="id" title="variable">A</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) {<a id="x:126" class="idref" href="#x:126"><span class="id" title="binder">x</span></a> <a id="y:127" class="idref" href="#y:127"><span class="id" title="binder">y</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:124"><span class="id" title="variable">A</span></a>} (<a id="p:128" class="idref" href="#p:128"><span class="id" title="binder">p</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#x:126"><span class="id" title="variable">x</span></a> <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:127"><span class="id" title="variable">y</span></a>) (<a id="u:129" class="idref" href="#u:129"><span class="id" title="binder">u</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#P:125"><span class="id" title="variable">P</span></a> <a class="idref" href="HoTT.Basics.Overture.html#x:126"><span class="id" title="variable">x</span></a>) : <a class="idref" href="HoTT.Basics.Overture.html#P:125"><span class="id" title="variable">P</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:127"><span class="id" title="variable">y</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="HoTT.Basics.Overture.html#p:128"><span class="id" title="variable">p</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="HoTT.Basics.Overture.html#idpath"><span class="id" title="constructor">idpath</span></a> ⇒ <a class="idref" href="HoTT.Basics.Overture.html#u:129"><span class="id" title="variable">u</span></a> <span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
See above for the meaning of <span class="inlinecode"><span class="id" title="tactic">simpl</span></span> <span class="inlinecode"><span class="id" title="var">nomatch</span></span>. 
</div>
<div class="code">
<span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#transport"><span class="id" title="definition">transport</span></a> {<span class="id" title="var">A</span>}%<span class="id" title="var">type_scope</span> <span class="id" title="var">P</span>%<span class="id" title="var">function_scope</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span>} <span class="id" title="var">p</span>%<span class="id" title="var">path_scope</span> <span class="id" title="var">u</span> : <span class="id" title="tactic">simpl</span> <span class="id" title="var">nomatch</span>.<br/>

<br/>
</div>

<div class="doc">
Transport is very common so it is worth introducing a parsing notation for it.  However, we do not use the notation for output because it hides the fibration, and so makes it very hard to read involved transport expression.
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Notation</span> <a id="2b82354f12c687608f5c1ade3e7ee37d" class="idref" href="#2b82354f12c687608f5c1ade3e7ee37d"><span class="id" title="notation">&quot;</span></a>p # x" := (<a class="idref" href="HoTT.Basics.Overture.html#transport"><span class="id" title="definition">transport</span></a> <span class="id" title="var">_</span> <span class="id" title="var">p</span> <span class="id" title="var">x</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">path_scope</span>.<br/>

<br/>
</div>

<div class="doc">
Having defined transport, we can use it to talk about what a homotopy theorist might see as "paths in a fibration over paths in the base"; and what a type theorist might see as "heterogeneous eqality in a dependent type".

<div class="paragraph"> </div>

We will first see this appearing in the type of <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#apD"><span class="id" title="definition">apD</span></a></span>. 
<div class="paragraph"> </div>

 Functions act on paths: if <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.A"><span class="id" title="variable">A</span></a></span> <span class="inlinecode">→</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.B"><span class="id" title="variable">B</span></a></span> and <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_2_1_Proofs_Are_Equal.p"><span class="id" title="variable">p</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Functor.Attributes.html#fully_faithful_helpers.y"><span class="id" title="variable">y</span></a></span> is a path in <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.A"><span class="id" title="variable">A</span></a></span>, then <span class="inlinecode"><a class="idref" href="HoTT.Tactics.EquivalenceInduction.html#ap"><span class="id" title="section">ap</span></a></span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_2_1_Proofs_Are_Equal.p"><span class="id" title="variable">p</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Functor.Attributes.html#fully_faithful_helpers.y"><span class="id" title="variable">y</span></a></span>.

<div class="paragraph"> </div>

   We typically pronounce <span class="inlinecode"><a class="idref" href="HoTT.Tactics.EquivalenceInduction.html#ap"><span class="id" title="section">ap</span></a></span> as a single syllable, short for "application"; but it may also be considered as an acronym, "action on paths". 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="ap" class="idref" href="#ap"><span class="id" title="definition">ap</span></a> {<a id="A:131" class="idref" href="#A:131"><span class="id" title="binder">A</span></a> <a id="B:132" class="idref" href="#B:132"><span class="id" title="binder">B</span></a>:<span class="id" title="keyword">Type</span>} (<a id="f:133" class="idref" href="#f:133"><span class="id" title="binder">f</span></a>:<a class="idref" href="HoTT.Basics.Overture.html#A:131"><span class="id" title="variable">A</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="HoTT.Basics.Overture.html#B:132"><span class="id" title="variable">B</span></a>) {<a id="x:134" class="idref" href="#x:134"><span class="id" title="binder">x</span></a> <a id="y:135" class="idref" href="#y:135"><span class="id" title="binder">y</span></a>:<a class="idref" href="HoTT.Basics.Overture.html#A:131"><span class="id" title="variable">A</span></a>} (<a id="p:136" class="idref" href="#p:136"><span class="id" title="binder">p</span></a>:<a class="idref" href="HoTT.Basics.Overture.html#x:134"><span class="id" title="variable">x</span></a> <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:135"><span class="id" title="variable">y</span></a>) : <a class="idref" href="HoTT.Basics.Overture.html#f:133"><span class="id" title="variable">f</span></a> <a class="idref" href="HoTT.Basics.Overture.html#x:134"><span class="id" title="variable">x</span></a> <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="HoTT.Basics.Overture.html#f:133"><span class="id" title="variable">f</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:135"><span class="id" title="variable">y</span></a><br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">match</span> <a class="idref" href="HoTT.Basics.Overture.html#p:136"><span class="id" title="variable">p</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="HoTT.Basics.Overture.html#idpath"><span class="id" title="constructor">idpath</span></a> ⇒ <a class="idref" href="HoTT.Basics.Overture.html#idpath"><span class="id" title="constructor">idpath</span></a> <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Global</span> <span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#ap"><span class="id" title="definition">ap</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>}%<span class="id" title="var">type_scope</span> <span class="id" title="var">f</span>%<span class="id" title="var">function_scope</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span>} <span class="id" title="var">p</span>%<span class="id" title="var">path_scope</span>.<br/>

<br/>
<span class="id" title="var">Register</span> <span class="id" title="var">ap</span> <span class="id" title="keyword">as</span> <span class="id" title="var">core.identity.congr</span>.<br/>

<br/>
</div>

<div class="doc">
We introduce the convention that <span class="inlinecode"><span class="id" title="var">apKN</span></span> denotes the application of a K-path between functions to an N-path between elements, where a 0-path is simply a function or an element. Thus, <span class="inlinecode"><a class="idref" href="HoTT.Tactics.EquivalenceInduction.html#ap"><span class="id" title="section">ap</span></a></span> is a shorthand for <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#ap01"><span class="id" title="abbreviation">ap01</span></a></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Notation</span> <a id="ap01" class="idref" href="#ap01"><span class="id" title="abbreviation">ap01</span></a> := <a class="idref" href="HoTT.Basics.Overture.html#ap"><span class="id" title="definition">ap</span></a> (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="pointwise_paths" class="idref" href="#pointwise_paths"><span class="id" title="definition">pointwise_paths</span></a> <a id="A:138" class="idref" href="#A:138"><span class="id" title="binder">A</span></a> (<a id="P:139" class="idref" href="#P:139"><span class="id" title="binder">P</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:138"><span class="id" title="variable">A</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="f:141" class="idref" href="#f:141"><span class="id" title="binder">f</span></a> <a id="g:142" class="idref" href="#g:142"><span class="id" title="binder">g</span></a> : <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a id="x:140" class="idref" href="#x:140"><span class="id" title="binder">x</span></a><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">,</span></a> <a class="idref" href="HoTT.Basics.Overture.html#P:139"><span class="id" title="variable">P</span></a> <a class="idref" href="HoTT.Basics.Overture.html#x:140"><span class="id" title="variable">x</span></a>)<br/>
&nbsp;&nbsp;:= <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a id="x:143" class="idref" href="#x:143"><span class="id" title="binder">x</span></a><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">,</span></a> <a class="idref" href="HoTT.Basics.Overture.html#f:141"><span class="id" title="variable">f</span></a> <a class="idref" href="HoTT.Basics.Overture.html#x:143"><span class="id" title="variable">x</span></a> <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="HoTT.Basics.Overture.html#g:142"><span class="id" title="variable">g</span></a> <a class="idref" href="HoTT.Basics.Overture.html#x:143"><span class="id" title="variable">x</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="pointwise_paths_concat" class="idref" href="#pointwise_paths_concat"><span class="id" title="definition">pointwise_paths_concat</span></a> {<a id="A:144" class="idref" href="#A:144"><span class="id" title="binder">A</span></a>} {<a id="P:145" class="idref" href="#P:145"><span class="id" title="binder">P</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:144"><span class="id" title="variable">A</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>} {<a id="f:147" class="idref" href="#f:147"><span class="id" title="binder">f</span></a> <a id="g:148" class="idref" href="#g:148"><span class="id" title="binder">g</span></a> <a id="h:149" class="idref" href="#h:149"><span class="id" title="binder">h</span></a> : <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a id="x:146" class="idref" href="#x:146"><span class="id" title="binder">x</span></a><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">,</span></a> <a class="idref" href="HoTT.Basics.Overture.html#P:145"><span class="id" title="variable">P</span></a> <a class="idref" href="HoTT.Basics.Overture.html#x:146"><span class="id" title="variable">x</span></a>}<br/>
&nbsp;&nbsp;: <a class="idref" href="HoTT.Basics.Overture.html#pointwise_paths"><span class="id" title="definition">pointwise_paths</span></a> <a class="idref" href="HoTT.Basics.Overture.html#A:144"><span class="id" title="variable">A</span></a> <a class="idref" href="HoTT.Basics.Overture.html#P:145"><span class="id" title="variable">P</span></a> <a class="idref" href="HoTT.Basics.Overture.html#f:147"><span class="id" title="variable">f</span></a> <a class="idref" href="HoTT.Basics.Overture.html#g:148"><span class="id" title="variable">g</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="HoTT.Basics.Overture.html#pointwise_paths"><span class="id" title="definition">pointwise_paths</span></a> <a class="idref" href="HoTT.Basics.Overture.html#A:144"><span class="id" title="variable">A</span></a> <a class="idref" href="HoTT.Basics.Overture.html#P:145"><span class="id" title="variable">P</span></a> <a class="idref" href="HoTT.Basics.Overture.html#g:148"><span class="id" title="variable">g</span></a> <a class="idref" href="HoTT.Basics.Overture.html#h:149"><span class="id" title="variable">h</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="HoTT.Basics.Overture.html#pointwise_paths"><span class="id" title="definition">pointwise_paths</span></a> <a class="idref" href="HoTT.Basics.Overture.html#A:144"><span class="id" title="variable">A</span></a> <a class="idref" href="HoTT.Basics.Overture.html#P:145"><span class="id" title="variable">P</span></a> <a class="idref" href="HoTT.Basics.Overture.html#f:147"><span class="id" title="variable">f</span></a> <a class="idref" href="HoTT.Basics.Overture.html#h:149"><span class="id" title="variable">h</span></a> := <span class="id" title="keyword">fun</span> <a id="p:150" class="idref" href="#p:150"><span class="id" title="binder">p</span></a> <a id="q:151" class="idref" href="#q:151"><span class="id" title="binder">q</span></a> <a id="x:152" class="idref" href="#x:152"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="HoTT.Basics.Overture.html#p:150"><span class="id" title="variable">p</span></a> <a class="idref" href="HoTT.Basics.Overture.html#x:152"><span class="id" title="variable">x</span></a> <a class="idref" href="HoTT.Basics.Overture.html#da4283005a63bc086811fc2e64b35356"><span class="id" title="notation">@</span></a> <a class="idref" href="HoTT.Basics.Overture.html#q:151"><span class="id" title="variable">q</span></a> <a class="idref" href="HoTT.Basics.Overture.html#x:152"><span class="id" title="variable">x</span></a>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="reflexive_pointwise_paths" class="idref" href="#reflexive_pointwise_paths"><span class="id" title="instance">reflexive_pointwise_paths</span></a> <a id="A:153" class="idref" href="#A:153"><span class="id" title="binder">A</span></a> <a id="P:154" class="idref" href="#P:154"><span class="id" title="binder">P</span></a><br/>
&nbsp;&nbsp;: <a class="idref" href="HoTT.Basics.Overture.html#Reflexive"><span class="id" title="class">Reflexive</span></a> (<a class="idref" href="HoTT.Basics.Overture.html#pointwise_paths"><span class="id" title="definition">pointwise_paths</span></a> <a class="idref" href="HoTT.Basics.Overture.html#A:153"><span class="id" title="variable">A</span></a> <a class="idref" href="HoTT.Basics.Overture.html#P:154"><span class="id" title="variable">P</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ?; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="transitive_pointwise_paths" class="idref" href="#transitive_pointwise_paths"><span class="id" title="instance">transitive_pointwise_paths</span></a> <a id="A:155" class="idref" href="#A:155"><span class="id" title="binder">A</span></a> <a id="P:156" class="idref" href="#P:156"><span class="id" title="binder">P</span></a><br/>
&nbsp;&nbsp;: <a class="idref" href="HoTT.Basics.Overture.html#Transitive"><span class="id" title="class">Transitive</span></a> (<a class="idref" href="HoTT.Basics.Overture.html#pointwise_paths"><span class="id" title="definition">pointwise_paths</span></a> <a class="idref" href="HoTT.Basics.Overture.html#A:155"><span class="id" title="variable">A</span></a> <a class="idref" href="HoTT.Basics.Overture.html#P:156"><span class="id" title="variable">P</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="HoTT.Basics.Overture.html#pointwise_paths_concat"><span class="id" title="definition">pointwise_paths_concat</span></a>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="symmetric_pointwise_paths" class="idref" href="#symmetric_pointwise_paths"><span class="id" title="instance">symmetric_pointwise_paths</span></a> <a id="A:157" class="idref" href="#A:157"><span class="id" title="binder">A</span></a> <a id="P:158" class="idref" href="#P:158"><span class="id" title="binder">P</span></a><br/>
&nbsp;&nbsp;: <a class="idref" href="HoTT.Basics.Overture.html#Symmetric"><span class="id" title="class">Symmetric</span></a> (<a class="idref" href="HoTT.Basics.Overture.html#pointwise_paths"><span class="id" title="definition">pointwise_paths</span></a> <a class="idref" href="HoTT.Basics.Overture.html#A:157"><span class="id" title="variable">A</span></a> <a class="idref" href="HoTT.Basics.Overture.html#P:158"><span class="id" title="variable">P</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ? <span class="id" title="var">p</span> ?; <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Global</span> <span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#pointwise_paths"><span class="id" title="definition">pointwise_paths</span></a> {<span class="id" title="var">A</span>}%<span class="id" title="var">type_scope</span> {<span class="id" title="var">P</span>} (<span class="id" title="var">f</span> <span class="id" title="var">g</span>)%<span class="id" title="var">function_scope</span>.<br/>
<span class="id" title="keyword">Global</span> <span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#reflexive_pointwise_paths"><span class="id" title="instance">reflexive_pointwise_paths</span></a> /.<br/>
<span class="id" title="keyword">Global</span> <span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#transitive_pointwise_paths"><span class="id" title="instance">transitive_pointwise_paths</span></a> /.<br/>
<span class="id" title="keyword">Global</span> <span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#symmetric_pointwise_paths"><span class="id" title="instance">symmetric_pointwise_paths</span></a> /.<br/>

<br/>
#[<span class="id" title="var">export</span>]<br/>
<span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Unfold</span> <a class="idref" href="HoTT.Basics.Overture.html#pointwise_paths"><span class="id" title="definition">pointwise_paths</span></a> : <span class="id" title="var">typeclass_instances</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="2596316c6f2ff161cb03e25fd8914390" class="idref" href="#2596316c6f2ff161cb03e25fd8914390"><span class="id" title="notation">&quot;</span></a>f == g" := (<a class="idref" href="HoTT.Basics.Overture.html#pointwise_paths"><span class="id" title="definition">pointwise_paths</span></a> <span class="id" title="var">f</span> <span class="id" title="var">g</span>) : <span class="id" title="var">type_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="apD10" class="idref" href="#apD10"><span class="id" title="definition">apD10</span></a> {<a id="A:159" class="idref" href="#A:159"><span class="id" title="binder">A</span></a>} {<a id="B:160" class="idref" href="#B:160"><span class="id" title="binder">B</span></a>:<a class="idref" href="HoTT.Basics.Overture.html#A:159"><span class="id" title="variable">A</span></a><a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><span class="id" title="keyword">Type</span>} {<a id="f:162" class="idref" href="#f:162"><span class="id" title="binder">f</span></a> <a id="g:163" class="idref" href="#g:163"><span class="id" title="binder">g</span></a> : <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a id="x:161" class="idref" href="#x:161"><span class="id" title="binder">x</span></a><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">,</span></a> <a class="idref" href="HoTT.Basics.Overture.html#B:160"><span class="id" title="variable">B</span></a> <a class="idref" href="HoTT.Basics.Overture.html#x:161"><span class="id" title="variable">x</span></a>} (<a id="h:164" class="idref" href="#h:164"><span class="id" title="binder">h</span></a>:<a class="idref" href="HoTT.Basics.Overture.html#f:162"><span class="id" title="variable">f</span></a><a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><a class="idref" href="HoTT.Basics.Overture.html#g:163"><span class="id" title="variable">g</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="HoTT.Basics.Overture.html#f:162"><span class="id" title="variable">f</span></a> <a class="idref" href="HoTT.Basics.Overture.html#2596316c6f2ff161cb03e25fd8914390"><span class="id" title="notation">==</span></a> <a class="idref" href="HoTT.Basics.Overture.html#g:163"><span class="id" title="variable">g</span></a><br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">fun</span> <a id="x:165" class="idref" href="#x:165"><span class="id" title="binder">x</span></a> ⇒ <span class="id" title="keyword">match</span> <a class="idref" href="HoTT.Basics.Overture.html#h:164"><span class="id" title="variable">h</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="HoTT.Basics.Overture.html#idpath"><span class="id" title="constructor">idpath</span></a> ⇒ 1 <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Global</span> <span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#apD10"><span class="id" title="definition">apD10</span></a> {<span class="id" title="var">A</span>%<span class="id" title="var">type_scope</span> <span class="id" title="var">B</span>} {<span class="id" title="var">f</span> <span class="id" title="var">g</span>}%<span class="id" title="var">function_scope</span> <span class="id" title="var">h</span>%<span class="id" title="var">path_scope</span> <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="ap10" class="idref" href="#ap10"><span class="id" title="definition">ap10</span></a> {<a id="A:167" class="idref" href="#A:167"><span class="id" title="binder">A</span></a> <a id="B:168" class="idref" href="#B:168"><span class="id" title="binder">B</span></a>} {<a id="f:169" class="idref" href="#f:169"><span class="id" title="binder">f</span></a> <a id="g:170" class="idref" href="#g:170"><span class="id" title="binder">g</span></a>:<a class="idref" href="HoTT.Basics.Overture.html#A:167"><span class="id" title="variable">A</span></a><a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><a class="idref" href="HoTT.Basics.Overture.html#B:168"><span class="id" title="variable">B</span></a>} (<a id="h:171" class="idref" href="#h:171"><span class="id" title="binder">h</span></a>:<a class="idref" href="HoTT.Basics.Overture.html#f:169"><span class="id" title="variable">f</span></a><a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><a class="idref" href="HoTT.Basics.Overture.html#g:170"><span class="id" title="variable">g</span></a>) : <a class="idref" href="HoTT.Basics.Overture.html#f:169"><span class="id" title="variable">f</span></a> <a class="idref" href="HoTT.Basics.Overture.html#2596316c6f2ff161cb03e25fd8914390"><span class="id" title="notation">==</span></a> <a class="idref" href="HoTT.Basics.Overture.html#g:170"><span class="id" title="variable">g</span></a><br/>
&nbsp;&nbsp;:= <a class="idref" href="HoTT.Basics.Overture.html#apD10"><span class="id" title="definition">apD10</span></a> <a class="idref" href="HoTT.Basics.Overture.html#h:171"><span class="id" title="variable">h</span></a>.<br/>

<br/>
<span class="id" title="keyword">Global</span> <span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#ap10"><span class="id" title="definition">ap10</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>}%<span class="id" title="var">type_scope</span> {<span class="id" title="var">f</span> <span class="id" title="var">g</span>}%<span class="id" title="var">function_scope</span> <span class="id" title="var">h</span>%<span class="id" title="var">path_scope</span> <span class="id" title="var">_</span>.<br/>

<br/>
</div>

<div class="doc">
For the benefit of readers of the HoTT Book: 
</div>
<div class="code">
<span class="id" title="keyword">Notation</span> <a id="happly" class="idref" href="#happly"><span class="id" title="abbreviation">happly</span></a> := <a class="idref" href="HoTT.Basics.Overture.html#ap10"><span class="id" title="definition">ap10</span></a> (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="ap11" class="idref" href="#ap11"><span class="id" title="definition">ap11</span></a> {<a id="A:172" class="idref" href="#A:172"><span class="id" title="binder">A</span></a> <a id="B:173" class="idref" href="#B:173"><span class="id" title="binder">B</span></a>} {<a id="f:174" class="idref" href="#f:174"><span class="id" title="binder">f</span></a> <a id="g:175" class="idref" href="#g:175"><span class="id" title="binder">g</span></a>:<a class="idref" href="HoTT.Basics.Overture.html#A:172"><span class="id" title="variable">A</span></a><a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><a class="idref" href="HoTT.Basics.Overture.html#B:173"><span class="id" title="variable">B</span></a>} (<a id="h:176" class="idref" href="#h:176"><span class="id" title="binder">h</span></a>:<a class="idref" href="HoTT.Basics.Overture.html#f:174"><span class="id" title="variable">f</span></a><a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><a class="idref" href="HoTT.Basics.Overture.html#g:175"><span class="id" title="variable">g</span></a>) {<a id="x:177" class="idref" href="#x:177"><span class="id" title="binder">x</span></a> <a id="y:178" class="idref" href="#y:178"><span class="id" title="binder">y</span></a>:<a class="idref" href="HoTT.Basics.Overture.html#A:172"><span class="id" title="variable">A</span></a>} (<a id="p:179" class="idref" href="#p:179"><span class="id" title="binder">p</span></a>:<a class="idref" href="HoTT.Basics.Overture.html#x:177"><span class="id" title="variable">x</span></a><a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><a class="idref" href="HoTT.Basics.Overture.html#y:178"><span class="id" title="variable">y</span></a>) : <a class="idref" href="HoTT.Basics.Overture.html#f:174"><span class="id" title="variable">f</span></a> <a class="idref" href="HoTT.Basics.Overture.html#x:177"><span class="id" title="variable">x</span></a> <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="HoTT.Basics.Overture.html#g:175"><span class="id" title="variable">g</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:178"><span class="id" title="variable">y</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span> <span class="id" title="var">h</span>, <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Global</span> <span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#ap11"><span class="id" title="definition">ap11</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>}%<span class="id" title="var">type_scope</span> {<span class="id" title="var">f</span> <span class="id" title="var">g</span>}%<span class="id" title="var">function_scope</span> <span class="id" title="var">h</span>%<span class="id" title="var">path_scope</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span>} <span class="id" title="var">p</span>%<span class="id" title="var">path_scope</span>.<br/>

<br/>
</div>

<div class="doc">
See above for the meaning of <span class="inlinecode"><span class="id" title="tactic">simpl</span></span> <span class="inlinecode"><span class="id" title="var">nomatch</span></span>. 
</div>
<div class="code">
<span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#ap"><span class="id" title="definition">ap</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} <span class="id" title="var">f</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span>} <span class="id" title="var">p</span> : <span class="id" title="tactic">simpl</span> <span class="id" title="var">nomatch</span>.<br/>

<br/>
</div>

<div class="doc">
Similarly, dependent functions act on paths; but the type is a bit more subtle. If <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="keyword">∀</span></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.LaxComma.CoreParts.html#LaxCommaCategoryParts.a"><span class="id" title="projection">a</span></a>:<a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.A"><span class="id" title="variable">A</span></a>,</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.B"><span class="id" title="variable">B</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.LaxComma.CoreParts.html#LaxCommaCategoryParts.a"><span class="id" title="projection">a</span></a></span> and <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_2_1_Proofs_Are_Equal.p"><span class="id" title="variable">p</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Functor.Attributes.html#fully_faithful_helpers.y"><span class="id" title="variable">y</span></a></span> is a path in <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.A"><span class="id" title="variable">A</span></a></span>, then <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#apD"><span class="id" title="definition">apD</span></a></span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_2_1_Proofs_Are_Equal.p"><span class="id" title="variable">p</span></a></span> should somehow be a path between <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.B"><span class="id" title="variable">B</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> and <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Functor.Attributes.html#fully_faithful_helpers.y"><span class="id" title="variable">y</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.B"><span class="id" title="variable">B</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Functor.Attributes.html#fully_faithful_helpers.y"><span class="id" title="variable">y</span></a></span>. Since these live in different types, we use transport along <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_2_1_Proofs_Are_Equal.p"><span class="id" title="variable">p</span></a></span> to make them comparable: <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#apD"><span class="id" title="definition">apD</span></a></span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_2_1_Proofs_Are_Equal.p"><span class="id" title="variable">p</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_2_1_Proofs_Are_Equal.p"><span class="id" title="variable">p</span></a></span> <span class="inlinecode">#</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Functor.Attributes.html#fully_faithful_helpers.y"><span class="id" title="variable">y</span></a></span>.

<div class="paragraph"> </div>

  The type <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_2_1_Proofs_Are_Equal.p"><span class="id" title="variable">p</span></a></span> <span class="inlinecode">#</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Functor.Attributes.html#fully_faithful_helpers.y"><span class="id" title="variable">y</span></a></span> can profitably be considered as a heterogeneous or dependent equality type, of "paths from <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> to <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Functor.Attributes.html#fully_faithful_helpers.y"><span class="id" title="variable">y</span></a></span> over <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_2_1_Proofs_Are_Equal.p"><span class="id" title="variable">p</span></a></span>". 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="apD" class="idref" href="#apD"><span class="id" title="definition">apD</span></a> {<a id="A:180" class="idref" href="#A:180"><span class="id" title="binder">A</span></a>:<span class="id" title="keyword">Type</span>} {<a id="B:181" class="idref" href="#B:181"><span class="id" title="binder">B</span></a>:<a class="idref" href="HoTT.Basics.Overture.html#A:180"><span class="id" title="variable">A</span></a><a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><span class="id" title="keyword">Type</span>} (<a id="f:183" class="idref" href="#f:183"><span class="id" title="binder">f</span></a>:<a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a id="a:182" class="idref" href="#a:182"><span class="id" title="binder">a</span></a>:<a class="idref" href="HoTT.Basics.Overture.html#A:180"><span class="id" title="variable">A</span></a><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">,</span></a> <a class="idref" href="HoTT.Basics.Overture.html#B:181"><span class="id" title="variable">B</span></a> <a class="idref" href="HoTT.Basics.Overture.html#a:182"><span class="id" title="variable">a</span></a>) {<a id="x:184" class="idref" href="#x:184"><span class="id" title="binder">x</span></a> <a id="y:185" class="idref" href="#y:185"><span class="id" title="binder">y</span></a>:<a class="idref" href="HoTT.Basics.Overture.html#A:180"><span class="id" title="variable">A</span></a>} (<a id="p:186" class="idref" href="#p:186"><span class="id" title="binder">p</span></a>:<a class="idref" href="HoTT.Basics.Overture.html#x:184"><span class="id" title="variable">x</span></a><a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><a class="idref" href="HoTT.Basics.Overture.html#y:185"><span class="id" title="variable">y</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="HoTT.Basics.Overture.html#p:186"><span class="id" title="variable">p</span></a> <a class="idref" href="HoTT.Basics.Overture.html#2b82354f12c687608f5c1ade3e7ee37d"><span class="id" title="notation">#</span></a> <a class="idref" href="HoTT.Basics.Overture.html#2b82354f12c687608f5c1ade3e7ee37d"><span class="id" title="notation">(</span></a><a class="idref" href="HoTT.Basics.Overture.html#f:183"><span class="id" title="variable">f</span></a> <a class="idref" href="HoTT.Basics.Overture.html#x:184"><span class="id" title="variable">x</span></a><a class="idref" href="HoTT.Basics.Overture.html#2b82354f12c687608f5c1ade3e7ee37d"><span class="id" title="notation">)</span></a> <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="HoTT.Basics.Overture.html#f:183"><span class="id" title="variable">f</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:185"><span class="id" title="variable">y</span></a><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="HoTT.Basics.Overture.html#p:186"><span class="id" title="variable">p</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="HoTT.Basics.Overture.html#idpath"><span class="id" title="constructor">idpath</span></a> ⇒ <a class="idref" href="HoTT.Basics.Overture.html#idpath"><span class="id" title="constructor">idpath</span></a> <span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
See above for the meaning of <span class="inlinecode"><span class="id" title="tactic">simpl</span></span> <span class="inlinecode"><span class="id" title="var">nomatch</span></span>. 
</div>
<div class="code">
<span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#apD"><span class="id" title="definition">apD</span></a> {<span class="id" title="var">A</span>%<span class="id" title="var">type_scope</span> <span class="id" title="var">B</span>} <span class="id" title="var">f</span>%<span class="id" title="var">function_scope</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span>} <span class="id" title="var">p</span>%<span class="id" title="var">path_scope</span> : <span class="id" title="tactic">simpl</span> <span class="id" title="var">nomatch</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab24"></a><h2 class="section">Equivalences</h2>

<div class="paragraph"> </div>

 Homotopy equivalences are a central concept in homotopy type theory. Before we define equivalences, let us consider when two types <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.A"><span class="id" title="variable">A</span></a></span> and <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.B"><span class="id" title="variable">B</span></a></span> should be considered "the same".

<div class="paragraph"> </div>

   The first option is to require existence of <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.A"><span class="id" title="variable">A</span></a></span> <span class="inlinecode">→</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.B"><span class="id" title="variable">B</span></a></span> and <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.g"><span class="id" title="variable">g</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.B"><span class="id" title="variable">B</span></a></span> <span class="inlinecode">→</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.A"><span class="id" title="variable">A</span></a></span> which are inverses of each other, up to homotopy.  Homotopically speaking, we should also require a certain condition on these homotopies, which is one of the triangle identities for adjunctions in category theory.  Thus, we call this notion an *adjoint equivalence*.

<div class="paragraph"> </div>

  The other triangle identity is provable from the first one, along with all the higher coherences, so it is reasonable to only assume one of them.  Moreover, as we will see, if we have maps which are inverses up to homotopy, it is always possible to make the triangle identity hold by modifying one of the homotopies.

<div class="paragraph"> </div>

   The second option is to use Vladimir Voevodsky's definition of an equivalence as a map whose homotopy fibers are contractible.  We call this notion a *homotopy bijection*.

<div class="paragraph"> </div>

   An interesting third option was suggested by André Joyal: a map <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.f"><span class="id" title="variable">f</span></a></span> which has separate left and right homotopy inverses.  We call this notion a *homotopy isomorphism*.

<div class="paragraph"> </div>

   While the second option was the one used originally, and it is the most concise one, it makes more sense to use the first one in a formalized development, since it exposes most directly equivalence as a structure.  In particular, it is easier to extract directly from it the data of a homotopy inverse to <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.f"><span class="id" title="variable">f</span></a></span>, which is what we care about having most in practice.  Thus, adjoint equivalences are what we will refer to merely as *equivalences*. 
<div class="paragraph"> </div>

 Naming convention: we use <span class="inlinecode"><a class="idref" href="HoTT.Categories.Category.Morphisms.html#EpiMono.equiv"><span class="id" title="section">equiv</span></a></span> and <span class="inlinecode"><a class="idref" href="HoTT.Colimits.Quotient.html#Equiv"><span class="id" title="section">Equiv</span></a></span> systematically to denote types of equivalences, and <span class="inlinecode"><a class="idref" href="HoTT.Categories.Adjoint.HomCoercions.html#isequiv"><span class="id" title="section">isequiv</span></a></span> and <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#IsEquiv"><span class="id" title="record">IsEquiv</span></a></span> systematically to denote the assertion that a given map is an equivalence. 
<div class="paragraph"> </div>

 A typeclass that includes the data making <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.f"><span class="id" title="variable">f</span></a></span> into an adjoint equivalence. 
</div>
<div class="code">
<span class="id" title="var">Cumulative</span> <span class="id" title="keyword">Class</span> <a id="IsEquiv" class="idref" href="#IsEquiv"><span class="id" title="record">IsEquiv</span></a> {<a id="A:188" class="idref" href="#A:188"><span class="id" title="binder">A</span></a> <a id="B:189" class="idref" href="#B:189"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>} (<a id="f:190" class="idref" href="#f:190"><span class="id" title="binder">f</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:188"><span class="id" title="variable">A</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="HoTT.Basics.Overture.html#B:189"><span class="id" title="variable">B</span></a>) := {<br/>
&nbsp;&nbsp;<a id="equiv_inv" class="idref" href="#equiv_inv"><span class="id" title="projection">equiv_inv</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#B:189"><span class="id" title="variable">B</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="HoTT.Basics.Overture.html#A:188"><span class="id" title="variable">A</span></a> ;<br/>
&nbsp;&nbsp;<a id="eisretr" class="idref" href="#eisretr"><span class="id" title="projection">eisretr</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#f:190"><span class="id" title="variable">f</span></a> <a class="idref" href="HoTT.Basics.Overture.html#::function_scope:x_'o'_x"><span class="id" title="notation">o</span></a> <a class="idref" href="HoTT.Basics.Overture.html#equiv_inv:192"><span class="id" title="method">equiv_inv</span></a> <a class="idref" href="HoTT.Basics.Overture.html#2596316c6f2ff161cb03e25fd8914390"><span class="id" title="notation">==</span></a> <a class="idref" href="HoTT.Basics.Overture.html#idmap"><span class="id" title="abbreviation">idmap</span></a> ;<br/>
&nbsp;&nbsp;<a id="eissect" class="idref" href="#eissect"><span class="id" title="projection">eissect</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#equiv_inv:192"><span class="id" title="method">equiv_inv</span></a> <a class="idref" href="HoTT.Basics.Overture.html#::function_scope:x_'o'_x"><span class="id" title="notation">o</span></a> <a class="idref" href="HoTT.Basics.Overture.html#f:190"><span class="id" title="variable">f</span></a> <a class="idref" href="HoTT.Basics.Overture.html#2596316c6f2ff161cb03e25fd8914390"><span class="id" title="notation">==</span></a> <a class="idref" href="HoTT.Basics.Overture.html#idmap"><span class="id" title="abbreviation">idmap</span></a> ;<br/>
&nbsp;&nbsp;<a id="eisadj" class="idref" href="#eisadj"><span class="id" title="projection">eisadj</span></a> : <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a id="x:195" class="idref" href="#x:195"><span class="id" title="binder">x</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:188"><span class="id" title="variable">A</span></a><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">,</span></a> <a class="idref" href="HoTT.Basics.Overture.html#eisretr:193"><span class="id" title="method">eisretr</span></a> (<a class="idref" href="HoTT.Basics.Overture.html#f:190"><span class="id" title="variable">f</span></a> <a class="idref" href="HoTT.Basics.Overture.html#x:195"><span class="id" title="variable">x</span></a>) <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="HoTT.Basics.Overture.html#ap"><span class="id" title="definition">ap</span></a> <a class="idref" href="HoTT.Basics.Overture.html#f:190"><span class="id" title="variable">f</span></a> (<a class="idref" href="HoTT.Basics.Overture.html#eissect:194"><span class="id" title="method">eissect</span></a> <a class="idref" href="HoTT.Basics.Overture.html#x:195"><span class="id" title="variable">x</span></a>) ;<br/>
}.<br/>

<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#eisretr"><span class="id" title="method">eisretr</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>}%<span class="id" title="var">type_scope</span> <span class="id" title="var">f</span>%<span class="id" title="var">function_scope</span> {<span class="id" title="var">_</span>} <span class="id" title="var">_</span>.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#eissect"><span class="id" title="method">eissect</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>}%<span class="id" title="var">type_scope</span> <span class="id" title="var">f</span>%<span class="id" title="var">function_scope</span> {<span class="id" title="var">_</span>} <span class="id" title="var">_</span>.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#eisadj"><span class="id" title="method">eisadj</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>}%<span class="id" title="var">type_scope</span> <span class="id" title="var">f</span>%<span class="id" title="var">function_scope</span> {<span class="id" title="var">_</span>} <span class="id" title="var">_</span>.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#IsEquiv"><span class="id" title="class">IsEquiv</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>}%<span class="id" title="var">type_scope</span> <span class="id" title="var">f</span>%<span class="id" title="var">function_scope</span>.<br/>

<br/>
</div>

<div class="doc">
A record that includes all the data of an adjoint equivalence. 
</div>
<div class="code">
<span class="id" title="var">Cumulative</span> <span class="id" title="keyword">Record</span> <a id="Equiv" class="idref" href="#Equiv"><span class="id" title="record">Equiv</span></a> <a id="A:197" class="idref" href="#A:197"><span class="id" title="binder">A</span></a> <a id="B:198" class="idref" href="#B:198"><span class="id" title="binder">B</span></a> := {<br/>
&nbsp;&nbsp;<a id="equiv_fun" class="idref" href="#equiv_fun"><span class="id" title="projection">equiv_fun</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:197"><span class="id" title="variable">A</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="HoTT.Basics.Overture.html#B:198"><span class="id" title="variable">B</span></a> ;<br/>
&nbsp;&nbsp;<a id="equiv_isequiv" class="idref" href="#equiv_isequiv"><span class="id" title="projection">equiv_isequiv</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#IsEquiv"><span class="id" title="class">IsEquiv</span></a> <a class="idref" href="HoTT.Basics.Overture.html#equiv_fun:200"><span class="id" title="method">equiv_fun</span></a><br/>
}.<br/>

<br/>
<span class="id" title="keyword">Coercion</span> <a class="idref" href="HoTT.Basics.Overture.html#equiv_fun"><span class="id" title="projection">equiv_fun</span></a> <a class="idref" href="HoTT.Basics.Overture.html#equiv_fun"><span class="id" title="projection">:</span></a> <a class="idref" href="HoTT.Basics.Overture.html#equiv_fun"><span class="id" title="projection">Equiv</span></a> <a class="idref" href="HoTT.Basics.Overture.html#equiv_fun"><span class="id" title="projection">&gt;-&gt;</span></a> <a class="idref" href="HoTT.Basics.Overture.html#equiv_fun"><span class="id" title="projection">Funclass</span></a>.<br/>

<br/>
<span class="id" title="keyword">Global</span> <span class="id" title="var">Existing</span> <span class="id" title="keyword">Instance</span> <span class="id" title="var">equiv_isequiv</span>.<br/>

<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#equiv_fun"><span class="id" title="projection">equiv_fun</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#equiv_isequiv"><span class="id" title="projection">equiv_isequiv</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Bind</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">equiv_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="var">Equiv</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="068136b784cb569aaadfa01f234d5c01" class="idref" href="#068136b784cb569aaadfa01f234d5c01"><span class="id" title="notation">&quot;</span></a>A &lt;~&gt; B" := (<a class="idref" href="HoTT.Basics.Overture.html#Equiv"><span class="id" title="record">Equiv</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>) : <span class="id" title="var">type_scope</span>.<br/>

<br/>
</div>

<div class="doc">
A notation for the inverse of an equivalence.  We can apply this to a function as long as there is a typeclass instance asserting it to be an equivalence.  We can also apply it to an element of <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.A"><span class="id" title="variable">A</span></a></span> <span class="inlinecode">&lt;~&gt;</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.B"><span class="id" title="variable">B</span></a></span>, since there is an implicit coercion to <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.A"><span class="id" title="variable">A</span></a></span> <span class="inlinecode">→</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.B"><span class="id" title="variable">B</span></a></span> and also an existing instance of <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#IsEquiv"><span class="id" title="record">IsEquiv</span></a></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Notation</span> <a id="f3f2d22838b594a6e5dbfb541ecf90ae" class="idref" href="#f3f2d22838b594a6e5dbfb541ecf90ae"><span class="id" title="notation">&quot;</span></a>f ^-1" := (@<a class="idref" href="HoTT.Basics.Overture.html#equiv_inv"><span class="id" title="method">equiv_inv</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">f</span> <span class="id" title="var">_</span>) : <span class="id" title="var">function_scope</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab25"></a><h2 class="section">Applying paths between equivalences like functions</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="ap10_equiv" class="idref" href="#ap10_equiv"><span class="id" title="definition">ap10_equiv</span></a> {<a id="A:202" class="idref" href="#A:202"><span class="id" title="binder">A</span></a> <a id="B:203" class="idref" href="#B:203"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>} {<a id="f:204" class="idref" href="#f:204"><span class="id" title="binder">f</span></a> <a id="g:205" class="idref" href="#g:205"><span class="id" title="binder">g</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:202"><span class="id" title="variable">A</span></a> <a class="idref" href="HoTT.Basics.Overture.html#068136b784cb569aaadfa01f234d5c01"><span class="id" title="notation">&lt;~&gt;</span></a> <a class="idref" href="HoTT.Basics.Overture.html#B:203"><span class="id" title="variable">B</span></a>} (<a id="h:206" class="idref" href="#h:206"><span class="id" title="binder">h</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#f:204"><span class="id" title="variable">f</span></a> <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="HoTT.Basics.Overture.html#g:205"><span class="id" title="variable">g</span></a>) : <a class="idref" href="HoTT.Basics.Overture.html#f:204"><span class="id" title="variable">f</span></a> <a class="idref" href="HoTT.Basics.Overture.html#2596316c6f2ff161cb03e25fd8914390"><span class="id" title="notation">==</span></a> <a class="idref" href="HoTT.Basics.Overture.html#g:205"><span class="id" title="variable">g</span></a><br/>
&nbsp;&nbsp;:= <a class="idref" href="HoTT.Basics.Overture.html#ap10"><span class="id" title="definition">ap10</span></a> (<a class="idref" href="HoTT.Basics.Overture.html#ap"><span class="id" title="definition">ap</span></a> <a class="idref" href="HoTT.Basics.Overture.html#equiv_fun"><span class="id" title="projection">equiv_fun</span></a> <a class="idref" href="HoTT.Basics.Overture.html#h:206"><span class="id" title="variable">h</span></a>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab26"></a><h2 class="section">Contractibility and truncation levels</h2>

<div class="paragraph"> </div>

 Truncation measures how complicated a type is.  In this library, a witness that a type is n-truncated is formalized by the <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="record">IsTrunc</span></a></span> <span class="inlinecode"><span class="id" title="var">n</span></span> typeclass.  In many cases, the typeclass machinery of Coq can automatically infer a witness for a type being n-truncated.  Because <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="record">IsTrunc</span></a></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.A"><span class="id" title="variable">A</span></a></span> itself has no computational content (that is, all witnesses of n-truncation of a type are provably equal), it does not matter much which witness Coq infers.  Therefore, the primary concerns in making use of the typeclass machinery are coverage (how many goals can be automatically solved) and speed (how long does it take to solve a goal, and how long does it take to error on a goal we cannot automatically solve).  Careful use of typeclass instances and priorities, which determine the order of typeclass resolution, can be used to effectively increase both the coverage and the speed in cases where the goal is solvable.  Unfortunately, typeclass resolution tends to spin for a while before failing unless you're very, very, very careful.  We currently aim to achieve moderate coverage and fast speed in solvable cases.  How long it takes to fail typeclass resolution is not currently considered, though it would be nice someday to be even more careful about things.

<div class="paragraph"> </div>

In order to achieve moderate coverage and speedy resolution, we currently follow the following principles.  They set up a kind of directed flow of information, intended to prevent cycles and potentially infinite chains, which are often the ways that typeclass resolution gets stuck.

<div class="paragraph"> </div>

<ul class="doclist">
<li> We prefer to reason about <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="record">IsTrunc</span></a></span> <span class="inlinecode">(<a class="idref" href="HoTT.Categories.LaxComma.CoreLaws.html#LaxCommaCategory.lax_comma_category_parts.S"><span class="id" title="variable">S</span></a></span> <span class="inlinecode"><span class="id" title="var">n</span>)</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.A"><span class="id" title="variable">A</span></a></span> rather than <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="record">IsTrunc</span></a></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">(@<a class="idref" href="HoTT.Basics.Overture.html#paths"><span class="id" title="inductive">paths</span></a></span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.A"><span class="id" title="variable">A</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.LaxComma.CoreParts.html#LaxCommaCategoryParts.a"><span class="id" title="projection">a</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.LaxComma.CoreParts.html#LaxCommaCategoryParts.b"><span class="id" title="projection">b</span></a>)</span>.  Whenever we see a statement (or goal) about truncation of paths, we try to turn it into a statement (or goal) about truncation of a (non-<span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#paths"><span class="id" title="inductive">paths</span></a></span>) type.  We do not allow typeclass resolution to go in the reverse direction from <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="record">IsTrunc</span></a></span> <span class="inlinecode">(<a class="idref" href="HoTT.Categories.LaxComma.CoreLaws.html#LaxCommaCategory.lax_comma_category_parts.S"><span class="id" title="variable">S</span></a></span> <span class="inlinecode"><span class="id" title="var">n</span>)</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.A"><span class="id" title="variable">A</span></a></span> to <span class="inlinecode"><span class="id" title="keyword">∀</span></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.LaxComma.CoreParts.html#LaxCommaCategoryParts.a"><span class="id" title="projection">a</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.LaxComma.CoreParts.html#LaxCommaCategoryParts.b"><span class="id" title="projection">b</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.A"><span class="id" title="variable">A</span></a>,</span> <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="record">IsTrunc</span></a></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">(<a class="idref" href="HoTT.Categories.LaxComma.CoreParts.html#LaxCommaCategoryParts.a"><span class="id" title="projection">a</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.LaxComma.CoreParts.html#LaxCommaCategoryParts.b"><span class="id" title="projection">b</span></a>)</span>.

<div class="paragraph"> </div>


</li>
<li> We prefer to reason about syntactically smaller types.  That is, typeclass instances should turn goals of type <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="record">IsTrunc</span></a></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">(<span class="id" title="keyword">∀</span></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.LaxComma.CoreParts.html#LaxCommaCategoryParts.a"><span class="id" title="projection">a</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.A"><span class="id" title="variable">A</span></a>,</span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.DependentProduct.html#dependent_product.P"><span class="id" title="variable">P</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.LaxComma.CoreParts.html#LaxCommaCategoryParts.a"><span class="id" title="projection">a</span></a>)</span> into goals of type <span class="inlinecode"><span class="id" title="keyword">∀</span></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.LaxComma.CoreParts.html#LaxCommaCategoryParts.a"><span class="id" title="projection">a</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.A"><span class="id" title="variable">A</span></a>,</span> <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="record">IsTrunc</span></a></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">(<a class="idref" href="HoTT.Categories.DependentProduct.html#dependent_product.P"><span class="id" title="variable">P</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.LaxComma.CoreParts.html#LaxCommaCategoryParts.a"><span class="id" title="projection">a</span></a>)</span>; and goals of type <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="record">IsTrunc</span></a></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">(<a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.A"><span class="id" title="variable">A</span></a></span> <span class="inlinecode">×</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.B"><span class="id" title="variable">B</span></a>)</span> into the pair of goals of type <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="record">IsTrunc</span></a></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.A"><span class="id" title="variable">A</span></a></span> and <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="record">IsTrunc</span></a></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.B"><span class="id" title="variable">B</span></a></span>; rather than the other way around.  Ideally, we would add similar rules to transform hypotheses in the cases where we can do so.  This rule is not always the one we want, but it seems to heuristically capture the shape of most cases that we want the typeclass machinery to automatically infer.  That is, we often want to infer <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="record">IsTrunc</span></a></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">(<a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.A"><span class="id" title="variable">A</span></a></span> <span class="inlinecode">×</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.B"><span class="id" title="variable">B</span></a>)</span> from <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="record">IsTrunc</span></a></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.A"><span class="id" title="variable">A</span></a></span> and <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="record">IsTrunc</span></a></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.B"><span class="id" title="variable">B</span></a></span>, but we (probably) don't often need to do other simple things with <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="record">IsTrunc</span></a></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">(<a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.A"><span class="id" title="variable">A</span></a></span> <span class="inlinecode">×</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.B"><span class="id" title="variable">B</span></a>)</span> which are broken by that reduction.

</li>
</ul>

<div class="paragraph"> </div>

<a id="lab27"></a><h3 class="section">Contractibility</h3>

<div class="paragraph"> </div>

 A space <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.A"><span class="id" title="variable">A</span></a></span> is contractible if there is a point <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.A"><span class="id" title="variable">A</span></a></span> and a (pointwise) homotopy connecting the identity on <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.A"><span class="id" title="variable">A</span></a></span> to the constant map at <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span>.  Thus an element of <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#contr"><span class="id" title="projection">contr</span></a></span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.A"><span class="id" title="variable">A</span></a></span> is a pair whose first component is a point <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> and the second component is a pointwise retraction of <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.A"><span class="id" title="variable">A</span></a></span> to <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span>. 
<div class="paragraph"> </div>

 We use the <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#Contr_internal"><span class="id" title="record">Contr_internal</span></a></span> record so as not to pollute typeclass search; we only do truncation typeclass search on the <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="record">IsTrunc</span></a></span> datatype, usually.  We will define a notation <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#Contr"><span class="id" title="abbreviation">Contr</span></a></span> which is equivalent to <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#Contr_internal"><span class="id" title="record">Contr_internal</span></a></span>, but picked up by typeclass search.  However, we must make <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#Contr_internal"><span class="id" title="record">Contr_internal</span></a></span> a class so that we pick up typeclasses on <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#center"><span class="id" title="projection">center</span></a></span> and <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#contr"><span class="id" title="projection">contr</span></a></span>.  However, the only typeclass rule we register is the one that turns it into a <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#Contr"><span class="id" title="abbreviation">Contr</span></a></span>/<span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="record">IsTrunc</span></a></span>.  Unfortunately, this means that declaring an instance like <span class="inlinecode"><span class="id" title="keyword">Instance</span></span> <span class="inlinecode"><span class="id" title="var">contr_foo</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#Contr"><span class="id" title="abbreviation">Contr</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Tests.html#Issue_1358.foo"><span class="id" title="axiom">foo</span></a></span> <span class="inlinecode">:=</span> <span class="inlinecode">{</span> <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#center"><span class="id" title="projection">center</span></a></span> <span class="inlinecode">:=</span> <span class="inlinecode"><a class="idref" href="HoTT.Tests.html#Issue_1358.bar"><span class="id" title="definition">bar</span></a></span> <span class="inlinecode">}.</span> will fail with mismatched instances/contexts.  Instead, we must iota expand such definitions to get around Coq's deficiencies, and write <span class="inlinecode"><span class="id" title="keyword">Instance</span></span> <span class="inlinecode"><span class="id" title="var">contr_foo</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#Contr"><span class="id" title="abbreviation">Contr</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Tests.html#Issue_1358.foo"><span class="id" title="axiom">foo</span></a></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="keyword">let</span></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> <span class="inlinecode">:=</span> <span class="inlinecode">{|</span> <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#center"><span class="id" title="projection">center</span></a></span> <span class="inlinecode">:=</span> <span class="inlinecode"><a class="idref" href="HoTT.Tests.html#Issue_1358.bar"><span class="id" title="definition">bar</span></a></span> <span class="inlinecode">|}</span> <span class="inlinecode"><span class="id" title="tactic">in</span></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a>.</span> 
</div>
<div class="code">
<span class="id" title="keyword">Class</span> <a id="Contr_internal" class="idref" href="#Contr_internal"><span class="id" title="record">Contr_internal</span></a> (<a id="A:207" class="idref" href="#A:207"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>) := <a id="Build_Contr" class="idref" href="#Build_Contr"><span class="id" title="constructor">Build_Contr</span></a> {<br/>
&nbsp;&nbsp;<a id="center" class="idref" href="#center"><span class="id" title="projection">center</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:207"><span class="id" title="variable">A</span></a> ;<br/>
&nbsp;&nbsp;<a id="contr" class="idref" href="#contr"><span class="id" title="projection">contr</span></a> : (<a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a id="y:210" class="idref" href="#y:210"><span class="id" title="binder">y</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:207"><span class="id" title="variable">A</span></a><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">,</span></a> <a class="idref" href="HoTT.Basics.Overture.html#center:209"><span class="id" title="method">center</span></a> <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:210"><span class="id" title="variable">y</span></a>)<br/>
}.<br/>

<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#center"><span class="id" title="method">center</span></a> <span class="id" title="var">A</span> {<span class="id" title="var">_</span>}.<br/>

<br/>
</div>

<div class="doc">
<a id="lab28"></a><h3 class="section">Truncation levels</h3>

<div class="paragraph"> </div>

 Truncation measures how complicated a type is in terms of higher path spaces. The (-2)-truncated types are the contractible ones, whose homotopy is completely trivial. The (n+1)-truncated types are those whose path spaces are n-truncated.

<div class="paragraph"> </div>

   Thus, (-1)-truncated means "the space of paths between any two points is contactible". Such a space is necessarily a sub-singleton: any two points are connected by a path which is unique up to homotopy. In other words, (-1)-truncated spaces are truth values (we call them "propositions").

<div class="paragraph"> </div>

   Next, 0-truncated means "the space of paths between any two points is a sub-singleton". Thus, two points might not have any paths between them, or they have a unique path. Such a space may have many points but it is discrete in the sense that all paths are trivial. We call such spaces "sets".

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a id="trunc_index" class="idref" href="#trunc_index"><span class="id" title="inductive">trunc_index</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
| <a id="minus_two" class="idref" href="#minus_two"><span class="id" title="constructor">minus_two</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#trunc_index:212"><span class="id" title="inductive">trunc_index</span></a><br/>
| <a id="trunc_S" class="idref" href="#trunc_S"><span class="id" title="constructor">trunc_S</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#trunc_index:212"><span class="id" title="inductive">trunc_index</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="HoTT.Basics.Overture.html#trunc_index:212"><span class="id" title="inductive">trunc_index</span></a>.<br/>

<br/>
<span class="id" title="keyword">Scheme</span> <a id="trunc_index_ind" class="idref" href="#trunc_index_ind"><span class="id" title="definition">trunc_index_ind</span></a> := <span class="id" title="keyword">Induction</span> <span class="id" title="keyword">for</span> <a class="idref" href="HoTT.Basics.Overture.html#trunc_index"><span class="id" title="inductive">trunc_index</span></a> <span class="id" title="keyword">Sort</span> <span class="id" title="keyword">Type</span>.<br/>
<span class="id" title="keyword">Scheme</span> <a id="trunc_index_rec" class="idref" href="#trunc_index_rec"><span class="id" title="definition">trunc_index_rec</span></a> := <span class="id" title="var">Minimality</span> <span class="id" title="keyword">for</span> <a class="idref" href="HoTT.Basics.Overture.html#trunc_index"><span class="id" title="inductive">trunc_index</span></a> <span class="id" title="keyword">Sort</span> <span class="id" title="keyword">Type</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="trunc_index_rect" class="idref" href="#trunc_index_rect"><span class="id" title="definition">trunc_index_rect</span></a> := <a class="idref" href="HoTT.Basics.Overture.html#trunc_index_ind"><span class="id" title="definition">trunc_index_ind</span></a>.<br/>

<br/>
</div>

<div class="doc">
We will use <span class="inlinecode"><span class="id" title="keyword">Notation</span></span> for <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#trunc_index"><span class="id" title="inductive">trunc_index</span></a></span>es, so define a scope for them here. 
</div>
<div class="code">
<span class="id" title="keyword">Bind</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">trunc_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="var">trunc_index</span>.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#trunc_S"><span class="id" title="constructor">trunc_S</span></a> <span class="id" title="var">_</span>%<span class="id" title="var">trunc_scope</span>.<br/>

<br/>
</div>

<div class="doc">
Include the basic numerals, so we don't need to go through the coercion from <span class="inlinecode"><a class="idref" href="HoTT.Tests.html#Issue754_1.nat"><span class="id" title="inductive">nat</span></a></span>, and so that we get the right binding with <span class="inlinecode"><span class="id" title="var">trunc_scope</span></span>.  Note that putting the negative numbers at level 0 allows us to override the <span class="inlinecode">-</span> <span class="inlinecode"><span class="id" title="var">_</span></span> notation for negative numbers. 
</div>
<div class="code">
<span class="id" title="keyword">Notation</span> <a id="b76e54fb8c8bc6b885dddb77bd7d01b8" class="idref" href="#b76e54fb8c8bc6b885dddb77bd7d01b8"><span class="id" title="notation">&quot;</span></a>n .+1" := (<a class="idref" href="HoTT.Basics.Overture.html#trunc_S"><span class="id" title="constructor">trunc_S</span></a> <span class="id" title="var">n</span>) : <span class="id" title="var">trunc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="bda89d73ec4a8f23ae92b565ffb5aaa6" class="idref" href="#bda89d73ec4a8f23ae92b565ffb5aaa6"><span class="id" title="notation">&quot;</span></a>n .+1" := (<a class="idref" href="Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>) : <span class="id" title="var">nat_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="ca42b5f7240c4d2bdbfa8417567961e4" class="idref" href="#ca42b5f7240c4d2bdbfa8417567961e4"><span class="id" title="notation">&quot;</span></a>n .+2" := (<span class="id" title="var">n</span><a class="idref" href="HoTT.Basics.Overture.html#b76e54fb8c8bc6b885dddb77bd7d01b8"><span class="id" title="notation">.+1.+1</span></a>)%<span class="id" title="var">trunc</span> : <span class="id" title="var">trunc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="bc63483175fac06bcd5541a5e9093b18" class="idref" href="#bc63483175fac06bcd5541a5e9093b18"><span class="id" title="notation">&quot;</span></a>n .+2" := (<span class="id" title="var">n</span><a class="idref" href="HoTT.Basics.Overture.html#bda89d73ec4a8f23ae92b565ffb5aaa6"><span class="id" title="notation">.+1.+1</span></a>)%<span class="id" title="var">nat</span>   : <span class="id" title="var">nat_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="10fc77c461ebbbc67176dfb3cae95a72" class="idref" href="#10fc77c461ebbbc67176dfb3cae95a72"><span class="id" title="notation">&quot;</span></a>n .+3" := (<span class="id" title="var">n</span><a class="idref" href="HoTT.Basics.Overture.html#b76e54fb8c8bc6b885dddb77bd7d01b8"><span class="id" title="notation">.+1</span></a><a class="idref" href="HoTT.Basics.Overture.html#ca42b5f7240c4d2bdbfa8417567961e4"><span class="id" title="notation">.+2</span></a>)%<span class="id" title="var">trunc</span> : <span class="id" title="var">trunc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="331a87f8f0f3c9336601c27f1e458dc3" class="idref" href="#331a87f8f0f3c9336601c27f1e458dc3"><span class="id" title="notation">&quot;</span></a>n .+3" := (<span class="id" title="var">n</span><a class="idref" href="HoTT.Basics.Overture.html#bda89d73ec4a8f23ae92b565ffb5aaa6"><span class="id" title="notation">.+1</span></a><a class="idref" href="HoTT.Basics.Overture.html#bc63483175fac06bcd5541a5e9093b18"><span class="id" title="notation">.+2</span></a>)%<span class="id" title="var">nat</span>   : <span class="id" title="var">nat_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="0e74824220dac13bb350c8ce2458ad23" class="idref" href="#0e74824220dac13bb350c8ce2458ad23"><span class="id" title="notation">&quot;</span></a>n .+4" := (<span class="id" title="var">n</span><a class="idref" href="HoTT.Basics.Overture.html#b76e54fb8c8bc6b885dddb77bd7d01b8"><span class="id" title="notation">.+1</span></a><a class="idref" href="HoTT.Basics.Overture.html#10fc77c461ebbbc67176dfb3cae95a72"><span class="id" title="notation">.+3</span></a>)%<span class="id" title="var">trunc</span> : <span class="id" title="var">trunc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="854d640e6c55155f8eda90636a67ef35" class="idref" href="#854d640e6c55155f8eda90636a67ef35"><span class="id" title="notation">&quot;</span></a>n .+4" := (<span class="id" title="var">n</span><a class="idref" href="HoTT.Basics.Overture.html#bda89d73ec4a8f23ae92b565ffb5aaa6"><span class="id" title="notation">.+1</span></a><a class="idref" href="HoTT.Basics.Overture.html#331a87f8f0f3c9336601c27f1e458dc3"><span class="id" title="notation">.+3</span></a>)%<span class="id" title="var">nat</span>   : <span class="id" title="var">nat_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="ba79f1be6d9db398bf949da51dd4368c" class="idref" href="#ba79f1be6d9db398bf949da51dd4368c"><span class="id" title="notation">&quot;</span></a>n .+5" := (<span class="id" title="var">n</span><a class="idref" href="HoTT.Basics.Overture.html#b76e54fb8c8bc6b885dddb77bd7d01b8"><span class="id" title="notation">.+1</span></a><a class="idref" href="HoTT.Basics.Overture.html#0e74824220dac13bb350c8ce2458ad23"><span class="id" title="notation">.+4</span></a>)%<span class="id" title="var">trunc</span> : <span class="id" title="var">trunc_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="f78f3853e8d6bffffe9b6bc1ce727fd3" class="idref" href="#f78f3853e8d6bffffe9b6bc1ce727fd3"><span class="id" title="notation">&quot;</span></a>n .+5" := (<span class="id" title="var">n</span><a class="idref" href="HoTT.Basics.Overture.html#bda89d73ec4a8f23ae92b565ffb5aaa6"><span class="id" title="notation">.+1</span></a><a class="idref" href="HoTT.Basics.Overture.html#854d640e6c55155f8eda90636a67ef35"><span class="id" title="notation">.+4</span></a>)%<span class="id" title="var">nat</span>   : <span class="id" title="var">nat_scope</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">trunc_scope</span>.<br/>

<br/>
</div>

<div class="doc">
Further notation for truncation levels is introducted in Trunc.v. 
<div class="paragraph"> </div>

 n-truncatedness is defined by recursion on <span class="inlinecode"><span class="id" title="var">n</span></span>.  We could simply define <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="record">IsTrunc</span></a></span> as a fixpoint and an <span class="inlinecode"><span class="id" title="var">Existing</span></span> <span class="inlinecode"><span class="id" title="keyword">Class</span></span>, but we want to also declare <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="record">IsTrunc</span></a></span> to be <span class="inlinecode"><span class="id" title="tactic">simpl</span></span> <span class="inlinecode"><span class="id" title="var">nomatch</span></span>, so that when we say <span class="inlinecode"><span class="id" title="tactic">simpl</span></span> or <span class="inlinecode"><span class="id" title="var">cbn</span></span>, <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="record">IsTrunc</span></a></span> <span class="inlinecode"><span class="id" title="var">n</span>.+1</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.A"><span class="id" title="variable">A</span></a></span> doesn't get unfolded to <span class="inlinecode"><span class="id" title="keyword">∀</span></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Functor.Attributes.html#fully_faithful_helpers.y"><span class="id" title="variable">y</span></a>:<a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.A"><span class="id" title="variable">A</span></a>,</span> <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="record">IsTrunc</span></a></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">(<a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Functor.Attributes.html#fully_faithful_helpers.y"><span class="id" title="variable">y</span></a>)</span>.  But we also want to be able to use this equality, e.g. by proving <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="record">IsTrunc</span></a></span> <span class="inlinecode"><span class="id" title="var">n</span>.+1</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.A"><span class="id" title="variable">A</span></a></span> starting with <span class="inlinecode"><span class="id" title="tactic">intros</span></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Functor.Attributes.html#fully_faithful_helpers.y"><span class="id" title="variable">y</span></a></span>, and if <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="record">IsTrunc</span></a></span> is a fixpoint declared as <span class="inlinecode"><span class="id" title="tactic">simpl</span></span> <span class="inlinecode"><span class="id" title="var">nomatch</span></span> then that doesn't work, because <span class="inlinecode"><span class="id" title="tactic">intros</span></span> uses <span class="inlinecode"><span class="id" title="tactic">hnf</span></span> to expose a <span class="inlinecode"><span class="id" title="keyword">∀</span></span> and <span class="inlinecode"><span class="id" title="tactic">hnf</span></span> respects <span class="inlinecode"><span class="id" title="tactic">simpl</span></span> <span class="inlinecode"><span class="id" title="var">nomatch</span></span> on fixpoints.  But we can make it work if we define the fixpoint separately as <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#IsTrunc_internal"><span class="id" title="definition">IsTrunc_internal</span></a></span> and then take the class <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="record">IsTrunc</span></a></span> to be a definitional wrapper around it, since <span class="inlinecode"><span class="id" title="tactic">hnf</span></span> is willing to unfold non-fixpoints even if they are defined as <span class="inlinecode"><span class="id" title="tactic">simpl</span></span> <span class="inlinecode"><span class="id" title="var">never</span></span>.  This behavior of <span class="inlinecode"><span class="id" title="tactic">hnf</span></span> is arguably questionable (see https://github.com/coq/coq/issues/11619), but it is useful for us here. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="IsTrunc_internal" class="idref" href="#IsTrunc_internal"><span class="id" title="definition">IsTrunc_internal</span></a> (<a id="n:214" class="idref" href="#n:214"><span class="id" title="binder">n</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#trunc_index"><span class="id" title="inductive">trunc_index</span></a>) (<a id="A:215" class="idref" href="#A:215"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>) : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="HoTT.Basics.Overture.html#n:214"><span class="id" title="variable">n</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="HoTT.Basics.Overture.html#minus_two"><span class="id" title="constructor">minus_two</span></a> ⇒ <a class="idref" href="HoTT.Basics.Overture.html#Contr_internal"><span class="id" title="class">Contr_internal</span></a> <a class="idref" href="HoTT.Basics.Overture.html#A:215"><span class="id" title="variable">A</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">n'</span><a class="idref" href="HoTT.Basics.Overture.html#b76e54fb8c8bc6b885dddb77bd7d01b8"><span class="id" title="notation">.+1</span></a> ⇒ <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">(</span></a><a id="x:218" class="idref" href="#x:218"><span class="id" title="binder">x</span></a> <a id="y:219" class="idref" href="#y:219"><span class="id" title="binder">y</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:215"><span class="id" title="variable">A</span></a><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">),</span></a> <a class="idref" href="HoTT.Basics.Overture.html#IsTrunc_internal:216"><span class="id" title="definition">IsTrunc_internal</span></a> <span class="id" title="var">n'</span> (<a class="idref" href="HoTT.Basics.Overture.html#x:218"><span class="id" title="variable">x</span></a> <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:219"><span class="id" title="variable">y</span></a>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#IsTrunc_internal"><span class="id" title="definition">IsTrunc_internal</span></a> <span class="id" title="var">n</span> <span class="id" title="var">A</span> : <span class="id" title="tactic">simpl</span> <span class="id" title="var">nomatch</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <a id="IsTrunc" class="idref" href="#IsTrunc"><span class="id" title="record">IsTrunc</span></a> (<a id="n:220" class="idref" href="#n:220"><span class="id" title="binder">n</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#trunc_index"><span class="id" title="inductive">trunc_index</span></a>) (<a id="A:221" class="idref" href="#A:221"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>) : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;<a id="Trunc_is_trunc" class="idref" href="#Trunc_is_trunc"><span class="id" title="projection">Trunc_is_trunc</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#IsTrunc_internal"><span class="id" title="definition">IsTrunc_internal</span></a> <a class="idref" href="HoTT.Basics.Overture.html#n:220"><span class="id" title="variable">n</span></a> <a class="idref" href="HoTT.Basics.Overture.html#A:221"><span class="id" title="variable">A</span></a>.<br/>

<br/>
</div>

<div class="doc">
We use the principle that we should always be doing typeclass resolution on truncation of non-equality types.  We try to change the hypotheses and goals so that they never mention something like <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="record">IsTrunc</span></a></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">(<span class="id" title="var">_</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">_</span>)</span> and instead say <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="record">IsTrunc</span></a></span> <span class="inlinecode">(<a class="idref" href="HoTT.Categories.LaxComma.CoreLaws.html#LaxCommaCategory.lax_comma_category_parts.S"><span class="id" title="variable">S</span></a></span> <span class="inlinecode"><span class="id" title="var">n</span>)</span> <span class="inlinecode"><span class="id" title="var">_</span></span>.  If you're evil enough that some of your paths <span class="inlinecode"><a class="idref" href="HoTT.Categories.LaxComma.CoreParts.html#LaxCommaCategoryParts.a"><span class="id" title="projection">a</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.LaxComma.CoreParts.html#LaxCommaCategoryParts.b"><span class="id" title="projection">b</span></a></span> are n-truncated, but others are not, then you'll have to either reason manually or add some (local) hints with higher priority than the hint below, or generalize your equality type so that it's not a path anymore. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Type</span><span class="id" title="var">classes</span> <span class="id" title="keyword">Opaque</span> <span class="id" title="var">IsTrunc</span>. 
<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="class">IsTrunc</span></a> : <span class="id" title="tactic">simpl</span> <span class="id" title="var">never</span>. 
<br/>
<span class="id" title="keyword">Global Instance</span> <a id="istrunc_paths" class="idref" href="#istrunc_paths"><span class="id" title="instance">istrunc_paths</span></a> (<a id="A:224" class="idref" href="#A:224"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>) <a id="n:225" class="idref" href="#n:225"><span class="id" title="binder">n</span></a> `{<a id="H:226" class="idref" href="#H:226"><span class="id" title="binder">H</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="class">IsTrunc</span></a> <a class="idref" href="HoTT.Basics.Overture.html#n:225"><span class="id" title="variable">n</span></a><a class="idref" href="HoTT.Basics.Overture.html#b76e54fb8c8bc6b885dddb77bd7d01b8"><span class="id" title="notation">.+1</span></a> <a class="idref" href="HoTT.Basics.Overture.html#A:224"><span class="id" title="variable">A</span></a>} (<a id="x:227" class="idref" href="#x:227"><span class="id" title="binder">x</span></a> <a id="y:228" class="idref" href="#y:228"><span class="id" title="binder">y</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:224"><span class="id" title="variable">A</span></a>)<br/>
: <a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="class">IsTrunc</span></a> <a class="idref" href="HoTT.Basics.Overture.html#n:225"><span class="id" title="variable">n</span></a> (<a class="idref" href="HoTT.Basics.Overture.html#x:227"><span class="id" title="variable">x</span></a> <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:228"><span class="id" title="variable">y</span></a>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">H</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>. 
<br/>
<span class="id" title="var">Existing</span> <span class="id" title="keyword">Class</span> <span class="id" title="var">IsTrunc_internal</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>]<br/>
<span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Extern</span> 0 (<a class="idref" href="HoTT.Basics.Overture.html#IsTrunc_internal"><span class="id" title="class">IsTrunc_internal</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ⇒ <span class="id" title="tactic">progress</span> <span class="id" title="tactic">change</span> <a class="idref" href="HoTT.Basics.Overture.html#IsTrunc_internal"><span class="id" title="class">IsTrunc_internal</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="class">IsTrunc</span></a> <span class="id" title="tactic">in</span> × : <span class="id" title="var">typeclass_instances</span>. 
<br/>
#[<span class="id" title="var">export</span>]<br/>
<span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Extern</span> 0 (<a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="class">IsTrunc</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ⇒ <span class="id" title="tactic">progress</span> <span class="id" title="tactic">change</span> <a class="idref" href="HoTT.Basics.Overture.html#IsTrunc_internal"><span class="id" title="class">IsTrunc_internal</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="class">IsTrunc</span></a> <span class="id" title="tactic">in</span> × : <span class="id" title="var">typeclass_instances</span>. 
<br/>
</div>

<div class="doc">
Picking up the <span class="inlinecode"><span class="id" title="keyword">∀</span></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Functor.Attributes.html#fully_faithful_helpers.y"><span class="id" title="variable">y</span></a>,</span> <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="record">IsTrunc</span></a></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">(<a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Functor.Attributes.html#fully_faithful_helpers.y"><span class="id" title="variable">y</span></a>)</span> instances in the hypotheses is much tricker.  We could do something evil where we declare an empty typeclass like <span class="inlinecode"><span class="id" title="var">IsTruncSimplification</span></span> and use the typeclass as a proxy for allowing typeclass machinery to factor nested <span class="inlinecode"><span class="id" title="keyword">∀</span></span>s into the <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="record">IsTrunc</span></a></span> via backward reasoning on the type of the hypothesis... but, that's rather complicated, so we instead explicitly list out a few common cases.  It should be clear how to extend the pattern. 
</div>
<div class="code">
#[<span class="id" title="var">export</span>]<br/>
<span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Extern</span> 10 ⇒<br/>
<span class="id" title="tactic">progress</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id" title="var">H</span> : <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a id="x:231" class="idref" href="#x:231"><span class="id" title="binder">x</span></a> <a id="y:232" class="idref" href="#y:232"><span class="id" title="binder">y</span></a> : ?<span class="id" title="var">T</span><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">,</span></a> <a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="class">IsTrunc</span></a> ?<span class="id" title="var">n</span> (<a class="idref" href="HoTT.Basics.Overture.html#x:229"><span class="id" title="variable">x</span></a> <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:230"><span class="id" title="variable">y</span></a>) |- <span class="id" title="var">_</span> ]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⇒ <span class="id" title="tactic">change</span> (<a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="class">IsTrunc</span></a> <span class="id" title="var">n</span><a class="idref" href="HoTT.Basics.Overture.html#b76e54fb8c8bc6b885dddb77bd7d01b8"><span class="id" title="notation">.+1</span></a> <span class="id" title="var">T</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id" title="var">H</span> : <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">(</span></a><a id="a:236" class="idref" href="#a:236"><span class="id" title="binder">a</span></a> : ?<span class="id" title="var">A</span>) (<a id="x:237" class="idref" href="#x:237"><span class="id" title="binder">x</span></a> <a id="y:238" class="idref" href="#y:238"><span class="id" title="binder">y</span></a> : @?<span class="id" title="var">T</span> <a class="idref" href="HoTT.Basics.Overture.html#a:233"><span class="id" title="variable">a</span></a><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">),</span></a> <a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="class">IsTrunc</span></a> ?<span class="id" title="var">n</span> (<a class="idref" href="HoTT.Basics.Overture.html#x:234"><span class="id" title="variable">x</span></a> <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:235"><span class="id" title="variable">y</span></a>) |- <span class="id" title="var">_</span> ]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⇒ <span class="id" title="tactic">change</span> (<a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a id="a:278" class="idref" href="#a:278"><span class="id" title="binder">a</span></a> : <span class="id" title="var">A</span><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">,</span></a> <a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="class">IsTrunc</span></a> <span class="id" title="var">n</span><a class="idref" href="HoTT.Basics.Overture.html#b76e54fb8c8bc6b885dddb77bd7d01b8"><span class="id" title="notation">.+1</span></a> (<span class="id" title="var">T</span> <a class="idref" href="HoTT.Basics.Overture.html#a:278"><span class="id" title="variable">a</span></a>)) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">cbv</span> <span class="id" title="keyword">beta</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id" title="var">H</span> : <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">(</span></a><a id="a:243" class="idref" href="#a:243"><span class="id" title="binder">a</span></a> : ?<span class="id" title="var">A</span>) (<a id="b:244" class="idref" href="#b:244"><span class="id" title="binder">b</span></a> : @?<span class="id" title="var">B</span> <a class="idref" href="HoTT.Basics.Overture.html#a:239"><span class="id" title="variable">a</span></a>) (<a id="x:245" class="idref" href="#x:245"><span class="id" title="binder">x</span></a> <a id="y:246" class="idref" href="#y:246"><span class="id" title="binder">y</span></a> : @?<span class="id" title="var">T</span> <a class="idref" href="HoTT.Basics.Overture.html#a:239"><span class="id" title="variable">a</span></a> <a class="idref" href="HoTT.Basics.Overture.html#b:240"><span class="id" title="variable">b</span></a><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">),</span></a> <a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="class">IsTrunc</span></a> ?<span class="id" title="var">n</span> (<a class="idref" href="HoTT.Basics.Overture.html#x:241"><span class="id" title="variable">x</span></a> <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:242"><span class="id" title="variable">y</span></a>) |- <span class="id" title="var">_</span> ]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⇒ <span class="id" title="tactic">change</span> (<a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">(</span></a><a id="a:276" class="idref" href="#a:276"><span class="id" title="binder">a</span></a> : <span class="id" title="var">A</span>) (<a id="b:277" class="idref" href="#b:277"><span class="id" title="binder">b</span></a> : <span class="id" title="var">B</span> <a class="idref" href="HoTT.Basics.Overture.html#a:276"><span class="id" title="variable">a</span></a><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">),</span></a> <a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="class">IsTrunc</span></a> <span class="id" title="var">n</span><a class="idref" href="HoTT.Basics.Overture.html#b76e54fb8c8bc6b885dddb77bd7d01b8"><span class="id" title="notation">.+1</span></a> (<span class="id" title="var">T</span> <a class="idref" href="HoTT.Basics.Overture.html#a:276"><span class="id" title="variable">a</span></a> <a class="idref" href="HoTT.Basics.Overture.html#b:277"><span class="id" title="variable">b</span></a>)) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">cbv</span> <span class="id" title="keyword">beta</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id" title="var">H</span> : <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">(</span></a><a id="a:252" class="idref" href="#a:252"><span class="id" title="binder">a</span></a> : ?<span class="id" title="var">A</span>) (<a id="b:253" class="idref" href="#b:253"><span class="id" title="binder">b</span></a> : @?<span class="id" title="var">B</span> <a class="idref" href="HoTT.Basics.Overture.html#a:247"><span class="id" title="variable">a</span></a>) (<a id="c:254" class="idref" href="#c:254"><span class="id" title="binder">c</span></a> : @?<span class="id" title="var">C</span> <a class="idref" href="HoTT.Basics.Overture.html#a:247"><span class="id" title="variable">a</span></a> <a class="idref" href="HoTT.Basics.Overture.html#b:248"><span class="id" title="variable">b</span></a>) (<a id="x:255" class="idref" href="#x:255"><span class="id" title="binder">x</span></a> <a id="y:256" class="idref" href="#y:256"><span class="id" title="binder">y</span></a> : @?<span class="id" title="var">T</span> <a class="idref" href="HoTT.Basics.Overture.html#a:247"><span class="id" title="variable">a</span></a> <a class="idref" href="HoTT.Basics.Overture.html#b:248"><span class="id" title="variable">b</span></a> <a class="idref" href="HoTT.Basics.Overture.html#c:249"><span class="id" title="variable">c</span></a><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">),</span></a> <a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="class">IsTrunc</span></a> ?<span class="id" title="var">n</span> (<a class="idref" href="HoTT.Basics.Overture.html#x:250"><span class="id" title="variable">x</span></a> <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:251"><span class="id" title="variable">y</span></a>) |- <span class="id" title="var">_</span> ]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⇒ <span class="id" title="tactic">change</span> (<a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">(</span></a><a id="a:273" class="idref" href="#a:273"><span class="id" title="binder">a</span></a> : <span class="id" title="var">A</span>) (<a id="b:274" class="idref" href="#b:274"><span class="id" title="binder">b</span></a> : <span class="id" title="var">B</span> <a class="idref" href="HoTT.Basics.Overture.html#a:273"><span class="id" title="variable">a</span></a>) (<a id="c:275" class="idref" href="#c:275"><span class="id" title="binder">c</span></a> : <span class="id" title="var">C</span> <a class="idref" href="HoTT.Basics.Overture.html#a:273"><span class="id" title="variable">a</span></a> <a class="idref" href="HoTT.Basics.Overture.html#b:274"><span class="id" title="variable">b</span></a><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">),</span></a> <a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="class">IsTrunc</span></a> <span class="id" title="var">n</span><a class="idref" href="HoTT.Basics.Overture.html#b76e54fb8c8bc6b885dddb77bd7d01b8"><span class="id" title="notation">.+1</span></a> (<span class="id" title="var">T</span> <a class="idref" href="HoTT.Basics.Overture.html#a:273"><span class="id" title="variable">a</span></a> <a class="idref" href="HoTT.Basics.Overture.html#b:274"><span class="id" title="variable">b</span></a> <a class="idref" href="HoTT.Basics.Overture.html#c:275"><span class="id" title="variable">c</span></a>)) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">cbv</span> <span class="id" title="keyword">beta</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id" title="var">H</span> : <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">(</span></a><a id="a:263" class="idref" href="#a:263"><span class="id" title="binder">a</span></a> : ?<span class="id" title="var">A</span>) (<a id="b:264" class="idref" href="#b:264"><span class="id" title="binder">b</span></a> : @?<span class="id" title="var">B</span> <a class="idref" href="HoTT.Basics.Overture.html#a:257"><span class="id" title="variable">a</span></a>) (<a id="c:265" class="idref" href="#c:265"><span class="id" title="binder">c</span></a> : @?<span class="id" title="var">C</span> <a class="idref" href="HoTT.Basics.Overture.html#a:257"><span class="id" title="variable">a</span></a> <a class="idref" href="HoTT.Basics.Overture.html#b:258"><span class="id" title="variable">b</span></a>) (<a id="d:266" class="idref" href="#d:266"><span class="id" title="binder">d</span></a> : @?<span class="id" title="var">D</span> <a class="idref" href="HoTT.Basics.Overture.html#a:257"><span class="id" title="variable">a</span></a> <a class="idref" href="HoTT.Basics.Overture.html#b:258"><span class="id" title="variable">b</span></a> <a class="idref" href="HoTT.Basics.Overture.html#c:259"><span class="id" title="variable">c</span></a>) (<a id="x:267" class="idref" href="#x:267"><span class="id" title="binder">x</span></a> <a id="y:268" class="idref" href="#y:268"><span class="id" title="binder">y</span></a> : @?<span class="id" title="var">T</span> <a class="idref" href="HoTT.Basics.Overture.html#a:257"><span class="id" title="variable">a</span></a> <a class="idref" href="HoTT.Basics.Overture.html#b:258"><span class="id" title="variable">b</span></a> <a class="idref" href="HoTT.Basics.Overture.html#c:259"><span class="id" title="variable">c</span></a> <a class="idref" href="HoTT.Basics.Overture.html#d:260"><span class="id" title="variable">d</span></a><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">),</span></a> <a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="class">IsTrunc</span></a> ?<span class="id" title="var">n</span> (<a class="idref" href="HoTT.Basics.Overture.html#x:261"><span class="id" title="variable">x</span></a> <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:262"><span class="id" title="variable">y</span></a>) |- <span class="id" title="var">_</span> ]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⇒ <span class="id" title="tactic">change</span> (<a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">(</span></a><a id="a:269" class="idref" href="#a:269"><span class="id" title="binder">a</span></a> : <span class="id" title="var">A</span>) (<a id="b:270" class="idref" href="#b:270"><span class="id" title="binder">b</span></a> : <span class="id" title="var">B</span> <a class="idref" href="HoTT.Basics.Overture.html#a:269"><span class="id" title="variable">a</span></a>) (<a id="c:271" class="idref" href="#c:271"><span class="id" title="binder">c</span></a> : <span class="id" title="var">C</span> <a class="idref" href="HoTT.Basics.Overture.html#a:269"><span class="id" title="variable">a</span></a> <a class="idref" href="HoTT.Basics.Overture.html#b:270"><span class="id" title="variable">b</span></a>) (<a id="d:272" class="idref" href="#d:272"><span class="id" title="binder">d</span></a> : <span class="id" title="var">D</span> <a class="idref" href="HoTT.Basics.Overture.html#a:269"><span class="id" title="variable">a</span></a> <a class="idref" href="HoTT.Basics.Overture.html#b:270"><span class="id" title="variable">b</span></a> <a class="idref" href="HoTT.Basics.Overture.html#c:271"><span class="id" title="variable">c</span></a><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">),</span></a> <a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="class">IsTrunc</span></a> <span class="id" title="var">n</span><a class="idref" href="HoTT.Basics.Overture.html#b76e54fb8c8bc6b885dddb77bd7d01b8"><span class="id" title="notation">.+1</span></a> (<span class="id" title="var">T</span> <a class="idref" href="HoTT.Basics.Overture.html#a:269"><span class="id" title="variable">a</span></a> <a class="idref" href="HoTT.Basics.Overture.html#b:270"><span class="id" title="variable">b</span></a> <a class="idref" href="HoTT.Basics.Overture.html#c:271"><span class="id" title="variable">c</span></a> <a class="idref" href="HoTT.Basics.Overture.html#d:272"><span class="id" title="variable">d</span></a>)) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">cbv</span> <span class="id" title="keyword">beta</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> : <span class="id" title="var">core</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="Contr" class="idref" href="#Contr"><span class="id" title="abbreviation">Contr</span></a> := (<a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="class">IsTrunc</span></a> <a class="idref" href="HoTT.Basics.Overture.html#minus_two"><span class="id" title="constructor">minus_two</span></a>).<br/>
<span class="id" title="keyword">Notation</span> <a id="IsHProp" class="idref" href="#IsHProp"><span class="id" title="abbreviation">IsHProp</span></a> := (<a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="class">IsTrunc</span></a> <a class="idref" href="HoTT.Basics.Overture.html#minus_two"><span class="id" title="constructor">minus_two</span></a><a class="idref" href="HoTT.Basics.Overture.html#b76e54fb8c8bc6b885dddb77bd7d01b8"><span class="id" title="notation">.+1</span></a>).<br/>
<span class="id" title="keyword">Notation</span> <a id="IsHSet" class="idref" href="#IsHSet"><span class="id" title="abbreviation">IsHSet</span></a> := (<a class="idref" href="HoTT.Basics.Overture.html#IsTrunc"><span class="id" title="class">IsTrunc</span></a> <a class="idref" href="HoTT.Basics.Overture.html#minus_two"><span class="id" title="constructor">minus_two</span></a><a class="idref" href="HoTT.Basics.Overture.html#ca42b5f7240c4d2bdbfa8417567961e4"><span class="id" title="notation">.+2</span></a>).<br/>

<br/>
#[<span class="id" title="var">export</span>]<br/>
<span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Extern</span> 0 ⇒ <span class="id" title="tactic">progress</span> <span class="id" title="tactic">change</span> <a class="idref" href="HoTT.Basics.Overture.html#Contr_internal"><span class="id" title="class">Contr_internal</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="HoTT.Basics.Overture.html#Contr"><span class="id" title="abbreviation">Contr</span></a> <span class="id" title="tactic">in</span> × : <span class="id" title="var">typeclass_instances</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab29"></a><h3 class="section">Simple induction</h3>

<div class="paragraph"> </div>

 The following tactic is designed to be more or less interchangeable with <span class="inlinecode"><span class="id" title="tactic">induction</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode"><span class="id" title="keyword">as</span></span> <span class="inlinecode">[</span> <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="var">n'</span></span> <span class="inlinecode"><span class="id" title="var">IH</span></span> <span class="inlinecode">]</span> whenever <span class="inlinecode"><span class="id" title="var">n</span></span> is a <span class="inlinecode"><a class="idref" href="HoTT.Tests.html#Issue754_1.nat"><span class="id" title="inductive">nat</span></a></span> or a <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#trunc_index"><span class="id" title="inductive">trunc_index</span></a></span>.  The difference is that it produces proof terms involving <span class="inlinecode"><span class="id" title="keyword">match</span></span> and <span class="inlinecode"><span class="id" title="keyword">fix</span></span> explicitly rather than <span class="inlinecode"><a class="idref" href="HoTT.Spaces.Nat.html#nat_ind"><span class="id" title="definition">nat_ind</span></a></span> or <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#trunc_index_ind"><span class="id" title="definition">trunc_index_ind</span></a></span>, and therefore does not introduce higher universe parameters. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">simple_induction</span> <span class="id" title="var">n</span> <span class="id" title="var">n'</span> <span class="id" title="var">IH</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">n</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fix</span> <span class="id" title="var">IH</span> 1;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [| <span class="id" title="var">n'</span>];<br/>
&nbsp;&nbsp;[ <span class="id" title="tactic">clear</span> <span class="id" title="var">IH</span> | <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IH</span> <span class="id" title="var">n'</span>) ].<br/>

<br/>
</div>

<div class="doc">
<a id="lab30"></a><h3 class="section">Truncated relations</h3>

<div class="paragraph"> </div>

 Hprop-valued relations.  Making this a <span class="inlinecode"><span class="id" title="keyword">Notation</span></span> rather than a <span class="inlinecode"><span class="id" title="keyword">Definition</span></span> enables typeclass resolution to pick it up easily.  We include the base type <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.A"><span class="id" title="variable">A</span></a></span> in the notation since otherwise e.g. <span class="inlinecode"><span class="id" title="keyword">∀</span></span> <span class="inlinecode">(<a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Functor.Attributes.html#fully_faithful_helpers.y"><span class="id" title="variable">y</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.A"><span class="id" title="variable">A</span></a>)</span> <span class="inlinecode">(<a class="idref" href="Coq.Init.Logic_Type.html#identity_is_a_congruence.z"><span class="id" title="variable">z</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.B"><span class="id" title="variable">B</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Functor.Attributes.html#fully_faithful_helpers.y"><span class="id" title="variable">y</span></a>),</span> <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#IsHProp"><span class="id" title="abbreviation">IsHProp</span></a></span> <span class="inlinecode">(<a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.C"><span class="id" title="variable">C</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Functor.Attributes.html#fully_faithful_helpers.y"><span class="id" title="variable">y</span></a></span> <span class="inlinecode"><a class="idref" href="Coq.Init.Logic_Type.html#identity_is_a_congruence.z"><span class="id" title="variable">z</span></a>)</span> will get displayed as <span class="inlinecode"><span class="id" title="keyword">∀</span></span> <span class="inlinecode">(<a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.A"><span class="id" title="variable">A</span></a>),</span> <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#is_mere_relation"><span class="id" title="abbreviation">is_mere_relation</span></a></span> <span class="inlinecode">(<a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.C"><span class="id" title="variable">C</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a>)</span>.  
</div>
<div class="code">
<span class="id" title="keyword">Notation</span> <a id="is_mere_relation" class="idref" href="#is_mere_relation"><span class="id" title="abbreviation">is_mere_relation</span></a> <span class="id" title="var">A</span> <span class="id" title="var">R</span> := (<a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">(</span></a><a id="x:279" class="idref" href="#x:279"><span class="id" title="binder">x</span></a> <a id="y:280" class="idref" href="#y:280"><span class="id" title="binder">y</span></a> : <span class="id" title="var">A</span><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">),</span></a> <a class="idref" href="HoTT.Basics.Overture.html#IsHProp"><span class="id" title="abbreviation">IsHProp</span></a> (<span class="id" title="var">R</span> <a class="idref" href="HoTT.Basics.Overture.html#x:279"><span class="id" title="variable">x</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:280"><span class="id" title="variable">y</span></a>)).<br/>

<br/>
</div>

<div class="doc">
<a id="lab31"></a><h3 class="section">Function extensionality</h3>

<div class="paragraph"> </div>

 The function extensionality axiom is formulated as a class. To use it in a theorem, just assume it with <span class="inlinecode">`{<a class="idref" href="HoTT.Basics.Overture.html#Funext"><span class="id" title="axiom">Funext</span></a>}</span>, and then you can use <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#path_forall"><span class="id" title="definition">path_forall</span></a></span>, defined below.  If you need function extensionality for a whole development, you can assume it for an entire Section with <span class="inlinecode"><span class="id" title="keyword">Context</span></span> <span class="inlinecode">`{<a class="idref" href="HoTT.Basics.Overture.html#Funext"><span class="id" title="axiom">Funext</span></a>}</span>.   We use a dummy class and an axiom to get universe polymorphism of <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#Funext"><span class="id" title="axiom">Funext</span></a></span> while still tracking its uses.  Coq's universe polymorphism is parametric; in all definitions, all universes are quantified over before any other variables.  It's impossible to state a theorem like <span class="inlinecode">(<span class="id" title="keyword">∀</span></span> <span class="inlinecode"><a class="idref" href="HoTT.Classes.theory.ua_second_isomorphism.html#i"><span class="id" title="abbreviation">i</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">Level</span>,</span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.DependentProduct.html#dependent_product.P"><span class="id" title="variable">P</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Classes.theory.ua_second_isomorphism.html#i"><span class="id" title="abbreviation">i</span></a>)</span> <span class="inlinecode">→</span> <span class="inlinecode"><a class="idref" href="HoTT.Classes.theory.ua_second_isomorphism.html#Q"><span class="id" title="abbreviation">Q</span></a></span> (e.g., "if <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.C"><span class="id" title="variable">C</span></a></span> has all limits of all sizes, then <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.C"><span class="id" title="variable">C</span></a></span> is a preorder" isn't statable).*  By making <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#isequiv_apD10"><span class="id" title="axiom">isequiv_apD10</span></a></span> an <span class="inlinecode"><span class="id" title="keyword">Axiom</span></span> rather than a per-theorem hypothesis, we can use it at multiple incompatible universe levels.  By only allowing use of the axiom when we have a <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#Funext"><span class="id" title="axiom">Funext</span></a></span> in the context, we can still track what theorems depend on it (because their type will mention <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#Funext"><span class="id" title="axiom">Funext</span></a></span>).

<div class="paragraph"> </div>

    By giving <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#Funext"><span class="id" title="axiom">Funext</span></a></span> a field who's type is an axiom, we guarantee that we cannot construct a fresh instance of <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#Funext"><span class="id" title="axiom">Funext</span></a></span> without <span class="inlinecode"><span class="id" title="var">admit</span></span>; there's no term of type <span class="inlinecode"><span class="id" title="var">dummy_funext_type</span></span> floating around.  If we did not give <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#Funext"><span class="id" title="axiom">Funext</span></a></span> and fields, then we could accidentally manifest a <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#Funext"><span class="id" title="axiom">Funext</span></a></span> using, e.g., <span class="inlinecode"><span class="id" title="tactic">constructor</span></span>, and then we wouldn't have a tag on the theorem that did this.

<div class="paragraph"> </div>

    As <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#Funext"><span class="id" title="axiom">Funext</span></a></span> is never actually used productively, we toss it in <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#Type0"><span class="id" title="abbreviation">Type0</span></a></span> and make it <span class="inlinecode"><span class="id" title="var">Monomorphic</span></span> so it doesn't add more universes.

<div class="paragraph"> </div>

<a id="lab32"></a><h1 class="section">That's not technically true; it might be possible to get non-parametric universe polymorphism using <span class="inlinecode"><span class="id" title="keyword">Module</span></span>s and (<span class="inlinecode"><span class="id" title="keyword">Module</span></span>) Functors; we can use functors to quantify over a <span class="inlinecode"><span class="id" title="keyword">Module</span></span> <span class="inlinecode"><span class="id" title="keyword">Type</span></span> which requires a polymorphic proof of a given hypothesis, and then use that hypothesis polymorphically in any theorem we prove in our new <span class="inlinecode"><span class="id" title="keyword">Module</span></span> Functor.  But that is far beyond the scope of this file.</h1>

</div>
<div class="code">
<span class="id" title="var">Monomorphic</span> <span class="id" title="keyword">Axiom</span> <a id="Funext" class="idref" href="#Funext"><span class="id" title="axiom">Funext</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#Type0"><span class="id" title="abbreviation">Type0</span></a>.<br/>
<span class="id" title="var">Existing</span> <span class="id" title="keyword">Class</span> <span class="id" title="var">Funext</span>.<br/>
<span class="id" title="keyword">Axiom</span> <a id="isequiv_apD10" class="idref" href="#isequiv_apD10"><span class="id" title="axiom">isequiv_apD10</span></a> : <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">`{</span></a><a id="H:282" class="idref" href="#H:282"><span class="id" title="binder">Funext</span></a>} (<a id="A:283" class="idref" href="#A:283"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>) (<a id="P:284" class="idref" href="#P:284"><span class="id" title="binder">P</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:283"><span class="id" title="variable">A</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) <a id="f:285" class="idref" href="#f:285"><span class="id" title="binder">f</span></a> <a id="g:286" class="idref" href="#g:286"><span class="id" title="binder">g</span></a><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">,</span></a> <a class="idref" href="HoTT.Basics.Overture.html#IsEquiv"><span class="id" title="class">IsEquiv</span></a> (@<a class="idref" href="HoTT.Basics.Overture.html#apD10"><span class="id" title="definition">apD10</span></a> <a class="idref" href="HoTT.Basics.Overture.html#A:283"><span class="id" title="variable">A</span></a> <a class="idref" href="HoTT.Basics.Overture.html#P:284"><span class="id" title="variable">P</span></a> <a class="idref" href="HoTT.Basics.Overture.html#f:285"><span class="id" title="variable">f</span></a> <a class="idref" href="HoTT.Basics.Overture.html#g:286"><span class="id" title="variable">g</span></a>).<br/>
<span class="id" title="keyword">Global</span> <span class="id" title="var">Existing</span> <span class="id" title="keyword">Instance</span> <span class="id" title="var">isequiv_apD10</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="path_forall" class="idref" href="#path_forall"><span class="id" title="definition">path_forall</span></a> `{<a id="H:288" class="idref" href="#H:288"><span class="id" title="binder">Funext</span></a>} {<a id="A:289" class="idref" href="#A:289"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} {<a id="P:290" class="idref" href="#P:290"><span class="id" title="binder">P</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:289"><span class="id" title="variable">A</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>} (<a id="f:292" class="idref" href="#f:292"><span class="id" title="binder">f</span></a> <a id="g:293" class="idref" href="#g:293"><span class="id" title="binder">g</span></a> : <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a id="x:291" class="idref" href="#x:291"><span class="id" title="binder">x</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:289"><span class="id" title="variable">A</span></a><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">,</span></a> <a class="idref" href="HoTT.Basics.Overture.html#P:290"><span class="id" title="variable">P</span></a> <a class="idref" href="HoTT.Basics.Overture.html#x:291"><span class="id" title="variable">x</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="HoTT.Basics.Overture.html#f:292"><span class="id" title="variable">f</span></a> <a class="idref" href="HoTT.Basics.Overture.html#2596316c6f2ff161cb03e25fd8914390"><span class="id" title="notation">==</span></a> <a class="idref" href="HoTT.Basics.Overture.html#g:293"><span class="id" title="variable">g</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="HoTT.Basics.Overture.html#f:292"><span class="id" title="variable">f</span></a> <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="HoTT.Basics.Overture.html#g:293"><span class="id" title="variable">g</span></a><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<a class="idref" href="HoTT.Basics.Overture.html#f3f2d22838b594a6e5dbfb541ecf90ae"><span class="id" title="notation">(</span></a>@<a class="idref" href="HoTT.Basics.Overture.html#apD10"><span class="id" title="definition">apD10</span></a> <a class="idref" href="HoTT.Basics.Overture.html#A:289"><span class="id" title="variable">A</span></a> <a class="idref" href="HoTT.Basics.Overture.html#P:290"><span class="id" title="variable">P</span></a> <a class="idref" href="HoTT.Basics.Overture.html#f:292"><span class="id" title="variable">f</span></a> <a class="idref" href="HoTT.Basics.Overture.html#g:293"><span class="id" title="variable">g</span></a><a class="idref" href="HoTT.Basics.Overture.html#f3f2d22838b594a6e5dbfb541ecf90ae"><span class="id" title="notation">)^-1</span></a>.<br/>

<br/>
<span class="id" title="keyword">Global</span> <span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#path_forall"><span class="id" title="definition">path_forall</span></a> {<span class="id" title="var">_</span> <span class="id" title="var">A</span>%<span class="id" title="var">type_scope</span> <span class="id" title="var">P</span>} (<span class="id" title="var">f</span> <span class="id" title="var">g</span>)%<span class="id" title="var">function_scope</span> <span class="id" title="var">_</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab33"></a><h3 class="section">Tactics</h3>

<div class="paragraph"> </div>

 We declare some more <span class="inlinecode"><span class="id" title="keyword">Hint</span></span> <span class="inlinecode"><span class="id" title="keyword">Resolve</span></span> hints, now in the "hint database" <span class="inlinecode"><span class="id" title="var">path_hints</span></span>.  In general various hints (resolve, rewrite, unfold hints) can be grouped into "databases". This is necessary as sometimes different kinds of hints cannot be mixed, for example because they would cause a combinatorial explosion or rewriting cycles.

<div class="paragraph"> </div>

   A specific <span class="inlinecode"><span class="id" title="keyword">Hint</span></span> <span class="inlinecode"><span class="id" title="keyword">Resolve</span></span> database <span class="inlinecode"><span class="id" title="var">db</span></span> can be used with <span class="inlinecode"><span class="id" title="tactic">auto</span></span> <span class="inlinecode"><span class="id" title="keyword">with</span></span> <span class="inlinecode"><span class="id" title="var">db</span></span>.

<div class="paragraph"> </div>

   The hints in <span class="inlinecode"><span class="id" title="var">path_hints</span></span> are designed to push concatenation *outwards*, eliminate identities and inverses, and associate to the left as far as  possible. 
<div class="paragraph"> </div>

 TODO: think more carefully about this.  Perhaps associating to the right would be more convenient? 
</div>
<div class="code">
#[<span class="id" title="var">export</span>]<br/>
<span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Resolve</span> <span class="id" title="var">idpath</span> <span class="id" title="var">inverse</span> : <span class="id" title="var">path_hints</span>.<br/>
#[<span class="id" title="var">export</span>]<br/>
<span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Resolve</span> <span class="id" title="var">idpath</span> : <span class="id" title="var">core</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">path_via</span> <span class="id" title="var">mid</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> @<a class="idref" href="HoTT.Basics.Overture.html#concat"><span class="id" title="definition">concat</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">y</span> := <span class="id" title="var">mid</span>); <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">path_hints</span>.<br/>

<br/>
</div>

<div class="doc">
We put <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#Empty"><span class="id" title="inductive">Empty</span></a></span> here, instead of in <span class="inlinecode"><span class="id" title="var">Empty.v</span></span>, because <span class="inlinecode"><span class="id" title="keyword">Ltac</span></span> <span class="inlinecode"><span class="id" title="var">done</span></span> uses it. 
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a id="Empty" class="idref" href="#Empty"><span class="id" title="inductive">Empty</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#Type0"><span class="id" title="abbreviation">Type0</span></a> := .<br/>
<span class="id" title="var">Register</span> <span class="id" title="var">Empty</span> <span class="id" title="keyword">as</span> <span class="id" title="var">core.False.type</span>.<br/>

<br/>
<span class="id" title="keyword">Scheme</span> <a id="Empty_ind" class="idref" href="#Empty_ind"><span class="id" title="definition">Empty_ind</span></a> := <span class="id" title="keyword">Induction</span> <span class="id" title="keyword">for</span> <a class="idref" href="HoTT.Basics.Overture.html#Empty"><span class="id" title="inductive">Empty</span></a> <span class="id" title="keyword">Sort</span> <span class="id" title="keyword">Type</span>.<br/>
<span class="id" title="keyword">Scheme</span> <a id="Empty_rec" class="idref" href="#Empty_rec"><span class="id" title="definition">Empty_rec</span></a> := <span class="id" title="var">Minimality</span> <span class="id" title="keyword">for</span> <a class="idref" href="HoTT.Basics.Overture.html#Empty"><span class="id" title="inductive">Empty</span></a> <span class="id" title="keyword">Sort</span> <span class="id" title="keyword">Type</span>.<br/>
<span class="id" title="keyword">Definition</span> <a id="Empty_rect" class="idref" href="#Empty_rect"><span class="id" title="definition">Empty_rect</span></a> := <a class="idref" href="HoTT.Basics.Overture.html#Empty_ind"><span class="id" title="definition">Empty_ind</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="not" class="idref" href="#not"><span class="id" title="definition">not</span></a> (<a id="A:296" class="idref" href="#A:296"><span class="id" title="binder">A</span></a>:<span class="id" title="keyword">Type</span>) : <span class="id" title="keyword">Type</span> := <a class="idref" href="HoTT.Basics.Overture.html#A:296"><span class="id" title="variable">A</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="HoTT.Basics.Overture.html#Empty"><span class="id" title="inductive">Empty</span></a>.<br/>
<span class="id" title="keyword">Notation</span> <a id="63a68285c81db8f9bc456233bb9ed181" class="idref" href="#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">&quot;</span></a>~ x" := (<a class="idref" href="HoTT.Basics.Overture.html#not"><span class="id" title="definition">not</span></a> <span class="id" title="var">x</span>) : <span class="id" title="var">type_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="6ff74d9c79c8ebe4ff3987390d67f9c7" class="idref" href="#6ff74d9c79c8ebe4ff3987390d67f9c7"><span class="id" title="notation">&quot;</span></a>~~ x" := (<a class="idref" href="HoTT.Basics.Overture.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="HoTT.Basics.Overture.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a><span class="id" title="var">x</span>) : <span class="id" title="var">type_scope</span>.<br/>
#[<span class="id" title="var">export</span>]<br/>
<span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Unfold</span> <a class="idref" href="HoTT.Basics.Overture.html#not"><span class="id" title="definition">not</span></a>: <span class="id" title="var">core</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="::type_scope:x_'&lt;&gt;'_x_':&gt;'_x" class="idref" href="#::type_scope:x_'&lt;&gt;'_x_':&gt;'_x"><span class="id" title="notation">&quot;</span></a>x &lt;&gt; y  :&gt;  T" := (<a class="idref" href="HoTT.Basics.Overture.html#not"><span class="id" title="definition">not</span></a> (<span class="id" title="var">x</span> <a class="idref" href="HoTT.Basics.Overture.html#b8b2ebc8e1a8b9aa935c0702efb5dccf"><span class="id" title="notation">=</span></a> <span class="id" title="var">y</span> <a class="idref" href="HoTT.Basics.Overture.html#b8b2ebc8e1a8b9aa935c0702efb5dccf"><span class="id" title="notation">:&gt;</span></a> <span class="id" title="var">T</span>)) : <span class="id" title="var">type_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="::type_scope:x_'&lt;&gt;'_x" class="idref" href="#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&quot;</span></a>x &lt;&gt; y" := (<span class="id" title="var">x</span> <a class="idref" href="HoTT.Basics.Overture.html#::type_scope:x_'&lt;&gt;'_x_':&gt;'_x"><span class="id" title="notation">≠</span></a> <span class="id" title="var">y</span> <a class="idref" href="HoTT.Basics.Overture.html#::type_scope:x_'&lt;&gt;'_x_':&gt;'_x"><span class="id" title="notation">:&gt;</span></a> <span class="id" title="var">_</span>) : <span class="id" title="var">type_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="symmetric_neq" class="idref" href="#symmetric_neq"><span class="id" title="definition">symmetric_neq</span></a> {<a id="A:297" class="idref" href="#A:297"><span class="id" title="binder">A</span></a>} {<a id="x:298" class="idref" href="#x:298"><span class="id" title="binder">x</span></a> <a id="y:299" class="idref" href="#y:299"><span class="id" title="binder">y</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:297"><span class="id" title="variable">A</span></a>} : <a class="idref" href="HoTT.Basics.Overture.html#x:298"><span class="id" title="variable">x</span></a> <a class="idref" href="HoTT.Basics.Overture.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:299"><span class="id" title="variable">y</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:299"><span class="id" title="variable">y</span></a> <a class="idref" href="HoTT.Basics.Overture.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="HoTT.Basics.Overture.html#x:298"><span class="id" title="variable">x</span></a><br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">fun</span> <a id="np:300" class="idref" href="#np:300"><span class="id" title="binder">np</span></a> <a id="p:301" class="idref" href="#p:301"><span class="id" title="binder">p</span></a> ⇒ <a class="idref" href="HoTT.Basics.Overture.html#np:300"><span class="id" title="variable">np</span></a> (<a class="idref" href="HoTT.Basics.Overture.html#p:301"><span class="id" title="variable">p</span></a><a class="idref" href="HoTT.Basics.Overture.html#6bc2e8b4a6e295632a90f5f35132db8d"><span class="id" title="notation">^</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="complement" class="idref" href="#complement"><span class="id" title="definition">complement</span></a> {<a id="A:302" class="idref" href="#A:302"><span class="id" title="binder">A</span></a>} (<a id="R:303" class="idref" href="#R:303"><span class="id" title="binder">R</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#Relation"><span class="id" title="definition">Relation</span></a> <a class="idref" href="HoTT.Basics.Overture.html#A:302"><span class="id" title="variable">A</span></a>) : <a class="idref" href="HoTT.Basics.Overture.html#Relation"><span class="id" title="definition">Relation</span></a> <a class="idref" href="HoTT.Basics.Overture.html#A:302"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="x:304" class="idref" href="#x:304"><span class="id" title="binder">x</span></a> <a id="y:305" class="idref" href="#y:305"><span class="id" title="binder">y</span></a> ⇒ <a class="idref" href="HoTT.Basics.Overture.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="HoTT.Basics.Overture.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">(</span></a><a class="idref" href="HoTT.Basics.Overture.html#R:303"><span class="id" title="variable">R</span></a> <a class="idref" href="HoTT.Basics.Overture.html#x:304"><span class="id" title="variable">x</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:305"><span class="id" title="variable">y</span></a><a class="idref" href="HoTT.Basics.Overture.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Type</span><span class="id" title="var">classes</span> <span class="id" title="keyword">Opaque</span> <span class="id" title="var">complement</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <a id="Irreflexive" class="idref" href="#Irreflexive"><span class="id" title="record">Irreflexive</span></a> {<a id="A:306" class="idref" href="#A:306"><span class="id" title="binder">A</span></a>} (<a id="R:307" class="idref" href="#R:307"><span class="id" title="binder">R</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#Relation"><span class="id" title="definition">Relation</span></a> <a class="idref" href="HoTT.Basics.Overture.html#A:306"><span class="id" title="variable">A</span></a>) :=<br/>
&nbsp;&nbsp;<a id="irreflexivity" class="idref" href="#irreflexivity"><span class="id" title="projection">irreflexivity</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#Reflexive"><span class="id" title="class">Reflexive</span></a> (<a class="idref" href="HoTT.Basics.Overture.html#complement"><span class="id" title="definition">complement</span></a> <a class="idref" href="HoTT.Basics.Overture.html#R:307"><span class="id" title="variable">R</span></a>).<br/>

<br/>
<span class="id" title="keyword">Class</span> <a id="Asymmetric" class="idref" href="#Asymmetric"><span class="id" title="record">Asymmetric</span></a> {<a id="A:310" class="idref" href="#A:310"><span class="id" title="binder">A</span></a>} (<a id="R:311" class="idref" href="#R:311"><span class="id" title="binder">R</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#Relation"><span class="id" title="definition">Relation</span></a> <a class="idref" href="HoTT.Basics.Overture.html#A:310"><span class="id" title="variable">A</span></a>) :=<br/>
&nbsp;&nbsp;<a id="asymmetry" class="idref" href="#asymmetry"><span class="id" title="projection">asymmetry</span></a> : <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> {<a id="x:313" class="idref" href="#x:313"><span class="id" title="binder">x</span></a> <a id="y:314" class="idref" href="#y:314"><span class="id" title="binder">y</span></a>}<a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">,</span></a> <a class="idref" href="HoTT.Basics.Overture.html#R:311"><span class="id" title="variable">R</span></a> <a class="idref" href="HoTT.Basics.Overture.html#x:313"><span class="id" title="variable">x</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:314"><span class="id" title="variable">y</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="HoTT.Basics.Overture.html#complement"><span class="id" title="definition">complement</span></a> <a class="idref" href="HoTT.Basics.Overture.html#R:311"><span class="id" title="variable">R</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:314"><span class="id" title="variable">y</span></a> <a class="idref" href="HoTT.Basics.Overture.html#x:313"><span class="id" title="variable">x</span></a> : <span class="id" title="keyword">Type</span><a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>

<br/>
</div>

<div class="doc">
Likewise, we put <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#Unit"><span class="id" title="inductive">Unit</span></a></span> here, instead of in <span class="inlinecode"><span class="id" title="var">Unit.v</span></span>, because <span class="inlinecode"><a class="idref" href="HoTT.Truncations.Core.html#Trunc.Trunc"><span class="id" title="inductive">Trunc</span></a></span> uses it. 
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a id="Unit" class="idref" href="#Unit"><span class="id" title="inductive">Unit</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#Type0"><span class="id" title="abbreviation">Type0</span></a> := <a id="tt" class="idref" href="#tt"><span class="id" title="constructor">tt</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#Unit:316"><span class="id" title="inductive">Unit</span></a>.<br/>

<br/>
<span class="id" title="keyword">Scheme</span> <a id="Unit_ind" class="idref" href="#Unit_ind"><span class="id" title="definition">Unit_ind</span></a> := <span class="id" title="keyword">Induction</span> <span class="id" title="keyword">for</span> <a class="idref" href="HoTT.Basics.Overture.html#Unit"><span class="id" title="inductive">Unit</span></a> <span class="id" title="keyword">Sort</span> <span class="id" title="keyword">Type</span>.<br/>
<span class="id" title="keyword">Scheme</span> <a id="Unit_rec" class="idref" href="#Unit_rec"><span class="id" title="definition">Unit_rec</span></a> := <span class="id" title="var">Minimality</span> <span class="id" title="keyword">for</span> <a class="idref" href="HoTT.Basics.Overture.html#Unit"><span class="id" title="inductive">Unit</span></a> <span class="id" title="keyword">Sort</span> <span class="id" title="keyword">Type</span>.<br/>
<span class="id" title="keyword">Definition</span> <a id="Unit_rect" class="idref" href="#Unit_rect"><span class="id" title="definition">Unit_rect</span></a> := <a class="idref" href="HoTT.Basics.Overture.html#Unit_ind"><span class="id" title="definition">Unit_ind</span></a>.<br/>

<br/>
</div>

<div class="doc">
A <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#Unit"><span class="id" title="inductive">Unit</span></a></span> goal should be resolved by <span class="inlinecode"><span class="id" title="tactic">auto</span></span> and <span class="inlinecode"><span class="id" title="tactic">trivial</span></span>. 
</div>
<div class="code">
#[<span class="id" title="var">export</span>]<br/>
<span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Resolve</span> <span class="id" title="var">tt</span> : <span class="id" title="var">core</span>.<br/>

<br/>
<span class="id" title="var">Register</span> <span class="id" title="var">Unit</span> <span class="id" title="keyword">as</span> <span class="id" title="var">core.IDProp.type</span>.<br/>
<span class="id" title="var">Register</span> <span class="id" title="var">Unit</span> <span class="id" title="keyword">as</span> <span class="id" title="var">core.True.type</span>.<br/>
<span class="id" title="var">Register</span> <span class="id" title="var">tt</span> <span class="id" title="keyword">as</span> <span class="id" title="var">core.IDProp.idProp</span>.<br/>
<span class="id" title="var">Register</span> <span class="id" title="var">tt</span> <span class="id" title="keyword">as</span> <span class="id" title="var">core.True.I</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab34"></a><h3 class="section">Pointed types</h3>

<div class="paragraph"> </div>

 A space is pointed if that space has a point. 
</div>
<div class="code">
<span class="id" title="keyword">Class</span> <a id="IsPointed" class="idref" href="#IsPointed"><span class="id" title="record">IsPointed</span></a> (<a id="A:318" class="idref" href="#A:318"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>) := <a id="point" class="idref" href="#point"><span class="id" title="projection">point</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:318"><span class="id" title="variable">A</span></a>.<br/>

<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#point"><span class="id" title="definition">point</span></a> <span class="id" title="var">A</span> {<span class="id" title="var">_</span>}.<br/>

<br/>
<span class="id" title="keyword">Record</span> <a id="pType" class="idref" href="#pType"><span class="id" title="record">pType</span></a> :=<br/>
&nbsp;&nbsp;{ <a id="pointed_type" class="idref" href="#pointed_type"><span class="id" title="projection">pointed_type</span></a> : <span class="id" title="keyword">Type</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="ispointed_type" class="idref" href="#ispointed_type"><span class="id" title="projection">ispointed_type</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#IsPointed"><span class="id" title="class">IsPointed</span></a> <a class="idref" href="HoTT.Basics.Overture.html#pointed_type:322"><span class="id" title="method">pointed_type</span></a> }.<br/>

<br/>
<span class="id" title="keyword">Coercion</span> <a class="idref" href="HoTT.Basics.Overture.html#pointed_type"><span class="id" title="projection">pointed_type</span></a> <a class="idref" href="HoTT.Basics.Overture.html#pointed_type"><span class="id" title="projection">:</span></a> <a class="idref" href="HoTT.Basics.Overture.html#pointed_type"><span class="id" title="projection">pType</span></a> <a class="idref" href="HoTT.Basics.Overture.html#pointed_type"><span class="id" title="projection">&gt;-&gt;</span></a> <a class="idref" href="HoTT.Basics.Overture.html#pointed_type"><span class="id" title="projection">Sortclass</span></a>.<br/>

<br/>
<span class="id" title="keyword">Global</span> <span class="id" title="var">Existing</span> <span class="id" title="keyword">Instance</span> <span class="id" title="var">ispointed_type</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab35"></a><h3 class="section">Homotopy fibers</h3>

<div class="paragraph"> </div>

 Homotopy fibers are homotopical inverse images of points.  
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="hfiber" class="idref" href="#hfiber"><span class="id" title="definition">hfiber</span></a> {<a id="A:324" class="idref" href="#A:324"><span class="id" title="binder">A</span></a> <a id="B:325" class="idref" href="#B:325"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>} (<a id="f:326" class="idref" href="#f:326"><span class="id" title="binder">f</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:324"><span class="id" title="variable">A</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="HoTT.Basics.Overture.html#B:325"><span class="id" title="variable">B</span></a>) (<a id="y:327" class="idref" href="#y:327"><span class="id" title="binder">y</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#B:325"><span class="id" title="variable">B</span></a>) := <a class="idref" href="Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a> <a id="x:328" class="idref" href="#x:328"><span class="id" title="binder">x</span></a> <a class="idref" href="Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <a class="idref" href="HoTT.Basics.Overture.html#A:324"><span class="id" title="variable">A</span></a> <a class="idref" href="Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="HoTT.Basics.Overture.html#f:326"><span class="id" title="variable">f</span></a> <a class="idref" href="HoTT.Basics.Overture.html#x:328"><span class="id" title="variable">x</span></a> <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:327"><span class="id" title="variable">y</span></a> <a class="idref" href="Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>.<br/>

<br/>
<span class="id" title="keyword">Global</span> <span class="id" title="var">Arguments</span> <a class="idref" href="HoTT.Basics.Overture.html#hfiber"><span class="id" title="definition">hfiber</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>}%<span class="id" title="var">type_scope</span> <span class="id" title="var">f</span>%<span class="id" title="var">function_scope</span> <span class="id" title="var">y</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab36"></a><h3 class="section">More tactics</h3>

<div class="paragraph"> </div>

 Clear a hypothesis and also its dependencies.  Taken from Coq stdlib, with the performance-enhancing change to <span class="inlinecode"><span class="id" title="keyword">lazymatch</span></span> suggested at <span class="inlinecode"><span class="id" title="var">https</span>://<span class="id" title="var">github.com</span>/<span class="id" title="var">coq</span>/<span class="id" title="var">coq</span>/<span class="id" title="var">issues</span>/11689</span>. 
</div>
<div class="code">
<span class="id" title="keyword">Tactic Notation</span> "clear" "dependent" <span class="id" title="var">hyp</span>(<span class="id" title="var">h</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">rec</span> <span class="id" title="var">depclear</span> <span class="id" title="var">h</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">h</span> ||<br/>
&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;| <span class="id" title="var">H</span> : <span class="id" title="keyword">context</span> [ <span class="id" title="var">h</span> ] |- <span class="id" title="var">_</span> ⇒ <span class="id" title="var">depclear</span> <span class="id" title="var">H</span>; <span class="id" title="var">depclear</span> <span class="id" title="var">h</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span> ||<br/>
&nbsp;&nbsp;<span class="id" title="tactic">fail</span> "hypothesis to clear is used in the conclusion (maybe indirectly)"<br/>
&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">depclear</span> <span class="id" title="var">h</span>.<br/>

<br/>
</div>

<div class="doc">
A version of <span class="inlinecode"><span class="id" title="tactic">generalize</span></span> <span class="inlinecode"><span class="id" title="tactic">dependent</span></span> that applies only to a hypothesis.  Taken from Coq stdlib. 
</div>
<div class="code">
<span class="id" title="keyword">Tactic Notation</span> "revert" "dependent" <span class="id" title="var">hyp</span>(<span class="id" title="var">h</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">h</span>.<br/>

<br/>
</div>

<div class="doc">
Applying a tactic to a term with increasingly many arguments 
</div>
<div class="code">
<span class="id" title="keyword">Tactic Notation</span> "do_with_holes" <span class="id" title="var">tactic3</span>(<span class="id" title="var">x</span>) <span class="id" title="var">uconstr</span>(<span class="id" title="var">p</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>

<br/>
</div>

<div class="doc">
Same thing but starting with many holes first 
</div>
<div class="code">
<span class="id" title="keyword">Tactic Notation</span> "do_with_holes'" <span class="id" title="var">tactic3</span>(<span class="id" title="var">x</span>) <span class="id" title="var">uconstr</span>(<span class="id" title="var">p</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span> <span class="id" title="var">_</span>) ||<br/>
&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">uconstr</span>:(<span class="id" title="var">p</span>).<br/>

<br/>
</div>

<div class="doc">
A shorter name for <span class="inlinecode"><span class="id" title="tactic">simple</span></span> <span class="inlinecode"><span class="id" title="tactic">refine</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Tactic Notation</span> "srefine" <span class="id" title="var">uconstr</span>(<span class="id" title="var">term</span>) := <span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> <span class="id" title="var">term</span>.<br/>
</div>

<div class="doc">
A shorter name for <span class="inlinecode"><span class="id" title="var">notypeclasses</span></span> <span class="inlinecode"><span class="id" title="tactic">refine</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Tactic Notation</span> "nrefine" <span class="id" title="var">uconstr</span>(<span class="id" title="var">term</span>) := <span class="id" title="var">notypeclasses</span> <span class="id" title="tactic">refine</span> <span class="id" title="var">term</span>.<br/>
</div>

<div class="doc">
A shorter name for <span class="inlinecode"><span class="id" title="tactic">simple</span></span> <span class="inlinecode"><span class="id" title="var">notypeclasses</span></span> <span class="inlinecode"><span class="id" title="tactic">refine</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Tactic Notation</span> "snrefine" <span class="id" title="var">uconstr</span>(<span class="id" title="var">term</span>) := <span class="id" title="tactic">simple</span> <span class="id" title="var">notypeclasses</span> <span class="id" title="tactic">refine</span> <span class="id" title="var">term</span>.<br/>

<br/>
</div>

<div class="doc">
Note that the Coq standard library has a <span class="inlinecode"><span class="id" title="var">rapply</span></span>, but it is like our <span class="inlinecode"><span class="id" title="var">rapply'</span></span> with many-holes first.  We prefer fewer-holes first, for instance so that a theorem producing an equivalence will by preference be used to produce an equivalence rather than to apply the coercion of that equivalence to a function. 
</div>
<div class="code">
<span class="id" title="keyword">Tactic Notation</span> "rapply" <span class="id" title="var">uconstr</span>(<span class="id" title="var">term</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">do_with_holes</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="tactic">refine</span> <span class="id" title="var">x</span>) <span class="id" title="var">term</span>.<br/>
<span class="id" title="keyword">Tactic Notation</span> "rapply'" <span class="id" title="var">uconstr</span>(<span class="id" title="var">term</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">do_with_holes'</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="tactic">refine</span> <span class="id" title="var">x</span>) <span class="id" title="var">term</span>.<br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "srapply" <span class="id" title="var">uconstr</span>(<span class="id" title="var">term</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">do_with_holes</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">srefine</span> <span class="id" title="var">x</span>) <span class="id" title="var">term</span>.<br/>
<span class="id" title="keyword">Tactic Notation</span> "srapply'" <span class="id" title="var">uconstr</span>(<span class="id" title="var">term</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">do_with_holes'</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">srefine</span> <span class="id" title="var">x</span>) <span class="id" title="var">term</span>.<br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "nrapply" <span class="id" title="var">uconstr</span>(<span class="id" title="var">term</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">do_with_holes</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">nrefine</span> <span class="id" title="var">x</span>) <span class="id" title="var">term</span>.<br/>
<span class="id" title="keyword">Tactic Notation</span> "nrapply'" <span class="id" title="var">uconstr</span>(<span class="id" title="var">term</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">do_with_holes'</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">nrefine</span> <span class="id" title="var">x</span>) <span class="id" title="var">term</span>.<br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "snrapply" <span class="id" title="var">uconstr</span>(<span class="id" title="var">term</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">do_with_holes</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">snrefine</span> <span class="id" title="var">x</span>) <span class="id" title="var">term</span>.<br/>
<span class="id" title="keyword">Tactic Notation</span> "snrapply'" <span class="id" title="var">uconstr</span>(<span class="id" title="var">term</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">do_with_holes'</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">snrefine</span> <span class="id" title="var">x</span>) <span class="id" title="var">term</span>.<br/>

<br/>
</div>

<div class="doc">
Ssreflect tactics, adapted by Robbert Krebbers 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">done</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">trivial</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">solve</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">first</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">trivial</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">trivial</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="tactic">reflexivity</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">contradiction</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="tactic">split</span> ]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H</span> : <a class="idref" href="HoTT.Basics.Overture.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">trivial</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> ].<br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "by" <span class="id" title="var">tactic</span>(<span class="id" title="var">tac</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">tac</span>; <span class="id" title="var">done</span>.<br/>

<br/>
</div>

<div class="doc">
A convenient tactic for using function extensionality. 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">by_extensionality</span> <span class="id" title="var">x</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [ |- ?<span class="id" title="var">f</span> <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">g</span> ] ⇒ <span class="id" title="tactic">eapply</span> <a class="idref" href="HoTT.Basics.Overture.html#path_forall"><span class="id" title="definition">path_forall</span></a>; <span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ |- <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span> : <a class="idref" href="Coq.Init.Datatypes.html#prod"><span class="id" title="record">prod</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">),</span></a> <span class="id" title="var">_</span> ] ⇒ <span class="id" title="tactic">intros</span> [? ?]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ |- <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span> : <a class="idref" href="Coq.Init.Specif.html#sigT"><span class="id" title="abbreviation">sigT</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">),</span></a> <span class="id" title="var">_</span> ] ⇒ <span class="id" title="tactic">intros</span> [? ?]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">intros</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">path_hints</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">funext</span></span> apply functional extensionality (<span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#path_forall"><span class="id" title="definition">path_forall</span></a></span>) to the goal and the introduce the arguments in the context.  For instance, if you have to prove <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.g"><span class="id" title="variable">g</span></a></span> where <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.f"><span class="id" title="variable">f</span></a></span> and <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.g"><span class="id" title="variable">g</span></a></span> take two arguments, you can use <span class="inlinecode"><span class="id" title="var">funext</span></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Functor.Attributes.html#fully_faithful_helpers.y"><span class="id" title="variable">y</span></a></span>, and the goal become <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Functor.Attributes.html#fully_faithful_helpers.y"><span class="id" title="variable">y</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.g"><span class="id" title="variable">g</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Functor.Attributes.html#fully_faithful_helpers.y"><span class="id" title="variable">y</span></a></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Tactic Notation</span> "funext" <span class="id" title="var">simple_intropattern</span>(<span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="tactic">apply</span> <a class="idref" href="HoTT.Basics.Overture.html#path_forall"><span class="id" title="definition">path_forall</span></a>; <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span>.<br/>
<span class="id" title="keyword">Tactic Notation</span> "funext" <span class="id" title="var">simple_intropattern</span>(<span class="id" title="var">a</span>)  <span class="id" title="var">simple_intropattern</span>(<span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">funext</span> <span class="id" title="var">a</span>; <span class="id" title="var">funext</span> <span class="id" title="var">b</span>.<br/>
<span class="id" title="keyword">Tactic Notation</span> "funext" <span class="id" title="var">simple_intropattern</span>(<span class="id" title="var">a</span>) <span class="id" title="var">simple_intropattern</span>(<span class="id" title="var">b</span>) <span class="id" title="var">simple_intropattern</span>(<span class="id" title="var">c</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">funext</span> <span class="id" title="var">a</span>; <span class="id" title="var">funext</span> <span class="id" title="var">b</span>; <span class="id" title="var">funext</span> <span class="id" title="var">c</span>.<br/>
<span class="id" title="keyword">Tactic Notation</span> "funext" <span class="id" title="var">simple_intropattern</span>(<span class="id" title="var">a</span>) <span class="id" title="var">simple_intropattern</span>(<span class="id" title="var">b</span>) <span class="id" title="var">simple_intropattern</span>(<span class="id" title="var">c</span>) <span class="id" title="var">simple_intropattern</span>(<span class="id" title="var">d</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">funext</span> <span class="id" title="var">a</span>; <span class="id" title="var">funext</span> <span class="id" title="var">b</span>; <span class="id" title="var">funext</span> <span class="id" title="var">c</span>; <span class="id" title="var">funext</span> <span class="id" title="var">d</span>.<br/>
<span class="id" title="keyword">Tactic Notation</span> "funext" <span class="id" title="var">simple_intropattern</span>(<span class="id" title="var">a</span>) <span class="id" title="var">simple_intropattern</span>(<span class="id" title="var">b</span>) <span class="id" title="var">simple_intropattern</span>(<span class="id" title="var">c</span>) <span class="id" title="var">simple_intropattern</span>(<span class="id" title="var">d</span>) <span class="id" title="var">simple_intropattern</span>(<span class="id" title="var">e</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">funext</span> <span class="id" title="var">a</span>; <span class="id" title="var">funext</span> <span class="id" title="var">b</span>; <span class="id" title="var">funext</span> <span class="id" title="var">c</span>; <span class="id" title="var">funext</span> <span class="id" title="var">d</span>; <span class="id" title="var">funext</span> <span class="id" title="var">e</span>.<br/>
<span class="id" title="keyword">Tactic Notation</span> "funext" <span class="id" title="var">simple_intropattern</span>(<span class="id" title="var">a</span>) <span class="id" title="var">simple_intropattern</span>(<span class="id" title="var">b</span>) <span class="id" title="var">simple_intropattern</span>(<span class="id" title="var">c</span>) <span class="id" title="var">simple_intropattern</span>(<span class="id" title="var">d</span>) <span class="id" title="var">simple_intropattern</span>(<span class="id" title="var">e</span>) <span class="id" title="var">simple_intropattern</span>(<span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">funext</span> <span class="id" title="var">a</span>; <span class="id" title="var">funext</span> <span class="id" title="var">b</span>; <span class="id" title="var">funext</span> <span class="id" title="var">c</span>; <span class="id" title="var">funext</span> <span class="id" title="var">d</span>; <span class="id" title="var">funext</span> <span class="id" title="var">e</span>; <span class="id" title="var">funext</span> <span class="id" title="var">f</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">assert_fails</span> <span class="id" title="var">tac</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">tryif</span> (<span class="id" title="var">once</span> <span class="id" title="var">tac</span>) <span class="id" title="keyword">then</span> <span class="id" title="var">gfail</span> 0 <span class="id" title="var">tac</span> "succeeds" <span class="id" title="keyword">else</span> <span class="id" title="tactic">idtac</span>.<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">assert_succeeds</span> <span class="id" title="var">tac</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">tryif</span> (<span class="id" title="var">assert_fails</span> <span class="id" title="var">tac</span>) <span class="id" title="keyword">then</span> <span class="id" title="var">gfail</span> 0 <span class="id" title="var">tac</span> "fails" <span class="id" title="keyword">else</span> <span class="id" title="tactic">idtac</span>.<br/>
<span class="id" title="keyword">Tactic Notation</span> "assert_succeeds" <span class="id" title="var">tactic3</span>(<span class="id" title="var">tac</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">assert_succeeds</span> <span class="id" title="var">tac</span>.<br/>
<span class="id" title="keyword">Tactic Notation</span> "assert_fails" <span class="id" title="var">tactic3</span>(<span class="id" title="var">tac</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">assert_fails</span> <span class="id" title="var">tac</span>.<br/>

<br/>
</div>

<div class="doc">
This tactic doesn't end with <span class="inlinecode"><span class="id" title="tactic">auto</span></span>, but you can always write "by (path_induction;auto with path_hints)" if you want.
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">path_induction</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">progress</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id" title="var">p</span> : ?<span class="id" title="var">x</span> <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">y</span>  |- <span class="id" title="var">_</span> ] ⇒ <span class="id" title="var">assert_fails</span> <span class="id" title="var">constr_eq</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;).<br/>

<br/>
</div>

<div class="doc">
The tactic <span class="inlinecode"><span class="id" title="var">f_ap</span></span> is a replacement for the previously existing standard library tactic <span class="inlinecode"><span class="id" title="tactic">f_equal</span></span>.  This tactic works by repeatedly applying the fact that <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.g"><span class="id" title="variable">g</span></a></span> <span class="inlinecode">→</span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Functor.Attributes.html#fully_faithful_helpers.y"><span class="id" title="variable">y</span></a></span> <span class="inlinecode">→</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.g"><span class="id" title="variable">g</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Functor.Attributes.html#fully_faithful_helpers.y"><span class="id" title="variable">y</span></a></span> to turn, e.g., <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Functor.Attributes.html#fully_faithful_helpers.y"><span class="id" title="variable">y</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode"><a class="idref" href="Coq.Init.Logic_Type.html#identity_is_a_congruence.z"><span class="id" title="variable">z</span></a></span> <span class="inlinecode"><span class="id" title="var">w</span></span> first into <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode"><a class="idref" href="Coq.Init.Logic_Type.html#identity_is_a_congruence.z"><span class="id" title="variable">z</span></a></span> and <span class="inlinecode"><a class="idref" href="HoTT.Categories.Functor.Attributes.html#fully_faithful_helpers.y"><span class="id" title="variable">y</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">w</span></span>, and then turns the first of these into <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.f"><span class="id" title="variable">f</span></a></span> and <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="Coq.Init.Logic_Type.html#identity_is_a_congruence.z"><span class="id" title="variable">z</span></a></span>.  The <span class="inlinecode"><span class="id" title="var">done</span></span> tactic is used to detect the <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.f"><span class="id" title="variable">f</span></a></span> case and finish, and the <span class="inlinecode"><span class="id" title="tactic">trivial</span></span> is used to solve, e.g., <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> when using <span class="inlinecode"><span class="id" title="var">f_ap</span></span> on <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Functor.Attributes.html#fully_faithful_helpers.y"><span class="id" title="variable">y</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="HoTTBookExercises.html#Book_4_5.parts.f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode"><a class="idref" href="Coq.Init.Logic_Type.html#identity_is_a_congruence.z"><span class="id" title="variable">z</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span>.  This tactic only works for non-dependently-typed functions; we cannot express <span class="inlinecode"><a class="idref" href="HoTT.Categories.Functor.Attributes.html#fully_faithful_helpers.y"><span class="id" title="variable">y</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">w</span></span> in the first example if <span class="inlinecode"><a class="idref" href="HoTT.Categories.Functor.Attributes.html#fully_faithful_helpers.y"><span class="id" title="variable">y</span></a></span> and <span class="inlinecode"><span class="id" title="var">w</span></span> have different types.  If and when Arnaud's new-tacticals branch lands, and we can have a goal which depends on the term used to discharge another goal, then this tactic should probably be generalized to deal with dependent functions. 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">f_ap</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">idtac</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [ |- ?<span class="id" title="var">f</span> ?<span class="id" title="var">x</span> <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">g</span> ?<span class="id" title="var">x</span> ] ⇒ <span class="id" title="tactic">apply</span> (@<a class="idref" href="HoTT.Basics.Overture.html#apD10"><span class="id" title="definition">apD10</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="var">done</span> || <span class="id" title="var">f_ap</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">apply</span> <a class="idref" href="HoTT.Basics.Overture.html#ap11"><span class="id" title="definition">ap11</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id" title="var">done</span> || <span class="id" title="var">f_ap</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="tactic">trivial</span> ]<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">expand</span></span> replaces both terms of an equality (either <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#paths"><span class="id" title="inductive">paths</span></a></span> or <span class="inlinecode"><a class="idref" href="HoTT.Basics.Overture.html#pointwise_paths"><span class="id" title="definition">pointwise_paths</span></a></span> in the goal with their head normal forms 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">expand</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">idtac</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [ |- ?<span class="id" title="var">X</span> <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">Y</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">X'</span> := <span class="id" title="tactic">eval</span> <span class="id" title="tactic">hnf</span> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span> <span class="id" title="tactic">in</span> <span class="id" title="keyword">let</span> <span class="id" title="var">Y'</span> := <span class="id" title="tactic">eval</span> <span class="id" title="tactic">hnf</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Y</span> <span class="id" title="tactic">in</span> <span class="id" title="tactic">change</span> (<span class="id" title="var">X'</span> <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">Y'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [ |- ?<span class="id" title="var">X</span> <a class="idref" href="HoTT.Basics.Overture.html#2596316c6f2ff161cb03e25fd8914390"><span class="id" title="notation">==</span></a> ?<span class="id" title="var">Y</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">X'</span> := <span class="id" title="tactic">eval</span> <span class="id" title="tactic">hnf</span> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span> <span class="id" title="tactic">in</span> <span class="id" title="keyword">let</span> <span class="id" title="var">Y'</span> := <span class="id" title="tactic">eval</span> <span class="id" title="tactic">hnf</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Y</span> <span class="id" title="tactic">in</span> <span class="id" title="tactic">change</span> (<span class="id" title="var">X'</span> <a class="idref" href="HoTT.Basics.Overture.html#2596316c6f2ff161cb03e25fd8914390"><span class="id" title="notation">==</span></a> <span class="id" title="var">Y'</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>; <span class="id" title="tactic">simpl</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">atomic</span></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> is the same as <span class="inlinecode"><span class="id" title="tactic">idtac</span></span> if <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> is a variable or hypothesis, but is <span class="inlinecode"><span class="id" title="tactic">fail</span></span> <span class="inlinecode">0</span> if <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> has internal structure.  This is useful, for example, to easily destruct all variables that show up as the discriminees of <span class="inlinecode"><span class="id" title="keyword">match</span></span> statements, without destructing more complicated terms whose structures might matter. 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">atomic</span> <span class="id" title="var">x</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">idtac</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">x</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="var">is_evar</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">fail</span> 1 <span class="id" title="var">x</span> "is not atomic (evar)"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| ?<span class="id" title="var">f</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">fail</span> 1 <span class="id" title="var">x</span> "is not atomic (application)"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span>) ⇒ <span class="id" title="tactic">fail</span> 1 <span class="id" title="var">x</span> "is not atomic (fun)"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <span class="id" title="var">_</span><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">fail</span> 1 <span class="id" title="var">x</span> "is not atomic (forall)"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="keyword">let</span> <a id="x:330" class="idref" href="#x:330"><span class="id" title="binder">x</span></a> := <span class="id" title="var">_</span> <span class="id" title="tactic">in</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">fail</span> 1 <span class="id" title="var">x</span> "is not atomic (let in)"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="keyword">match</span> <span class="id" title="var">_</span> <span class="id" title="keyword">with</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span> <span class="id" title="keyword">end</span> ⇒ <span class="id" title="tactic">fail</span> 1 <span class="id" title="var">x</span> "is not atomic (match)"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="var">is_fix</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">fail</span> 1 <span class="id" title="var">x</span> "is not atomic (fix)"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="var">is_cofix</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">fail</span> 1 <span class="id" title="var">x</span> "is not atomic (cofix)"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="keyword">context</span>[?<span class="id" title="var">E</span>] ⇒  (<span class="id" title="var">assert_fails</span> <span class="id" title="var">constr_eq</span> <span class="id" title="var">E</span> <span class="id" title="var">x</span>); <span class="id" title="tactic">fail</span> 1 <span class="id" title="var">x</span> "is not atomic (has subterm" <span class="id" title="var">E</span> ")"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Find the head of the given expression. 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">head</span> <span class="id" title="var">expr</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">expr</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| ?<span class="id" title="var">f</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">head</span> <span class="id" title="var">f</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="var">expr</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
This tactic gets the constructor of any one-constructor inductive type. 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">get_constructor_head</span> <span class="id" title="var">T</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">x</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">x'</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">h</span> := <span class="id" title="var">open_constr</span>:(<span class="id" title="var">_</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">__</span> := <span class="id" title="keyword">constr</span>:(<span class="id" title="keyword">fun</span> (<a id="x:331" class="idref" href="#x:331"><span class="id" title="binder">x</span></a> : <span class="id" title="var">T</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⇒ <span class="id" title="keyword">let</span> <a id="x':332" class="idref" href="#x':332"><span class="id" title="binder">x'</span></a> := <a class="idref" href="HoTT.Basics.Overture.html#x:331"><span class="id" title="variable">x</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">ltac</span>:(<span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">x'</span> := (<span class="id" title="tactic">eval</span> <span class="id" title="tactic">cbv</span> <span class="id" title="keyword">delta</span> [<span class="id" title="var">x'</span>] <span class="id" title="tactic">in</span> <span class="id" title="var">x'</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">x'</span> := <span class="id" title="var">head</span> <span class="id" title="var">x'</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unify</span> <span class="id" title="var">h</span> <span class="id" title="var">x'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <a class="idref" href="Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">h</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">ntc_constructor</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [ |- ?<span class="id" title="var">G</span> ] ⇒ <span class="id" title="keyword">let</span> <span class="id" title="var">build</span> := <span class="id" title="var">get_constructor_head</span> <span class="id" title="var">G</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">nrapply</span> <span class="id" title="var">build</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">case_path</span></span> is a HoTT replacement for <span class="inlinecode"><span class="id" title="var">case_eq</span></span>; <span class="inlinecode"><span class="id" title="var">case_path</span></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> is like <span class="inlinecode"><span class="id" title="tactic">destruct</span></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span>, but it remembers the original value of <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> in an equation to be introduced. 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">case_path</span> <span class="id" title="var">x</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">x'</span> := <span class="id" title="tactic">fresh</span> "x" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">x'</span> := <span class="id" title="var">x</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="HoTT.Basics.Overture.html#idpath"><span class="id" title="constructor">idpath</span></a> : <span class="id" title="var">x'</span> <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">x</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">clearbody</span> <span class="id" title="var">x'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">x'</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">revert_opaque</span></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> is like <span class="inlinecode"><span class="id" title="var">revert</span></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span>, except that it fails if <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> is not an opaque variable (i.e. if it has a <span class="inlinecode">:=</span> definition rather than just a type). 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">revert_opaque</span> <span class="id" title="var">x</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">x</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [ |- <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <span class="id" title="var">_</span><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span> ] ⇒ <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">fail</span> 1 "Reverted constant is not an opaque variable"<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">transparent</span></span> <span class="inlinecode"><span class="id" title="tactic">assert</span></span> <span class="inlinecode">(<a class="idref" href="HoTT.Categories.Adjoint.Composition.AssociativityLaw.html#composition_lemmas.H"><span class="id" title="variable">H</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.LaxComma.CoreLaws.html#LaxCommaCategory.lax_comma_category_parts.T"><span class="id" title="variable">T</span></a>)</span> is like <span class="inlinecode"><span class="id" title="tactic">assert</span></span> <span class="inlinecode">(<a class="idref" href="HoTT.Categories.Adjoint.Composition.AssociativityLaw.html#composition_lemmas.H"><span class="id" title="variable">H</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.LaxComma.CoreLaws.html#LaxCommaCategory.lax_comma_category_parts.T"><span class="id" title="variable">T</span></a>)</span>, but leaves the body transparent.  Since binders don't respect <span class="inlinecode"><span class="id" title="tactic">fresh</span></span>, we use a name unlikely to be reused. 
</div>
<div class="code">
<span class="id" title="keyword">Tactic Notation</span> "transparent" "assert" "(" <span class="id" title="var">ident</span>(<span class="id" title="var">name</span>) ":" <span class="id" title="keyword">constr</span>(<span class="id" title="keyword">type</span>) ")" :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="keyword">let</span> <a id="__transparent_assert_hypothesis:333" class="idref" href="#__transparent_assert_hypothesis:333"><span class="id" title="binder">__transparent_assert_hypothesis</span></a> := (<span class="id" title="var">_</span> : <span class="id" title="keyword">type</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">_</span>);<br/>
&nbsp;&nbsp;[<br/>
&nbsp;&nbsp;| (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">H</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> <span class="id" title="var">H</span> := <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ⇒ <span class="id" title="keyword">constr</span>:(<span class="id" title="var">H</span>) <span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H</span> <span class="id" title="var">into</span> <span class="id" title="var">name</span>) ].<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">transparent</span></span> <span class="inlinecode"><span class="id" title="var">eassert</span></span> is like <span class="inlinecode"><span class="id" title="var">transparent</span></span> <span class="inlinecode"><span class="id" title="tactic">assert</span></span>, but allows holes in the type, which will be turned into evars. 
</div>
<div class="code">
<span class="id" title="keyword">Tactic Notation</span> "transparent" "assert" "(" <span class="id" title="var">ident</span>(<span class="id" title="var">name</span>) ":" <span class="id" title="keyword">constr</span>(<span class="id" title="keyword">type</span>) ")" "by" <span class="id" title="var">tactic3</span>(<span class="id" title="var">tac</span>) := <span class="id" title="keyword">let</span> <span class="id" title="var">name</span> := <span class="id" title="tactic">fresh</span> "H" <span class="id" title="tactic">in</span> <span class="id" title="var">transparent</span> <span class="id" title="tactic">assert</span> (<span class="id" title="var">name</span> : <span class="id" title="keyword">type</span>); [ <span class="id" title="tactic">solve</span> [ <span class="id" title="var">tac</span> ] | ].<br/>
<span class="id" title="keyword">Tactic Notation</span> "transparent" "eassert" "(" <span class="id" title="var">ident</span>(<span class="id" title="var">name</span>) ":" <span class="id" title="var">open_constr</span>(<span class="id" title="keyword">type</span>) ")" := <span class="id" title="var">transparent</span> <span class="id" title="tactic">assert</span> (<span class="id" title="var">name</span> : <span class="id" title="keyword">type</span>).<br/>
<span class="id" title="keyword">Tactic Notation</span> "transparent" "eassert" "(" <span class="id" title="var">ident</span>(<span class="id" title="var">name</span>) ":" <span class="id" title="var">open_constr</span>(<span class="id" title="keyword">type</span>) ")" "by" <span class="id" title="var">tactic3</span>(<span class="id" title="var">tac</span>) := <span class="id" title="var">transparent</span> <span class="id" title="tactic">assert</span> (<span class="id" title="var">name</span> : <span class="id" title="keyword">type</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">tac</span>.<br/>

<br/>
</div>

<div class="doc">
A version of Coq's <span class="inlinecode"><span class="id" title="var">remember</span></span> that uses our equality. 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">remember_as</span> <span class="id" title="var">term</span> <span class="id" title="var">name</span> <span class="id" title="var">eqname</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">name</span> := <span class="id" title="var">term</span>) <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">eqname</span> := <a class="idref" href="HoTT.Basics.Overture.html#idpath"><span class="id" title="constructor">idpath</span></a> : <span class="id" title="var">term</span> <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">name</span>);<br/>
&nbsp;&nbsp;<span class="id" title="var">clearbody</span> <span class="id" title="var">eqname</span> <span class="id" title="var">name</span>.<br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "remember" <span class="id" title="keyword">constr</span>(<span class="id" title="var">term</span>) "as" <span class="id" title="var">ident</span>(<span class="id" title="var">name</span>) "eqn:" <span class="id" title="var">ident</span>(<span class="id" title="var">eqname</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">remember_as</span> <span class="id" title="var">term</span> <span class="id" title="var">name</span> <span class="id" title="var">eqname</span>.<br/>

<br/>
</div>

<div class="doc">
A variant that doesn't substitute in the goal and hypotheses. 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">recall_as</span> <span class="id" title="var">term</span> <span class="id" title="var">name</span> <span class="id" title="var">eqname</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">name</span> := <span class="id" title="var">term</span>);<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">eqname</span> := <a class="idref" href="HoTT.Basics.Overture.html#idpath"><span class="id" title="constructor">idpath</span></a> : <span class="id" title="var">term</span> <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">name</span>);<br/>
&nbsp;&nbsp;<span class="id" title="var">clearbody</span> <span class="id" title="var">eqname</span> <span class="id" title="var">name</span>.<br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "recall" <span class="id" title="keyword">constr</span>(<span class="id" title="var">term</span>) "as" <span class="id" title="var">ident</span>(<span class="id" title="var">name</span>) "eqn:" <span class="id" title="var">ident</span>(<span class="id" title="var">eqname</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">recall_as</span> <span class="id" title="var">term</span> <span class="id" title="var">name</span> <span class="id" title="var">eqname</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">rel_hnf</span></span>, when given a goal of the form <span class="inlinecode"><a class="idref" href="HoTT.Categories.CategoryOfSections.Core.html#FunctorSectionCategory.R"><span class="id" title="variable">R</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> <span class="inlinecode"><a class="idref" href="HoTT.Categories.Functor.Attributes.html#fully_faithful_helpers.y"><span class="id" title="variable">y</span></a></span> for any relation <span class="inlinecode"><a class="idref" href="HoTT.Categories.CategoryOfSections.Core.html#FunctorSectionCategory.R"><span class="id" title="variable">R</span></a></span>, puts <span class="inlinecode"><a class="idref" href="HoTT.Categories.Grothendieck.PseudofunctorToCat.html#x"><span class="id" title="projection">x</span></a></span> and <span class="inlinecode"><a class="idref" href="HoTT.Categories.Functor.Attributes.html#fully_faithful_helpers.y"><span class="id" title="variable">y</span></a></span> in head normal form. 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">rel_hnf</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">idtac</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [ |- ?<span class="id" title="var">R</span> ?<span class="id" title="var">x</span> ?<span class="id" title="var">y</span> ] ⇒ <span class="id" title="keyword">let</span> <span class="id" title="var">x'</span> := (<span class="id" title="tactic">eval</span> <span class="id" title="tactic">hnf</span> <span class="id" title="tactic">in</span> <span class="id" title="var">x</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">y'</span> := (<span class="id" title="tactic">eval</span> <span class="id" title="tactic">hnf</span> <span class="id" title="tactic">in</span> <span class="id" title="var">y</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">R</span> <span class="id" title="var">x'</span> <span class="id" title="var">y'</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
This tactic is a version of <span class="inlinecode"><span class="id" title="var">tryif</span></span> <span class="inlinecode"><span class="id" title="var">require</span></span> <span class="inlinecode">()</span> <span class="inlinecode"><span class="id" title="keyword">then</span></span> <span class="inlinecode"><span class="id" title="var">if_yes</span></span> <span class="inlinecode">()</span> <span class="inlinecode"><span class="id" title="keyword">else</span></span> <span class="inlinecode"><span class="id" title="var">if_no</span></span> <span class="inlinecode">()</span> which is suitable for use in constructing constrs by virtue of being evaluated during the Ltac expression evaluation phase rather than during the tactic running phase.
All three arguments are expected to be tactic thunks which will be passed a dummy unit argument.
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">tryif_cps</span> <span class="id" title="var">require</span> <span class="id" title="var">if_yes</span> <span class="id" title="var">if_no</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">res</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">constr</span>:(<span class="id" title="keyword">Set</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="keyword">let</span> <span class="id" title="var">__</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">constr</span>:(<span class="id" title="keyword">Set</span>) <span class="id" title="keyword">with</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">require</span> () <span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">ltac</span>:(<span class="id" title="var">if_yes</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="keyword">ltac</span>:(<span class="id" title="var">if_no</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span> <span class="id" title="var">res</span> ().<br/>

<br/>
</div>

<div class="doc">
The following tactic <span class="inlinecode"><span class="id" title="var">issig</span></span> proves automatically that a record type is equivalent to a nested Sigma-type. Specifically, it proves a goal that looks like

<div class="paragraph"> </div>

<pre>
   { x : A &amp; B x } &lt;~&gt; Some_Record
</pre>

<div class="paragraph"> </div>

In fact you don't even have to write down the sigma type. Though it is good practice to write it out anyway, this tactic can work out the sigma type and tell you what it should look like.

<div class="paragraph"> </div>

The following should generate the desired equivalence. You can check the definition to see what type it has and therefore what the sigma type should be.

<div class="paragraph"> </div>

<pre>
  Definition issig_myrecord
    : _ &lt;~&gt; MyRecord := ltac:(issig).

  Check issig_myrecord.
</pre>

<div class="paragraph"> </div>

In order to define this tactic we have many helper tactics.

<div class="paragraph"> </div>


</div>
<div class="code">

<br/>
<span class="id" title="keyword">Local Ltac</span> <span class="id" title="var">peel_evars</span> <span class="id" title="var">term</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="var">term</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| ?<span class="id" title="var">f</span> ?<span class="id" title="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;⇒ <span class="id" title="var">tryif_cps</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">ltac</span>:(<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">has_evar</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">ltac</span>:(<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">peel_evars</span> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">ltac</span>:(<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">term</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="var">term</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Local Ltac</span> <span class="id" title="var">pi_to_sig</span> <span class="id" title="var">ty</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> (<span class="id" title="tactic">eval</span> <span class="id" title="tactic">cbv</span> <span class="id" title="keyword">beta</span> <span class="id" title="tactic">in</span> <span class="id" title="var">ty</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">(</span></a><a id="x:336" class="idref" href="#x:336"><span class="id" title="binder">x</span></a> : ?<span class="id" title="var">T</span>) (<a id="y:337" class="idref" href="#y:337"><span class="id" title="binder">y</span></a> : @?<span class="id" title="var">A</span> <a class="idref" href="HoTT.Basics.Overture.html#x:334"><span class="id" title="variable">x</span></a><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">),</span></a> @?<span class="id" title="var">P</span> <a class="idref" href="HoTT.Basics.Overture.html#x:334"><span class="id" title="variable">x</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:335"><span class="id" title="variable">y</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;⇒ <span class="id" title="keyword">let</span> <span class="id" title="var">x'</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">constr</span>:(@<a class="idref" href="Coq.Init.Specif.html#sigT"><span class="id" title="abbreviation">sigT</span></a> <span class="id" title="var">T</span> (<span class="id" title="keyword">fun</span> <a id="x':338" class="idref" href="#x':338"><span class="id" title="binder">x'</span></a> : <span class="id" title="var">T</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">ltac</span>:(<span class="id" title="keyword">let</span> <span class="id" title="var">res</span> := <span class="id" title="var">pi_to_sig</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a id="y:339" class="idref" href="#y:339"><span class="id" title="binder">y</span></a> : <span class="id" title="var">A</span> <span class="id" title="var">x'</span><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">,</span></a> <span class="id" title="var">P</span> <span class="id" title="var">x'</span> <a class="idref" href="HoTT.Basics.Overture.html#y:339"><span class="id" title="variable">y</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="tactic">exact</span> <span class="id" title="var">res</span>)))<br/>
&nbsp;&nbsp;| ?<span class="id" title="var">T</span> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">T</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Local Ltac</span> <span class="id" title="var">ctor_to_sig</span> <span class="id" title="var">ctor</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ctor</span> := <span class="id" title="var">peel_evars</span> <span class="id" title="var">ctor</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">t</span> := <span class="id" title="keyword">type</span> <span class="id" title="keyword">of</span> <span class="id" title="var">ctor</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">pi_to_sig</span> <span class="id" title="var">t</span>.<br/>

<br/>
<span class="id" title="keyword">Local Ltac</span> <span class="id" title="var">unify_first_evar_with</span> <span class="id" title="var">term</span> <span class="id" title="var">u</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="var">term</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| ?<span class="id" title="var">f</span> ?<span class="id" title="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;⇒ <span class="id" title="var">tryif</span> <span class="id" title="var">has_evar</span> <span class="id" title="var">f</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <span class="id" title="var">unify_first_evar_with</span> <span class="id" title="var">f</span> <span class="id" title="var">u</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="var">unify</span> <span class="id" title="var">x</span> <span class="id" title="var">u</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Local Ltac</span> <span class="id" title="var">unify_with_projections</span> <span class="id" title="var">term</span> <span class="id" title="var">u</span> :=<br/>
&nbsp;&nbsp;(<span class="id" title="var">unify_first_evar_with</span> <span class="id" title="var">term</span> <span class="id" title="var">u</span><a class="idref" href="HoTT.Basics.Overture.html#::fibration_scope:x_'.1'"><span class="id" title="notation">.1</span></a>; <span class="id" title="var">unify_with_projections</span> <span class="id" title="var">term</span> <span class="id" title="var">u</span><a class="idref" href="HoTT.Basics.Overture.html#::fibration_scope:x_'.2'"><span class="id" title="notation">.2</span></a>) +<br/>
&nbsp;&nbsp;(<span class="id" title="var">unify_first_evar_with</span> <span class="id" title="var">term</span> <span class="id" title="var">u</span>;<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">tryif</span> <span class="id" title="var">has_evar</span> <span class="id" title="var">term</span> <span class="id" title="keyword">then</span> <span class="id" title="tactic">fail</span> 0 <span class="id" title="var">term</span> "has evars remaining" <span class="id" title="keyword">else</span> <span class="id" title="tactic">idtac</span>).<br/>

<br/>
<span class="id" title="keyword">Local Ltac</span> <span class="id" title="var">refine_with_existT_as_much_as_needed_then_destruct</span> <span class="id" title="var">v</span> :=<br/>
&nbsp;&nbsp;((<span class="id" title="tactic">destruct</span> <span class="id" title="var">v</span>; <span class="id" title="var">shelve</span>) +<br/>
&nbsp;&nbsp;&nbsp;(<span class="id" title="var">snrefine</span> <a class="idref" href="HoTT.Basics.Overture.html#4887cec9c4a6ccb88dc6b18963c35c8f"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span> <a class="idref" href="HoTT.Basics.Overture.html#4887cec9c4a6ccb88dc6b18963c35c8f"><span class="id" title="notation">;</span></a> <span class="id" title="var">_</span><a class="idref" href="HoTT.Basics.Overture.html#4887cec9c4a6ccb88dc6b18963c35c8f"><span class="id" title="notation">)</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id" title="tactic">destruct</span> <span class="id" title="var">v</span>; <span class="id" title="var">shelve</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">refine_with_existT_as_much_as_needed_then_destruct</span> <span class="id" title="var">v</span> ])).<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">issig</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">hnf</span>; <br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">A</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> |- ?<span class="id" title="var">sigma</span> <a class="idref" href="HoTT.Basics.Overture.html#068136b784cb569aaadfa01f234d5c01"><span class="id" title="notation">&lt;~&gt;</span></a> ?<span class="id" title="var">record</span> ⇒ <span class="id" title="keyword">constr</span>:(<span class="id" title="var">sigma</span>) <span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">B</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> |- ?<span class="id" title="var">sigma</span> <a class="idref" href="HoTT.Basics.Overture.html#068136b784cb569aaadfa01f234d5c01"><span class="id" title="notation">&lt;~&gt;</span></a> ?<span class="id" title="var">record</span> ⇒ <span class="id" title="keyword">constr</span>:(<span class="id" title="var">record</span>) <span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">u</span> := <span class="id" title="tactic">fresh</span> "u" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">v</span> := <span class="id" title="tactic">fresh</span> "v" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;</div>

<div class="doc">
We build an equivalence with 5 holes. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="var">snrefine</span>  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="HoTT.Basics.Overture.html#Build_Equiv"><span class="id" title="constructor">Build_Equiv</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">_</span> (<a class="idref" href="HoTT.Basics.Overture.html#Build_IsEquiv"><span class="id" title="constructor">Build_IsEquiv</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span> (<span class="id" title="keyword">fun</span> <a id="u:340" class="idref" href="#u:340"><span class="id" title="binder">u</span></a> ⇒ <span class="id" title="var">_</span>) (<span class="id" title="keyword">fun</span> <a id="v:341" class="idref" href="#v:341"><span class="id" title="binder">v</span></a> ⇒ <span class="id" title="var">_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="v:342" class="idref" href="#v:342"><span class="id" title="binder">v</span></a> ⇒ <span class="id" title="var">_</span>) (<span class="id" title="keyword">fun</span> <a id="u:343" class="idref" href="#u:343"><span class="id" title="binder">u</span></a> ⇒ <span class="id" title="var">_</span>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span>)));<br/>
&nbsp;&nbsp;</div>

<div class="doc">
Going from a sigma type to a record 
</div>
<div class="code">
&nbsp;&nbsp;[ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">T</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> |- ?<span class="id" title="var">T</span> ⇒ <span class="id" title="var">T</span> <span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">built</span> := <span class="id" title="var">open_constr</span>:(<span class="id" title="keyword">ltac</span>:(<span class="id" title="var">ntc_constructor</span>) : <span class="id" title="var">T</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">A'</span> := <span class="id" title="var">ctor_to_sig</span> <span class="id" title="var">built</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unify</span> <span class="id" title="var">A</span> <span class="id" title="var">A'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unify_with_projections</span> <span class="id" title="var">built</span> <span class="id" title="var">u</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> <span class="id" title="var">built</span><br/>
&nbsp;&nbsp;</div>

<div class="doc">
Going from a record to a sigma type 
</div>
<div class="code">
&nbsp;&nbsp;| <span class="id" title="var">refine_with_existT_as_much_as_needed_then_destruct</span> <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;</div>

<div class="doc">
Proving eissect 
</div>
<div class="code">
&nbsp;&nbsp;| <span class="id" title="tactic">destruct</span> <span class="id" title="var">v</span>; <span class="id" title="var">cbn</span> [<span class="id" title="var">pr1</span> <span class="id" title="var">pr2</span>]; <span class="id" title="tactic">reflexivity</span><br/>
&nbsp;&nbsp;</div>

<div class="doc">
Proving eisretr 
</div>
<div class="code">
&nbsp;&nbsp;| <span class="id" title="tactic">reflexivity</span><br/>
&nbsp;&nbsp;</div>

<div class="doc">
Proving eisadj 
</div>
<div class="code">
&nbsp;&nbsp;| <span class="id" title="tactic">reflexivity</span> ].<br/>

<br/>
</div>

<div class="doc">
We show how the tactic works in a couple of examples. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="issig_contr" class="idref" href="#issig_contr"><span class="id" title="definition">issig_contr</span></a> (<a id="A:344" class="idref" href="#A:344"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><a id="x:345" class="idref" href="#x:345"><span class="id" title="binder">x</span></a> <a class="idref" href="Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <a class="idref" href="HoTT.Basics.Overture.html#A:344"><span class="id" title="variable">A</span></a> <a class="idref" href="Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a id="y:346" class="idref" href="#y:346"><span class="id" title="binder">y</span></a><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">,</span></a> <a class="idref" href="HoTT.Basics.Overture.html#x:345"><span class="id" title="variable">x</span></a> <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="HoTT.Basics.Overture.html#y:346"><span class="id" title="variable">y</span></a><a class="idref" href="Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a> <a class="idref" href="HoTT.Basics.Overture.html#068136b784cb569aaadfa01f234d5c01"><span class="id" title="notation">&lt;~&gt;</span></a> <a class="idref" href="HoTT.Basics.Overture.html#Contr"><span class="id" title="abbreviation">Contr</span></a> <a class="idref" href="HoTT.Basics.Overture.html#A:344"><span class="id" title="variable">A</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">issig</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="issig_equiv" class="idref" href="#issig_equiv"><span class="id" title="definition">issig_equiv</span></a> (<a id="A:347" class="idref" href="#A:347"><span class="id" title="binder">A</span></a> <a id="B:348" class="idref" href="#B:348"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><a id="f:349" class="idref" href="#f:349"><span class="id" title="binder">f</span></a> <a class="idref" href="Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <a class="idref" href="HoTT.Basics.Overture.html#A:347"><span class="id" title="variable">A</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="HoTT.Basics.Overture.html#B:348"><span class="id" title="variable">B</span></a> <a class="idref" href="Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="HoTT.Basics.Overture.html#IsEquiv"><span class="id" title="class">IsEquiv</span></a> <a class="idref" href="HoTT.Basics.Overture.html#f:349"><span class="id" title="variable">f</span></a><a class="idref" href="Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a> <a class="idref" href="HoTT.Basics.Overture.html#068136b784cb569aaadfa01f234d5c01"><span class="id" title="notation">&lt;~&gt;</span></a> <a class="idref" href="HoTT.Basics.Overture.html#Equiv"><span class="id" title="record">Equiv</span></a> <a class="idref" href="HoTT.Basics.Overture.html#A:347"><span class="id" title="variable">A</span></a> <a class="idref" href="HoTT.Basics.Overture.html#B:348"><span class="id" title="variable">B</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">issig</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="issig_isequiv" class="idref" href="#issig_isequiv"><span class="id" title="definition">issig_isequiv</span></a> {<a id="A:350" class="idref" href="#A:350"><span class="id" title="binder">A</span></a> <a id="B:351" class="idref" href="#B:351"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>} (<a id="f:352" class="idref" href="#f:352"><span class="id" title="binder">f</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:350"><span class="id" title="variable">A</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="HoTT.Basics.Overture.html#B:351"><span class="id" title="variable">B</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><a id="g:353" class="idref" href="#g:353"><span class="id" title="binder">g</span></a> <a class="idref" href="Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <a class="idref" href="HoTT.Basics.Overture.html#B:351"><span class="id" title="variable">B</span></a> <a class="idref" href="Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="HoTT.Basics.Overture.html#A:350"><span class="id" title="variable">A</span></a> <a class="idref" href="Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><a id="r:354" class="idref" href="#r:354"><span class="id" title="binder">r</span></a> <a class="idref" href="Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <a class="idref" href="HoTT.Basics.Overture.html#f:352"><span class="id" title="variable">f</span></a> <a class="idref" href="HoTT.Basics.Overture.html#::function_scope:x_'o'_x"><span class="id" title="notation">o</span></a> <a class="idref" href="HoTT.Basics.Overture.html#g:353"><span class="id" title="variable">g</span></a> <a class="idref" href="HoTT.Basics.Overture.html#2596316c6f2ff161cb03e25fd8914390"><span class="id" title="notation">==</span></a> <a class="idref" href="HoTT.Basics.Overture.html#idmap"><span class="id" title="abbreviation">idmap</span></a> <a class="idref" href="Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a> <a id="s:355" class="idref" href="#s:355"><span class="id" title="binder">s</span></a> <a class="idref" href="Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <a class="idref" href="HoTT.Basics.Overture.html#g:353"><span class="id" title="variable">g</span></a> <a class="idref" href="HoTT.Basics.Overture.html#::function_scope:x_'o'_x"><span class="id" title="notation">o</span></a> <a class="idref" href="HoTT.Basics.Overture.html#f:352"><span class="id" title="variable">f</span></a> <a class="idref" href="HoTT.Basics.Overture.html#2596316c6f2ff161cb03e25fd8914390"><span class="id" title="notation">==</span></a> <a class="idref" href="HoTT.Basics.Overture.html#idmap"><span class="id" title="abbreviation">idmap</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">∀</span></a> <a id="x:356" class="idref" href="#x:356"><span class="id" title="binder">x</span></a> : <a class="idref" href="HoTT.Basics.Overture.html#A:350"><span class="id" title="variable">A</span></a><a class="idref" href="HoTT.Basics.Notations.html#adf9957462624adc9c2c94f56add3958"><span class="id" title="notation">,</span></a> <a class="idref" href="HoTT.Basics.Overture.html#r:354"><span class="id" title="variable">r</span></a> (<a class="idref" href="HoTT.Basics.Overture.html#f:352"><span class="id" title="variable">f</span></a> <a class="idref" href="HoTT.Basics.Overture.html#x:356"><span class="id" title="variable">x</span></a>) <a class="idref" href="HoTT.Basics.Overture.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="HoTT.Basics.Overture.html#ap"><span class="id" title="definition">ap</span></a> <a class="idref" href="HoTT.Basics.Overture.html#f:352"><span class="id" title="variable">f</span></a> (<a class="idref" href="HoTT.Basics.Overture.html#s:355"><span class="id" title="variable">s</span></a> <a class="idref" href="HoTT.Basics.Overture.html#x:356"><span class="id" title="variable">x</span></a>)<a class="idref" href="Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}}}</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="HoTT.Basics.Overture.html#068136b784cb569aaadfa01f234d5c01"><span class="id" title="notation">&lt;~&gt;</span></a> <a class="idref" href="HoTT.Basics.Overture.html#IsEquiv"><span class="id" title="class">IsEquiv</span></a> <a class="idref" href="HoTT.Basics.Overture.html#f:352"><span class="id" title="variable">f</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">issig</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
The general reasoning behind the issig tactic is: if we know the type of the record, econstructor will give us the constructor applied to evars for each field. If we assume that there are no evars in the type, we can unify the first evar with u.1, the next evar with u.2.1, the next with u.2.2.1, etc, and if we run out of evars or projections, we backtrack and instead fill the final evar with u.2.2....2. (Note that if we strip the trailing evars from the constructor before unifying them, we get a term with a Pi type, and if we drop the final codomain and turn the Pi type into a Sigma, this lets us autogenerate the Sigma type we should be using; this is how the versions that don't need a hand-crafted Sigma type work: they unify the generated type with the term in the goal that should be the Sigma type.)

<div class="paragraph"> </div>

Generating the function the other way is a bit trickier, because there's no easy way to get our hands on all the projections of the record, and moreover we don't even know how many pairings we'll need. The thing we want to do is introduce the right number of pairings, destruct the variable of record type in the goal for each component, and then magically use the right projection. I'll get back to the magic in a moment; first we need to take care of the "right number" of pairings. We could pull a trick where we infer the number by looking at the term we get from econstructor in a goal whose type is the record. Instead, I chose the more concise route of coding a tactic that introduces the minimum number of pairings needed to make the magic work. How does it know the minimum number? It doesn't need to! The wonder of (recursive) multisuccess tactics is that you can say "try no pairings, and if that makes any future tactic fail, backtrack and try one pairing, and if that doesn't work, backtrack and try two pairings, etc". (The downside is that the error messages you get when you set things up wrong are truly incomprehensible, because if you make a typo in any of the fields of the Sigma type the error message you end up getting is something like "(_; _) is a Sigma type but it was expected to have the type of the final field" (and it's always about the final field, regardless of which field you made a typo in). So plausibly it's worth it to still do the small issig tactics by hand, and only use this tactic for &gt;= 5 fields or something.)

<div class="paragraph"> </div>

Okay, now onto the magic. How do we know which field is the right one? Well, there's only one answer that lets us prove the section and retraction by destruct+reflexivity, so we can let unification solve this problem for us. It's important to have destructed the record variable in each of the pair-component evars, because unification is not (yet) smart enough to invert records for us; this is what the destruct before shelve in the inverse function generation tactic is. We cbn pr1 and pr2 to make the unification problem be completely syntactic (no need to unfold anything during unification). This is probably not strictly necessary, but seems like good form to me.

<div class="paragraph"> </div>

Finally, we can prove the other one of the section/retraction pair (I can never recall which is which), and the adjoint, by reflexively. (Perhaps it would be better to use exact idpath, if we want to not have to unfold reflexivity when using equivalences generated by these tactics.) 
</div>
<div class="code">
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>