<html>
<head>
<title>PseudofunctorToCat.v</title>
<style>
.time {
  background-color: #ffaaaa;
  height: 100%;
  z-index: -1;
  position: absolute;
}
.code {
  z-index: 0;
  position: relative;
  border-style: solid;
  border-color: transparent;
  border-width: 1px;
}
.code:hover {
  border-style: solid;
  border-color: black;
  border-width: 1px;
}
pre {
  margin: 1px;
}
</style>
</head>
<body>
<h1>Timings for PseudofunctorToCat.v</h1>

<div class="code" title="File: PseudofunctorToCat.v
Line: 1
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>(** * Grothendieck Construction of a pseudofunctor to Cat *)</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 1
Time: 0.044s">
<div class="time" style="width: 22.110552763819%"></div>
<pre>Require Import FunctorCategory.Morphisms.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 1
Time: 0.005s">
<div class="time" style="width: 2.5125628140704%"></div>
<pre>
Require Import Category.Core Functor.Core NaturalTransformation.Core.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 2
Time: 0.001s">
<div class="time" style="width: 0.50251256281407%"></div>
<pre>
Require Import Pseudofunctor.Core Pseudofunctor.RewriteLaws.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 3
Time: 0.001s">
<div class="time" style="width: 0.50251256281407%"></div>
<pre>
Require Import Category.Morphisms NaturalTransformation.Isomorphisms Cat.Morphisms.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 4
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Require Import Functor.Composition.Core Functor.Composition.Laws.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 5
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Require Import Functor.Identity.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 6
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Require Import FunctorCategory.Core.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 7
Time: 0.012s">
<div class="time" style="width: 6.0301507537688%"></div>
<pre>
Require Import Basics Types HoTT.Tactics PathGroupoids.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 8
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Set Universe Polymorphism.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 10
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Set Implicit Arguments.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 11
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Generalizable All Variables.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 12
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Set Asymmetric Patterns.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 13
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Local Open Scope morphism_scope.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 15
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Section Grothendieck.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 17
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Context `{Funext}.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 18
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Variable C : PreCategory.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 20
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Variable F : Pseudofunctor C.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 21
Time: 0.001s">
<div class="time" style="width: 0.50251256281407%"></div>
<pre>

  Record Pair :=
    {
      c : C;
      x : object (F c)
    }.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 27
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Local Notation morphism s d :=
    { f : morphism C s.(c) d.(c)
    | morphism _ (p_morphism_of F f s.(x)) d.(x) }.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 31
Time: 0.002s">
<div class="time" style="width: 1.0050251256281%"></div>
<pre>

  Definition compose s d d'
             (m1 : morphism d d')
             (m2 : morphism s d)
  : morphism s d'.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 36
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 37
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exists (m1.1 o m2.1).</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 38
Time: 0.001s">
<div class="time" style="width: 0.50251256281407%"></div>
<pre>
    refine (m1.2 o ((p_morphism_of F m1.1) _1 m2.2 o _)).</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 39
Time: 0.001s">
<div class="time" style="width: 0.50251256281407%"></div>
<pre>
    apply (p_composition_of F).</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 40
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 41
Time: 0.001s">
<div class="time" style="width: 0.50251256281407%"></div>
<pre>

  Definition identity s : morphism s s.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 43
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 44
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exists 1.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 45
Time: 0.001s">
<div class="time" style="width: 0.50251256281407%"></div>
<pre>
    apply (p_identity_of F).</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 46
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 47
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Global Arguments identity _ / .</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 49
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Global Arguments compose _ _ _ _ _ / .</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 50
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Local Ltac try_associativity_f_ap :=
    first [ f_ap; []
          | repeat (etransitivity; [ apply Category.Core.associativity | ]);
            repeat (etransitivity; [ | symmetry; apply Category.Core.associativity ]);
            f_ap; []
          | repeat (etransitivity; [ symmetry; apply Category.Core.associativity | ]);
            repeat (etransitivity; [ | apply Category.Core.associativity ]);
            f_ap; [] ].</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 59
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Local Ltac assoc_before_commutes_tac :=
    rewrite !composition_of;
    rewrite &lt;- !Category.Core.associativity;
    etransitivity; [ | symmetry; apply compose4associativity_helper ].</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 64
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Local Ltac assoc_fin_tac :=
    repeat match goal with
             | _ =&gt; reflexivity
             | _ =&gt; progress rewrite ?Category.Core.left_identity, ?Category.Core.right_identity
             | [ |- context[components_of ?T ?x o components_of ?T^-1 ?x] ]
               =&gt; let k := constr:(@iso_compose_pV _ _ _ (T x) _) in
                  simpl rewrite k (* https://coq.inria.fr/bugs/show_bug.cgi?id=3773 and https://coq.inria.fr/bugs/show_bug.cgi?id=3772 (probably) *)
             | _ =&gt; try_associativity_quick
                      first [ f_ap; []
                            | apply concat_left_identity
                            | apply concat_right_identity ]
             | _ =&gt; rewrite &lt;- ?identity_of, &lt;- ?composition_of;
                   progress repeat (f_ap; []);
                   rewrite ?identity_of, ?composition_of
             | _ =&gt; try_associativity_quick rewrite compose4associativity_helper
           end.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 81
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Local Ltac helper_t before_commutes_tac :=
    repeat intro;
    symmetry;
    apply path_sigma_uncurried;
    simpl in *;
    let ex_hyp := match goal with
                    | [ H : ?A = ?B |- @sig (?B = ?A) _ ] =&gt; constr:(H)
                  end in
    (exists (inverse ex_hyp));
      simpl;
      rewrite ?transport_Fc_to_idtoiso, ?transport_cF_to_idtoiso;
      rewrite ?idtoiso_inv, ?ap_V, ?inv_V;
      simpl;
      let rew_hyp := match goal with
                       | [ H' : context[ex_hyp] |- _ ] =&gt; constr:(H')
                     end in
      rewrite rew_hyp;
        clear rew_hyp ex_hyp;
        before_commutes_tac;
        repeat first [ reflexivity
                     | progress rewrite ?Category.Core.left_identity, ?Category.Core.right_identity
                     | try_associativity_quick (f_ap; []) ];
        match goal with
          | _ =&gt; reflexivity
          | [ |- context[?F _1 ?m o components_of ?T ?x] ]
            =&gt; simpl rewrite &lt;- (commutes T _ _ m);
              try reflexivity
          | [ |- context[components_of ?T ?x o ?F _1 ?m] ]
            =&gt; simpl rewrite (commutes T _ _ m);
              try reflexivity
        end.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 113
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (* The goal for, e.g., the following associativity helper was made
  with the following code:
&lt;&lt;
intros a b c d [f f'] [g g'] [h h']; simpl.
    pose proof (apD10 (ap components_of (p_composition_ofCoherent_for_rewrite F _ _ _ _ f g h))) as rew_hyp.
    revert rew_hyp.
    generalize dependent (Category.Core.associativity C _ _ _ _ f g h). intros fst_hyp ?.

    simpl in *.
    hnf in rew_hyp.
    simpl in *.

    Local Ltac gen_x x :=
      generalize dependent (X x);
      generalize dependent (C x);
      repeat (let x1 := fresh "x" in intro x1).
    gen_x a.
    gen_x b.
    gen_x c.
    gen_x d.
    repeat match goal with
             | [ |- context[p_identity_of ?F ?x] ]
               =&gt; generalize dependent (p_identity_of F x)
             | [ |- context[p_composition_of ?F ?x ?y ?z ?f ?g] ]
               =&gt; generalize dependent (p_composition_of F x y z f g)
             | [ |- context[p_morphism_of ?F ?m] ]
               =&gt; generalize dependent (p_morphism_of F m)
             | [ |- context[p_object_of ?F ?x] ]
               =&gt; generalize dependent (p_object_of F x)
             | [ H : context[p_morphism_of ?F ?m] |- _ ]
               =&gt; generalize dependent (p_morphism_of F m)
             | [ |- context[@p_morphism_of _ _ ?F ?x ?y] ]
               =&gt; generalize dependent (@p_morphism_of _ _ F x y)
           end.
    simpl.

    intros.

    lazymatch goal with
      | [ H : context[ap ?f ?H'] |- _ ]
        =&gt; rename H' into fst_hyp;
          rename H into rew_hyp;
          move rew_hyp at top
    end.

    generalize dependent fst_hyp.
    clear.
    intros.
    move rew_hyp at top.

    move H at top.

    repeat match goal with
             | [ H : Isomorphic _ _ |- _ ]
               =&gt; let x := fresh "x" in
                  let H' := fresh "H" in
                  destruct H as [x H'];
                    simpl in *
           end.
    move rew_hyp at top.
    repeat match goal with
             | [ H : _ |- _ ] =&gt; revert H
           end.

    intro H.
    intro C.
&gt;&gt; *)

 </pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 183
Time: 0.03s">
<div class="time" style="width: 15.075376884422%"></div>
<pre>Lemma pseudofunctor_to_cat_assoc_helper
  : forall {x x0 : C} {x2 : Category.Core.morphism C x x0} {x1 : C}
           {x5 : Category.Core.morphism C x0 x1} {x4 : C} {x7 : Category.Core.morphism C x1 x4}
           {p p0 : PreCategory} {f : Category.Core.morphism C x x4 -&gt; Functor p0 p}
           {p1 p2 : PreCategory} {f0 : Functor p2 p} {f1 : Functor p1 p2}
           {f2 : Functor p0 p2} {f3 : Functor p0 p1} {f4 : Functor p1 p}
           {x16 : Category.Core.morphism (_ -&gt; _) (f (x7 o x5 o x2)) (f4 o f3)%functor}
           {x15 : Category.Core.morphism (_ -&gt; _) f2 (f1 o f3)%functor} {H2 : IsIsomorphism x15}
           {x11 : Category.Core.morphism (_ -&gt; _) (f (x7 o (x5 o x2))) (f0 o f2)%functor}
           {H1 : IsIsomorphism x11} {x9 : Category.Core.morphism (_ -&gt; _) f4 (f0 o f1)%functor}
           {fst_hyp : x7 o x5 o x2 = x7 o (x5 o x2)}
           (rew_hyp : forall x3 : p0,
                        (idtoiso (p0 -&gt; p) (ap f fst_hyp) : Category.Core.morphism _ _ _) x3 =
                        x11^-1 x3 o (f0 _1 (x15^-1 x3) o (1 o (x9 (f3 x3) o x16 x3))))
           {H0' : IsIsomorphism x16}
           {H1' : IsIsomorphism x9}
           {x13 : p} {x3 : p0} {x6 : p1} {x10 : p2}
           {x14 : Category.Core.morphism p (f0 x10) x13} {x12 : Category.Core.morphism p2 (f1 x6) x10}
           {x8 : Category.Core.morphism p1 (f3 x3) x6},
      exist (fun f5 : Category.Core.morphism C x x4 =&gt; Category.Core.morphism p ((f f5) x3) x13)
             (x7 o x5 o x2)
             (x14 o (f0 _1 x12 o x9 x6) o (f4 _1 x8 o x16 x3)) =
      (x7 o (x5 o x2); x14 o (f0 _1 (x12 o (f1 _1 x8 o x15 x3)) o x11 x3)).</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 205
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 206
Time: 0.199s">
<div class="time" style="width: 100%"></div>
<pre>
    helper_t assoc_before_commutes_tac.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 207
Time: 0.093s">
<div class="time" style="width: 46.733668341709%"></div>
<pre>
    assoc_fin_tac.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 208
Time: 0.073s">
<div class="time" style="width: 36.683417085427%"></div>
<pre>
  Qed.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 209
Time: 0.009s">
<div class="time" style="width: 4.5226130653266%"></div>
<pre>

  Lemma pseudofunctor_to_cat_left_identity_helper
  : forall {x1 x2 : C} {f : Category.Core.morphism C x2 x1} {p p0 : PreCategory}
           {f0 : Category.Core.morphism C x2 x1 -&gt; Functor p0 p} {f1 : Functor p p}
           {x0 : Category.Core.morphism (_ -&gt; _) (f0 (1 o f)) (f1 o f0 f)%functor}
           {x : Category.Core.morphism (_ -&gt; _) f1 1%functor}
           {fst_hyp : 1 o f = f}
           (rewrite_hyp : forall x3 : p0,
                            (idtoiso (p0 -&gt; p) (ap f0 fst_hyp) : Category.Core.morphism _ _ _) x3
                            = 1 o (x ((f0 f) x3) o x0 x3))
           {H0' : IsIsomorphism x0}
           {H1' : IsIsomorphism x}
           {x3 : p} {x4 : p0} {f' : Category.Core.morphism p ((f0 f) x4) x3},
      exist (fun f2 : Category.Core.morphism C x2 x1 =&gt; Category.Core.morphism p ((f0 f2) x4) x3)
             (1 o f)
             (x x3 o (f1 _1 f' o x0 x4))
      = (f; f').</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 226
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 227
Time: 0.05s">
<div class="time" style="width: 25.125628140704%"></div>
<pre>
    helper_t idtac.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 228
Time: 0.011s">
<div class="time" style="width: 5.5276381909548%"></div>
<pre>
  Qed.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 229
Time: 0.008s">
<div class="time" style="width: 4.0201005025126%"></div>
<pre>

  Lemma pseudofunctor_to_cat_right_identity_helper
  : forall {x1 x2 : C} {f : Category.Core.morphism C x2 x1} {p p0 : PreCategory}
           {f0 : Category.Core.morphism C x2 x1 -&gt; Functor p0 p} {f1 : Functor p0 p0}
           {x0 : Category.Core.morphism (_ -&gt; _) (f0 (f o 1)) (f0 f o f1)%functor}
           {H0' : IsIsomorphism x0}
           {x : Category.Core.morphism (_ -&gt; _) f1 1%functor}
           {H1' : IsIsomorphism x}
           {fst_hyp : f o 1 = f}
           (rew_hyp : forall x3 : p0,
                        (idtoiso (p0 -&gt; p) (ap f0 fst_hyp) : Category.Core.morphism _ _ _) x3
                        = 1 o ((f0 f) _1 (x x3) o x0 x3))
           {x3 : p} {x4 : p0} {f' : Category.Core.morphism p ((f0 f) x4) x3},
        exist (fun f2 : Category.Core.morphism C x2 x1 =&gt; Category.Core.morphism p ((f0 f2) x4) x3)
               (f o 1)
               (f' o ((f0 f) _1 (x x4) o x0 x4))
        = (f; f').</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 246
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 247
Time: 0.02s">
<div class="time" style="width: 10.050251256281%"></div>
<pre>
    helper_t idtac.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 248
Time: 0.009s">
<div class="time" style="width: 4.5226130653266%"></div>
<pre>
  Qed.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 249
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** ** Category of elements *)
 </pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 252
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition category : PreCategory.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 252
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 253
Time: 0.046s">
<div class="time" style="width: 23.115577889447%"></div>
<pre>
    refine (@Build_PreCategory
              Pair
              (fun s d =&gt; morphism s d)
              identity
              compose
              _
              _
              _
              _);
    [ abstract (
          intros ? ? ? ? [f ?] [g ?] [h ?];
          exact (pseudofunctor_to_cat_assoc_helper
                   (apD10
                      (ap components_of
                          (p_composition_of_coherent_for_rewrite F _ _ _ _ f g h))))
        )
    | abstract (
          intros ? ? [f ?];
          exact (pseudofunctor_to_cat_left_identity_helper
                   (apD10
                      (ap components_of
                          (p_left_identity_of_coherent_for_rewrite F _ _ f))))
        )
    | abstract (
          intros ? ? [f ?];
          exact (pseudofunctor_to_cat_right_identity_helper
                   (apD10
                      (ap components_of
                          (p_right_identity_of_coherent_for_rewrite F _ _ f))))
    ) ].</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 283
Time: 0.007s">
<div class="time" style="width: 3.5175879396985%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 284
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** ** First projection functor *)
 </pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 287
Time: 0.002s">
<div class="time" style="width: 1.0050251256281%"></div>
<pre>Definition pr1 : Functor category C
    := Build_Functor category C
                     c
                     (fun s d =&gt; @pr1 _ _)
                     (fun _ _ _ _ _ =&gt; idpath)
                     (fun _ =&gt; idpath).</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 292
Time: 0.006s">
<div class="time" style="width: 3.0150753768844%"></div>
<pre>
End Grothendieck.</pre>
</div>
<div class="code" title="File: PseudofunctorToCat.v
Line: 294
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

</pre>
</div>
</body>
</html>

